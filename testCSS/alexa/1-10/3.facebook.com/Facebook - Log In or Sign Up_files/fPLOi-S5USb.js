if (self.CavalryLogger) { CavalryLogger.start_js(["7+OaC"]); }

__d("AdsImageUploadConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={maxWidth:2048,maxHeight:2048};},null);
__d("InstagramSlipstreamMediaContentType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={MEDIA_CONTENT_TYPE_PHOTO:0,MEDIA_CONTENT_TYPE_VIDEO:1,MEDIA_CONTENT_TYPE_RESHARE_PHOTO:2,MEDIA_CONTENT_TYPE_RESHARE_VIDEO:3,MEDIA_CONTENT_TYPE_UNKNOWN:255};},null);
__d("PostInstagramEligibility",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={ELIGIBLE:"eligible",INELIGIBLE_CAPTION_TOO_LONG:"ineligible_caption_too_long",INELIGIBLE_MEDIA_ASPECT_RATIO:"ineligible_media_aspect_ratio",INELIGIBLE_MEDIA_DIMENSION:"ineligible_media_dimension",INELIGIBLE_MEDIA_SQUARE_ASPECT_RATIO:"ineligible_media_square_aspect_ratio",INELIGIBLE_MEDIA_SQUARE_DIMENSION:"ineligible_media_square_dimension",INELIGIBLE_MENTIONS_ARE_NOT_ALLOWED_IN_CAPTION:"ineligible_caption_mentions_not_allowed",INELIGIBLE_POST_ALBUM_UPLOAD:"ineligible_post_album_upload",INELIGIBLE_POST_MULTI_PHOTO:"ineligible_post_multi_photo",INELIGIBLE_POST_NO_MEDIA:"ineligible_post_no_media",INELIGIBLE_POST_TYPE:"ineligible_post_type",INELIGIBLE_UNKNOWN_ERROR:"ineligible_unknown_error",INELIGIBLE_VIDEO_LENGTH:"ineligible_video_length"};},null);
__d('AdsImageUploadErrorActions',['AdsDispatcher','AdsActionTypes'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={setUploadFormatError:function(i){c('AdsDispatcher').handleUpdateFromViewAction({message:i,type:c('AdsActionTypes').IMAGE_UPLOAD.FORMAT_ERROR});},setUploadSizeError:function(i){c('AdsDispatcher').handleUpdateFromViewAction({message:i,type:c('AdsActionTypes').IMAGE_UPLOAD.SIZE_ERROR});},removeErrors:function(){c('AdsDispatcher').handleUpdateFromViewAction({type:c('AdsActionTypes').IMAGE_UPLOAD.REMOVE_ERRORS});}};f.exports=h;},null);
__d('AdsShutterstockViewActions',['AdsActionTypes','AdsDispatcher'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={searchTextChanged:function(i){c('AdsDispatcher').handleUpdateFromViewAction({data:{searchText:i},type:c('AdsActionTypes').SHUTTERSTOCK.SEARCH_TEXT_CHANGED});},searchDone:function(i){c('AdsDispatcher').handleUpdateFromViewAction({data:{searchText:i},type:c('AdsActionTypes').SHUTTERSTOCK.SEARCH_DONE});},endReached:function(i){c('AdsDispatcher').handleUpdateFromViewAction({data:{searchText:i},type:c('AdsActionTypes').SHUTTERSTOCK.END_REACHED});}};f.exports=h;},null);
__d('ImageReader',['Promise','DOM','Event'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(k,l,m,n){var o=new Image(),p=function(){l(null,0,0);};c('Event').listen(o,{load:function(){if(m&&o.width>m||n&&o.height>n){var q=Math.max(o.width/m,o.height/n),r=o.width/q<<0,s=o.height/q<<0,t=c('DOM').create('canvas',{css:'background-color: transparent;',width:r,height:s}),u=t.getContext('2d');u.drawImage(o,0,0,o.width,o.height,0,0,r,s);try{l(t.toDataURL('image/jpeg'),o.width,o.height);return;}catch(v){l(k,o.width,o.height);}}else l(k,o.width,o.height);},error:p,abort:p});o.src=k;}function i(k,l,m,n){var o=new b.FileReader();o.onloadend=function(p){h(o.result,l,m,n);};o.readAsDataURL(k);}function j(k,l,m){return new (c('Promise'))(function(n){i(k,function(o){return n(o);},l,m);});}f.exports={promiseRead:j,read:i,resizeIfNeeded:h};},null);
__d("XAdsCFImageUploadController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ads\/create\/imageupload\/",{});},null);
__d('AdsUploadProcess',['cx','AdsImageUploadConstants','AdsDaoGraph','AdsImageLegacy','ArbiterMixin','DOM','ImageReader','XAdsCFImageUploadController','GlobalCallback','getAsyncParams','mixin'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k={IFRAME_NAME:"_57mk"},l=0;i=babelHelpers.inherits(m,c('mixin')(c('ArbiterMixin')));j=i&&i.prototype;function m(n,o){'use strict';j.constructor.call(this);this.id=l;l++;this.file=n;this.iframe=null;this.$AdsUploadProcess1=o;}m.prototype.getID=function(){'use strict';return this.id;};m.prototype.upload=function(n){'use strict';if(window.FileReader){this.$AdsUploadProcess2();}else this.$AdsUploadProcess3(n);};m.prototype.$AdsUploadProcess2=function(){'use strict';var n=function(o){if(o===null){this.failed();return;}o=o.split(',');var p=function(s){if(s&&s.images){var t=this.file.name,u=new (c('AdsImageLegacy'))(s.images[t]);this.succeeded(u);}else this.failed();}.bind(this),q=function(s){this.progressData=s;this.progressPercent=s.loaded/s.total*100;this.inform('onProgress',s);}.bind(this);try{c('AdsDaoGraph').add.imageForAccount.one(p,{bytes:o[1],name:this.file.name,encoding:o[0],handleError:p,accountId:this.$AdsUploadProcess1},q);}catch(r){this.failed();throw new Error(r.message);}}.bind(this);c('ImageReader').read(this.file,n,c('AdsImageUploadConstants').maxWidth,c('AdsImageUploadConstants').maxHeight);};m.prototype.$AdsUploadProcess3=function(n){'use strict';var o=document.createElement('iframe');o.className="_57mi";var p=k.IFRAME_NAME+this.getID();o.name=p;n.target=p;var q=c('XAdsCFImageUploadController').getURIBuilder();n.action=q.getURI().getQualifiedURI().toString();var r=c('getAsyncParams')('POST');Object.assign(r,{account_id:this.$AdsUploadProcess1,callback:c('GlobalCallback').create(this.$AdsUploadProcess4.bind(this,o)),domain:document.domain});Object.keys(r).forEach(function(s){n.appendChild(c('DOM').create('input',{type:'hidden',name:s,value:r[s]}));});document.body.appendChild(o);n.submit();};m.prototype.$AdsUploadProcess4=function(n,o,p){'use strict';c('GlobalCallback').remove(o);c('DOM').remove(n);if(p&&p.url){this.succeeded(new (c('AdsImageLegacy'))(p));}else this.failed();};m.prototype.succeeded=function(n){'use strict';this.image=n;this.inform('succeeded',n);};m.prototype.failed=function(){'use strict';this.inform('failed');};f.exports=m;},null);
__d('AdsImageUploader',['cx','csx','fbt','invariant','Promise','AdsImageUploadErrorActions','AdsImageValidation','AdsUploadProcess','ArbiterMixin','CSS','DOMEventListener','DOMQuery','ads-lib-connect_DEPRECATED','mixin','Parent','React','ReactDOM','WebApiApplication','getDOMImageSize'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l,m;if(c.__markCompiled)c.__markCompiled();var n=c('ads-lib-connect_DEPRECATED').FB,o=b.URL||b.webkitURL,p={UPLOAD_ELEMENT:"_57mh",DRAG_OVER:"_57mj",CLICK_HIJACK:"_57mf",CLICK_HIJACK_FORM:"_5ecl"};l=babelHelpers.inherits(q,c('mixin')(c('ArbiterMixin')));m=l&&l.prototype;function q(r,s){m.constructor.call(this);s=s||{};this.accountId=s.accountId;!this.accountId?k(0):void 0;this.acceptsMultiple='multiple' in s?s.multiple:true;this.acceptsMultiple=window.FileReader?this.acceptsMultiple:false;this.validateImageSize=s.validateImageSize;this.validateImageFormat=s.validateImageFormat;this.imageSpec=s.imageSpec;this.onFormInputMount=s.onFormInputMount;this.root=r;if(this.root){this.findAndDecorateUploadElements();this.createDragAndDropArea(this.root);}}q.prototype.findAndDecorateUploadElements=function(){var r=c('DOMQuery').scry(this.root,'.'+p.UPLOAD_ELEMENT);r.forEach(function(s){this.decorateUploadElement(s);},this);if(c('CSS').hasClass(this.root,p.UPLOAD_ELEMENT))this.decorateUploadElement(this.root);};q.prototype.createDragAndDropArea=function(r){c('DOMEventListener').add(r,'dragenter',function(s){s.preventDefault();c('CSS').addClass(this,p.DRAG_OVER);});c('DOMEventListener').add(r,'dragleave',function(s){s.preventDefault();c('CSS').removeClass(this,p.DRAG_OVER);});c('DOMEventListener').add(r,'dragover',function(s){s.preventDefault();s.dataTransfer.dropEffect='copy';});c('DOMEventListener').add(r,'drop',this.onDrop.bind(this));};q.prototype.onDrop=function(r){r.preventDefault();var s=c('DOMQuery').scry(this.root,'.'+p.CLICK_HIJACK_FORM)[0];this.upload(r.dataTransfer.files,s);};q.prototype.decorateUploadElement=function(r){var s=c('WebApiApplication').getAccessToken(),t=n.url('/act_'+this.accountId+'/adimages',null,s);if(c('DOMQuery').scry(r,'.'+p.CLICK_HIJACK).length)return;var u=document.createElement('div');u.className=p.CLICK_HIJACK;var v=c('React').createElement('form',{action:t,className:p.CLICK_HIJACK_FORM,encType:'multipart/form-data',method:'POST'},c('React').createElement('input',{accept:'image/*',className:"_57mg",multiple:this.acceptsMultiple,name:'fileToUpload',ref:this.onFormInputMount,type:'file',onClick:this.handleInputClick.bind(this)}));v=c('ReactDOM').render(v,u);var w=c('DOMQuery').find(u,"._57mg");c('DOMEventListener').add(w,'change',function(x){this.handleInputChange(x,w);}.bind(this));r.appendChild(u);};q.prototype.handleInputClick=function(){this.inform('onUploadClicked');};q.prototype.handleInputChange=function(r,s){var t=r.target||s,u=t.files||[t.value],v=c('Parent').byTag(t,'form');this.upload(u,v);};q.prototype.filterFiles=function(r){var s=r.filter(function(t){return !t.type||t.type.match(/image\.*/i);});return s;};q.prototype.getImageTooSmallErrorMessages=function(r){var s=j._("Image too small."),t=j._({"*":{"*":"This image is too small. Try one that's at least {width} x {height} px."}},[j.param('width',r.minWarningWidth,[0]),j.param('height',r.minWarningHeight,[0])]);return {shortMessage:s,longMessage:t};};q.prototype.getImageNotSupportedErrorMessages=function(r){var s=j._("Image format not supported."),t=!r?j._("The image format isn't supported. Please use a different image."):j._("The {image format} image format isn't supported. Please use a different image.",[j.param('image format',r)]);return {shortMessage:s,longMessage:t};};q.prototype.$AdsImageUploader1=function(r,s){return c('AdsImageValidation').isWarningSize({getWidth:function(){return r;},getHeight:function(){return s;}},this.imageSpec);};q.prototype.upload=function(r,s){r=Array.prototype.slice.call(r);if(!this.acceptsMultiple)r=[r[0]];r=this.filterFiles(r);if(!r)return;var t=[],u=[];if(this.validateImageFormat){r.forEach(function(w){if(c('AdsImageValidation').isValidFormat(w.type)){u.push(w);}else c('AdsImageUploadErrorActions').setUploadFormatError(this.getImageNotSupportedErrorMessages(w.type));}.bind(this));}else u=r;var v=[];v=u.map(function(w){return new (c('Promise'))(function(x,y){c('getDOMImageSize')(o.createObjectURL(w),function(z,aa,ba){if(this.validateImageFormat&&z===0&&aa===0){c('AdsImageUploadErrorActions').setUploadFormatError(this.getImageNotSupportedErrorMessages());x(false);}else if(this.validateImageSize&&this.imageSpec&&!this.$AdsImageUploader1(z,aa)){c('AdsImageUploadErrorActions').setUploadSizeError(this.getImageTooSmallErrorMessages(this.imageSpec));x(false);}else{t.push(new (c('AdsUploadProcess'))(w,this.accountId));x(true);}}.bind(this));}.bind(this));}.bind(this));c('Promise').all(v).done(function(w){if(w.every(function(x){return x;}))c('AdsImageUploadErrorActions').removeErrors();this.startUploadProcesses(t,s);}.bind(this));};q.prototype.$AdsImageUploader2=function(r){var s=c('Parent').byClass(r,p.CLICK_HIJACK),t=s.parentNode;if(t){t.removeChild(s);this.decorateUploadElement(t);}};q.prototype.startUploadProcesses=function(r,s){this.inform('onUploadStarted',r);var t=[],u=r.map(function(v){return new (c('Promise'))(function(w,x){v.subscribe('succeeded',function(y,z){t.push(z);w();});v.subscribe('failed',w);v.upload(s);});});c('Promise').all(u).done(function(){this.$AdsImageUploader2(s);this.uploadEnded(t);}.bind(this));};q.prototype.uploadEnded=function(r){this.inform('onUploadEnded',r);};f.exports={AdsImageUploader:q,AdsImageUploaderConstants:p};},null);
__d('FBCarouselArrow.react',['cx','xuiglyph','CenteredContainer.react','Image.react','Locale','React','joinClasses'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'FBCarouselArrow',propTypes:{direction:j.oneOf(['forward','backward']).isRequired,fullBleed:j.bool},render:function(){var l=c('joinClasses')(this.props.className,"_10sf"+(!!this.props.fullBleed?' '+"_5x5-":'')+(this.props.direction==='forward'?' '+"_5x5_":'')+(this.props.direction==='backward'?' '+"_5x60":''));return (c('React').createElement('div',babelHelpers['extends']({},this.props,{className:l}),c('React').createElement(c('CenteredContainer.react'),{className:"_5x6d",vertical:true},c('React').createElement(c('Image.react'),{className:"_3-8w",src:this._getGlyphForDirection()}))));},_getGlyphForDirection:function(){var l=i('chevron-left'),m=i('chevron-right');if(c('Locale').isRTL()){var n=[m,l];l=n[0];m=n[1];}return this.props.direction==='forward'?m:l;}});f.exports=k;},null);
__d('AdsArrowedContainer.react',['cx','invariant','CenteredContainer.react','FBCarouselArrow.react','FBOverlayBase.react','FBOverlayContainer.react','FBOverlayElement.react','Link.react','React'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'AdsArrowedContainer',propTypes:{isArrowCentered:j.bool,onIncrement:j.func,onDecrement:j.func},render:function(){var l=this._renderArrow('backward'),m=this._renderArrow('forward'),n=this._renderArrowOverLay('left',l),o=this._renderArrowOverLay('right',m);return (c('React').createElement(c('FBOverlayContainer.react'),this.props,c('React').createElement(c('FBOverlayBase.react'),null,this.props.children),n,o));},_renderArrow:function(l){var m,n;switch(l){case 'backward':m=this.props.onDecrement!==null;n=this.props.onDecrement;break;case 'forward':m=this.props.onIncrement!==null;n=this.props.onIncrement;break;default:i(0);}if(!m)return null;return (c('React').createElement(c('Link.react'),{className:!this.props.isArrowCentered?"_3-8z":'',onClick:n},c('React').createElement(c('FBCarouselArrow.react'),{direction:l,fullBleed:l==='backward'})));},_renderArrowOverLay:function(l,m){if(m)if(this.props.isArrowCentered){return (c('React').createElement(c('FBOverlayElement.react'),{horizontal:l},c('React').createElement(c('CenteredContainer.react'),{vertical:true},m)));}else return (c('React').createElement(c('FBOverlayElement.react'),{horizontal:l},m));return null;}});f.exports=k;},null);
__d('AdsCarousel.react',['cx','Locale','React','ReactDOM','ResponsiveBlock.react','clamp','emptyFunction','joinClasses'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'AdsCarousel',propTypes:{index:i.number.isRequired,onUpdated:i.func},getDefaultProps:function(){return {onUpdated:c('emptyFunction')};},getInitialState:function(){return {computedOffset:0};},componentDidMount:function(){this._computeOffset(this.props.index);},componentDidUpdate:function(){this._computeOffset(this.props.index);},_computeOffset:function(k){if(!c('ReactDOM').findDOMNode(this))return;var l=c('ReactDOM').findDOMNode(this).offsetWidth,m=c('ReactDOM').findDOMNode(this.refs.inner).offsetWidth,n=Math.max(m-l,0),o=0;for(var p=0;p<k&&o<n;p++){var q=this._getChildDOMNode(p);if(q)o+=q.offsetWidth;}o=c('clamp')(o,0,n);if(o!==this.state.computedOffset){this.setState({computedOffset:o});}else{var r=this.props.onUpdated;if(r)r(this._getVisibleChildrenCount());}},_onResize:function(k,l){this._computeOffset(this.props.index);},_getChildDOMNode:function(k){var l=this.refs['child_'+k];return l?c('ReactDOM').findDOMNode(l):null;},render:function(){var k=c('React').Children.map(this.props.children,function(n,o){return (c('React').createElement('div',{className:"_a1x",ref:'child_'+o},n));}),l=null;if(this.state.computedOffset){var m=String(-this.state.computedOffset)+'px';l=c('Locale').isRTL()?{right:m}:{left:m};}return (c('React').createElement(c('ResponsiveBlock.react'),{onResize:this._onResize},c('React').createElement('div',babelHelpers['extends']({},this.props,{className:c('joinClasses')(this.props.className,"_a28")}),c('React').createElement('div',{className:"_a2e",ref:'inner',style:l},k))));},_getVisibleChildrenCount:function(){var k=this.state.computedOffset+c('ReactDOM').findDOMNode(this).offsetWidth,l=0,m=this.props.index,n;while(n=this._getChildDOMNode(m++))if(n.offsetLeft+n.offsetWidth<=k){l++;}else break;return l;}});f.exports=j;},null);
__d('AdsArrowedCarouselEnhanced.react',['AdsArrowedContainer.react','AdsCarousel.react','React','ReactComponentWithPureRenderMixin'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'AdsArrowedCarouselEnhanced',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{currentSelectedIndex:h.number,currentSelectedShouldVisible:h.bool,maxChangeAmount:h.number},getDefaultProps:function(){return {currentSelectedIndex:0,currentSelectedShouldVisible:false,maxChangeAmount:1};},getInitialState:function(){return {firstVisibleIndex:0,visibleChildrenCount:0};},componentWillReceiveProps:function(j){if(!j.currentSelectedShouldVisible)return;var k=j.currentSelectedIndex;if(this._isSelectedIndexOnLeftNotVisible(k)){this.setState({firstVisibleIndex:k});}else if(this._isSelectedIndexOnRightNotVisible(k)){var l=this.state.firstVisibleIndex+this.state.visibleChildrenCount-1,m=k-l;this.setState({firstVisibleIndex:this.state.firstVisibleIndex+m});}},_isSelectedIndexOnLeftNotVisible:function(j){return j<this.state.firstVisibleIndex;},_isSelectedIndexOnRightNotVisible:function(j){var k=this.state.firstVisibleIndex+this.state.visibleChildrenCount-1;return j>k;},render:function(){var j=this._getNextIncrementAmount(),k=this._getNextDecrementAmount();return (c('React').createElement(c('AdsArrowedContainer.react'),babelHelpers['extends']({},this.props,{isArrowCentered:true,onDecrement:k?this._decrementIndex:null,onIncrement:j?this._incrementIndex:null}),c('React').createElement(c('AdsCarousel.react'),{index:this.state.firstVisibleIndex,onUpdated:this._update},this.props.children)));},_decrementIndex:function(){var j=this._getNextDecrementAmount();this.setState({firstVisibleIndex:this.state.firstVisibleIndex-j});},_incrementIndex:function(){var j=this._getNextIncrementAmount();this.setState({firstVisibleIndex:this.state.firstVisibleIndex+j});},_update:function(j){this.setState({visibleChildrenCount:j});},_getNextIncrementAmount:function(){var j=this.state.visibleChildrenCount,k=c('React').Children.count(this.props.children)-this.state.firstVisibleIndex-j;if(k<=0)return 0;return Math.min(k,this.props.maxChangeAmount||1);},_getNextDecrementAmount:function(){return Math.min(this.state.firstVisibleIndex,this.props.maxChangeAmount||1);}});f.exports=i;},null);
__d('AdsImageSecondaryActions',['keyMirror'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('keyMirror')({X:null});f.exports=h;},null);
__d('AdsCFImageViewActions',['AdsDispatcher','AdsCFActionTypes'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={changeStockSearchText:function(i){c('AdsDispatcher').handleUpdateFromViewAction({searchText:i,type:c('AdsCFActionTypes').STOCK_IMAGE_SEARCH_TEXT_CHANGE});},cancelImageDialog:function(i){c('AdsDispatcher').handleUpdateFromViewAction({imageList:i,type:c('AdsCFActionTypes').IMAGE_DIALOG_CANCEL});},confirmImageDialog:function(i){c('AdsDispatcher').handleUpdateFromViewAction({imageList:i,type:c('AdsCFActionTypes').IMAGE_DIALOG_CONFIRMED});}};f.exports=h;},null);
__d('AdsInstagramErrorUtils',['fbt','AdsAPIAdgroupPaths','AdsAPIPromotablePostFields','AdsCreationConfig','AdsError','AdsErrorType_DEPRECATED','AdsErrorUtils','AdImageSpecs','AdsPageTypes','AdsReachFrequencyUtils','AdsQE','Link.react','LoadObject','Map','NewAdsInstagramErrorUtils','PostInstagramEligibility','React','adsGKCheck','getByPath'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={getCombinedErrorMessage:function(j,k){if(!j.length)return null;var l=j.length>1?j.map(function(m){return h._("{bullet} {error message}",[h.param('bullet','\u2022'),h.param('error message',m.message)]);}).join('\n'):j[0].message;return this.getImageErrorsTitle(j,k)+'\n\n'+l;},getImageErrorsTitle:function(j,k){if(c('adsGKCheck')('new_soft_error_content'))return c('NewAdsInstagramErrorUtils').getImageErrorsTitle(j,k);if(!j.length)return null;if(j.length>1){if(k===c('AdsError').Level.RECOMMEND)return h._("This image can't be used for Instagram ads, but it will still run on Facebook.");return h._("This image can't be used for Instagram ads.");}switch(j[0].key){case c('AdsErrorType_DEPRECATED').ADGROUP_CREATIVE_INSTAGRAM_IMAGE_WRONG_DIMENSIONS:case c('AdsErrorType_DEPRECATED').ADGROUP_CREATIVE_INSTAGRAM_CHILD_INVALID_IMAGE:if(k===c('AdsError').Level.RECOMMEND)return h._("This image is too small for Instagram ads, but it will still run on Facebook.");return h._("This image is too small for Instagram ads.");case c('AdsErrorType_DEPRECATED').ADGROUP_CREATIVE_INSTAGRAM_IMAGE_WRONG_RATIO:if(k===c('AdsError').Level.RECOMMEND)return h._("This image uses the wrong aspect ratio for Instagram ads, but it will still run on Facebook.");return h._("This image uses the wrong aspect ratio for Instagram ads.");case c('AdsErrorType_DEPRECATED').ADGROUP_CREATIVE_INSTAGRAM_IMAGE_CROP_WRONG_DIMENSIONS:if(k===c('AdsError').Level.RECOMMEND)return h._("This cropped image is too small for Instagram ads, but it will still run on Facebook.");return h._("This cropped image is too small for Instagram ads.");case c('AdsErrorType_DEPRECATED').ADGROUP_CREATIVE_INSTAGRAM_IMAGE_INVALID:if(k===c('AdsError').Level.RECOMMEND)return h._("This image can't be used for Instagram ads, but it will still run on Facebook.");return h._("This image can't be used for Instagram ads.");case c('AdsErrorType_DEPRECATED').ADGROUP_CREATIVE_INSTAGRAM_IMAGE_MISSING:if(k===c('AdsError').Level.RECOMMEND)return h._("Image required for Instagram ads, but it will still run on Facebook.");return h._("Image required for Instagram ads.");}return null;},getImageErrorsBody:function(j){return j.map(function(k){return k.message;});},getImageErrorSuggestion:function(j,k,l){var m=j.cropLinkMaker,n=j.removeImage,o=j.removeInstagramPlacement,p=j.resetCrop;if(!k.length)return null;if(k.length>1)return this._getDefaultImageErrorSuggestions(l,n,o);var q=k[0].key;switch(q){case c('AdsErrorType_DEPRECATED').ADGROUP_CREATIVE_INSTAGRAM_IMAGE_WRONG_DIMENSIONS:return this._getDefaultImageErrorSuggestions(l,n,o);case c('AdsErrorType_DEPRECATED').ADGROUP_CREATIVE_INSTAGRAM_IMAGE_WRONG_RATIO:return (m?this._getWrongImageRatioErrorSuggestions(l,o,m):this._getWrongImageRatioErrorSuggestionsNoCrop(l,o));case c('AdsErrorType_DEPRECATED').ADGROUP_CREATIVE_INSTAGRAM_IMAGE_CROP_WRONG_DIMENSIONS:return this._getSmallCroppedImageErrorSuggestions(l,o,p);case c('AdsErrorType_DEPRECATED').ADGROUP_CREATIVE_INSTAGRAM_CHILD_INVALID_IMAGE:return this._getMPAImageErrorSuggestion(l,n,o);}},getCarouselVideoErrorTitle:function(j,k,l){if(l!==c('AdsError').Level.RECOMMEND)return h._("Instagram doesn't yet support video in carousel format");if(k){return h._("Instagram doesn't yet support video in carousel format. Your carousel ad will still run on Facebook.");}else return h._("Instagram doesn't yet support video in carousel format. Your carousel ads will still run on Facebook.");},getCarouselVideoErrorSuggestions:function(j,k,l,m){var n=void 0;if(l){if(k){n=h._("{=remove Instagram as a placement} for this ad, or use an image in your carousel instead.",[h.param('=remove Instagram as a placement',c('React').createElement(c('Link.react'),{onClick:l},h._("Remove Instagram as a placement")))]);}else n=h._("{=remove Instagram as a placement} for these ads, or use an image in your carousel instead.",[h.param('=remove Instagram as a placement',c('React').createElement(c('Link.react'),{onClick:l},h._("Remove Instagram as a placement")))]);}else n=h._("Use an image in your carousel instead.");return n;},getCarouselErrorTitle:function(j,k,l){if(c('adsGKCheck')('new_soft_error_content'))return c('NewAdsInstagramErrorUtils').getCarouselErrorTitle(j,k,l);if(l!==c('AdsError').Level.RECOMMEND)return h._("Some media is missing or can't be used for Instagram ads");if(k){return h._("Some media is missing or can't be used for Instagram ads. Your carousel ad will still run on Facebook.");}else return h._("Some media is missing or can't be used for Instagram ads. Your carousel ads will still run on Facebook.");},getCarouselErrorSuggestions:function(j,k,l,m){if(c('adsGKCheck')('new_soft_error_content'))return c('NewAdsInstagramErrorUtils').getCarouselErrorSuggestions(j,k,l,m);if(m===c('AdsError').Level.RECOMMEND)if(k){return h._("You can choose other media for this ad, so it will run on both Instagram and Facebook.");}else return h._("You can choose other media for these ads, so they will run on both Instagram and Facebook.");var n=l?c('React').createElement(c('Link.react'),{onClick:l},h._("remove Instagram as a placement")):null;if(k){return n?h._("Choose other media for this ad, or {=remove Instagram as a placement} for this ad set.",[h.param('=remove Instagram as a placement',n)]):h._("Choose other media for this ad.");}else return n?h._("Choose other media for these ads, or {=remove Instagram as a placement} for these ad sets.",[h.param('=remove Instagram as a placement',n)]):h._("Choose other media for these ads.");},_getDefaultImageErrorSuggestions:function(j,k,l){if(j)return h._("{=Remove image} or {=remove Instagram as a placement} for this ad set.",[h.param('=Remove image',this._getRemoveImageLink(k)),h.param('=remove Instagram as a placement',this._getRemoveInstagramPlacementLink(l))]);return h._("{=Remove image} for this ad set.",[h.param('=Remove image',this._getRemoveImageLink(k))]);},_getWrongImageRatioErrorSuggestions:function(j,k,l){if(j)return h._("{=Crop the image to a square} or {=remove Instagram as a placement} for this ad set.",[h.param('=Crop the image to a square',this._getCropImageToSquareLink(l)),h.param('=remove Instagram as a placement',this._getRemoveInstagramPlacementLink(k))]);return h._("{=Crop the image to a square} for this ad set.",[h.param('=Crop the image to a square',this._getCropImageToSquareLink(l))]);},_getWrongImageRatioErrorSuggestionsNoCrop:function(j,k){if(j)return h._("Choose another image or {=remove Instagram as a placement} for this ad set.",[h.param('=remove Instagram as a placement',this._getRemoveInstagramPlacementLink(k))]);return h._("Choose another image for this ad.");},_getSmallCroppedImageErrorSuggestions:function(j,k,l){if(j)return h._("{=Use the original image} or {=remove Instagram as a placement} for this ad set.",[h.param('=Use the original image',this._getResetCropLink(l)),h.param('=remove Instagram as a placement',this._getRemoveInstagramPlacementLink(k))]);return h._("{=Use the original image} for this ad set.",[h.param('=Use the original image',this._getResetCropLink(l))]);},_getMPAImageErrorSuggestion:function(j,k,l){return this._getDefaultImageErrorSuggestions(j,k,l);},_getRemoveInstagramPlacementLink:function(j){return (c('React').createElement(c('Link.react'),{onClick:j},h._("remove Instagram as a placement")));},_getRemoveImageLink:function(j){return (c('React').createElement(c('Link.react'),{onClick:j},h._("Remove image")));},_getCropImageToSquareLink:function(j){var k=h._("Crop the image to a square");return j(k);},_getResetCropLink:function(j){return (c('React').createElement(c('Link.react'),{onClick:j},h._("Use the original image")));},getWrongVideoDimensionErrorMessage:function(j,k){if(c('adsGKCheck')('new_soft_error_content'))return c('NewAdsInstagramErrorUtils').getWrongVideoDimensionErrorMessage(j,k);return h._("Your video must be at least {minimum Instagram ad video width} \u00d7 {minimum Instagram ad video height} pixels for Instagram.",[h.param('minimum Instagram ad video width',j?j:c('AdsCreationConfig').instagramAdsVideoMinWidth),h.param('minimum Instagram ad video height',k?k:c('AdsCreationConfig').instagramAdsVideoMinHeight)]);},getWrongVideoRatioErrorMessage:function(j,k){if(c('adsGKCheck')('new_soft_error_content'))return c('NewAdsInstagramErrorUtils').getWrongVideoRatioErrorMessage(j,k);if(k&&j&&k===j)return h._("A {Instagram ad video aspect ratio}:1 aspect ratio is required for the video for Instagram.",[h.param('Instagram ad video aspect ratio',j)]);return h._("A {maximum Instagram ad video aspect ratio}:1 to {minimum Instagram ad video aspect ratio}:1 aspect ratio is required for the video for Instagram.",[h.param('maximum Instagram ad video aspect ratio',j?j:c('AdImageSpecs').INSTAGRAM_STREAM_NO_CROP.maxWarningAspectRatio),h.param('minimum Instagram ad video aspect ratio',k?k:c('AdImageSpecs').INSTAGRAM_STREAM_NO_CROP.minWarningAspectRatio)]);},getWrongVideoLengthErrorMessage:function(){if(c('adsGKCheck')('new_soft_error_content'))return c('NewAdsInstagramErrorUtils').getWrongVideoLengthErrorMessage();return h._("Your video must be {minimum Instagram ad video duration} to {maximum Instagram ad video duration} seconds long for Instagram.",[h.param('minimum Instagram ad video duration',c('AdsCreationConfig').instagramAdsVideoMinDurationInSec),h.param('maximum Instagram ad video duration',c('AdsCreationConfig').instagramAdsVideoMaxDurationInSec)]);},getWrongVideoThumbnailRatioErrorMessage:function(){return h._("The image must have the same aspect ratio as the video for Instagram.");},getWrongVideoThumbnailDimensionErrorMessage:function(){return h._("Your thumbnail must be at least {minimum Instagram ad video width} \u00d7 {miniumum Instagram ad video height} pixels for Instagram.",[h.param('minimum Instagram ad video width',c('AdsCreationConfig').instagramAdsVideoMinWidth),h.param('miniumum Instagram ad video height',c('AdsCreationConfig').instagramAdsVideoMinHeight)]);},isInstagramSpecificError:function(j){return (j.key===c('AdsErrorType_DEPRECATED').ADGROUP_CREATIVE_INSTAGRAM_CHILD_IMAGE_MISSING||j.key===c('AdsErrorType_DEPRECATED').ADGROUP_CREATIVE_INSTAGRAM_CHILD_INVALID_IMAGE||j.key===c('AdsErrorType_DEPRECATED').ADGROUP_CREATIVE_INSTAGRAM_IMAGE_CROP_WRONG_DIMENSIONS||j.key===c('AdsErrorType_DEPRECATED').ADGROUP_CREATIVE_INSTAGRAM_IMAGE_WRONG_DIMENSIONS||j.key===c('AdsErrorType_DEPRECATED').ADGROUP_CREATIVE_INSTAGRAM_IMAGE_WRONG_RATIO);},getInstagramAccountErrorSpec:function(j){return (c('getByPath')(j,c('AdsAPIAdgroupPaths').CREATIVE.OBJECT_STORY_SPEC.INSTAGRAM_ACTOR_ID)||c('getByPath')(j,c('AdsAPIAdgroupPaths').CREATIVE.INSTAGRAM_ACTOR_ID));},getIneligibilityReason:function(j){if(c('adsGKCheck')('new_soft_error_content'))return c('NewAdsInstagramErrorUtils').getIneligibilityReason(j);switch(j){case c('PostInstagramEligibility').INELIGIBLE_CAPTION_TOO_LONG:var k=h._("Instagram placement has a caption limit of {maximum caption length} characters. This caption is too long.",[h.param('maximum caption length',c('AdsCreationConfig').instagramAdsMaxCaptionLength)]);return k;case c('PostInstagramEligibility').INELIGIBLE_MENTIONS_ARE_NOT_ALLOWED_IN_CAPTION:k=h._("Mentions aren't allowed in captions for ads with Instagram placement.");return k;case c('PostInstagramEligibility').INELIGIBLE_MEDIA_SQUARE_ASPECT_RATIO:k=h._("The media in this post isn't square. Carousel ads with Instagram placement require square media.");return k;case c('PostInstagramEligibility').INELIGIBLE_MEDIA_SQUARE_DIMENSION:k=h._("Media needs to be at least {minimum width} pixels in width and height to be used in a carousel ad with Instagram placement.",[h.param('minimum width',c('AdsCreationConfig').instagramAdsVideoMinWidth)]);return k;case c('PostInstagramEligibility').INELIGIBLE_MEDIA_ASPECT_RATIO:k=h._("Aspect ratios of media on Instagram are required to be between {minimum Instagram ad video aspect ratio}:1 and {maximum Instagram ad video aspect ratio}:1.",[h.param('minimum Instagram ad video aspect ratio',c('AdImageSpecs').INSTAGRAM_STREAM_NO_CROP.minWarningAspectRatio),h.param('maximum Instagram ad video aspect ratio',c('AdImageSpecs').INSTAGRAM_STREAM_NO_CROP.maxWarningAspectRatio)]);return k;case c('PostInstagramEligibility').INELIGIBLE_MEDIA_DIMENSION:k=h._("Media in this post need to be at least {minimum width} pixels wide and {minimum height} pixels high to be used in an ad with Instagram placement.",[h.param('minimum width',c('AdsCreationConfig').instagramAdsVideoMinWidth),h.param('minimum height',c('AdsCreationConfig').instagramAdsVideoMinHeight)]);return k;case c('PostInstagramEligibility').INELIGIBLE_VIDEO_LENGTH:k=h._("Videos must be {minimum video length} - {maximum video length} seconds long for Instagram.",[h.param('minimum video length',c('AdsCreationConfig').instagramAdsVideoMinDurationInSec),h.param('maximum video length',c('AdsCreationConfig').instagramAdsVideoMaxDurationInSec)]);return k;default:k=h._("This post can't be used for ads on Instagram.");return k;}},getErrorsForSinglePost:function(j){var k=[];if(!j[c('AdsAPIPromotablePostFields').IS_INSTAGRAM_ELIGIBLE]){var l=i.getIneligibilityReason(j[c('AdsAPIPromotablePostFields').INSTAGRAM_ELIGIBILITY]).toString();k.push(new (c('AdsError'))(c('AdsErrorType_DEPRECATED').ADGROUP_PROMOTABLE_POST_INSTAGRAM_INELIGIBLE,l,{level:c('AdsError').Level.WARN}));}return k;},getErrorsForAllPosts:function(j,k,l,m,n){var o=new (c('Map'))();if(j)j.forEach(function(r){o.set(r.id,this.getErrorsForSinglePost(r));}.bind(this));var p=null;if(l.some(function(r){return r==[c('AdsPageTypes').INSTAGRAM_STREAM];})){p=[c('AdsPageTypes').INSTAGRAM_STREAM];}else{var q;p=(q=[]).concat.apply(q,l);}o.forEach(function(r,s){if(m&&c('AdsReachFrequencyUtils').buyingTypeContainsReachFrequency(m))return;if(n){o.set(s,r);}else o.set(s,c('AdsErrorUtils').giveRecommendationsForSoftErrors(r,k,p));});return o;}};f.exports=i;},null);
__d('AdsMediaPanelImageBoxUtils',['AdsCreationExperimentStore_DEPRECATED'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=null;function i(){if(h===null){var k=c('AdsCreationExperimentStore_DEPRECATED').getExperiment('ads_cf_shutterstock_flyover_enabled');k.logExposure();h=k.getParamBool('enabled');}return h;}var j={flyoverPreviewEnabled:i};f.exports=j;},null);
__d('AdsMediaPanelImageBox.react',['cx','cssVar','fbt','AdsCreationExperimentStore_DEPRECATED','AdsError','AdsErrorType_DEPRECATED','AdsErrorUtils','AdsImageLegacy','AdsImageValidation','AdsInstagramErrorUtils','AdsInstagramFields','AdsMediaPanelImageBoxUtils','AdsPageTypes','AdsValidationIcon.react','AdsValidationIconType','BackgroundImage.react','ContextualDialog.react','FBOverlayBase.react','FBOverlayContainer.react','FBOverlayElement.react','GradientBox.react','Link.react','React','ReactDOM','ReactLayeredComponentMixin','adsGKCheck','debounce','getElementPosition','getViewportDimensions','joinClasses'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=parseInt("110px",10),m=parseInt("66px",10),n=1000,o=1000,p=65,q=65,r=20,s=c('adsGKCheck')('ads_image_picker_redesign')&&'1'===c('AdsCreationExperimentStore_DEPRECATED').getExperiment('ads_image_picker_redesign_experiment').getParam('has_redesign');if(s){m=parseInt("58px",10);p=m;q=m;}var t=c('AdsInstagramFields').INSTAGRAM_SPECIFIC_IMAGE_ERROR_KEYS,u={'default':null,disabled:null,selected:"_5ywk",removable:"_5ywl"},v=c('React').createClass({displayName:'AdsMediaPanelImageBox',mixins:[c('ReactLayeredComponentMixin')],propTypes:{alt:k.string,buyingTypes:k.arrayOf(k.string),decoration:k.oneOf(Object.keys(u)),image:k.instanceOf(c('AdsImageLegacy')).isRequired,imageSpec:k.object,isTooSmall:k.bool,igSpecificImageSpec:k.object,qes:k.object,onDecorationIconClick:k.func,onImageClick:k.func,onImageDoubleClick:k.func},getDefaultProps:function(){return {decoration:'default',isTooSmall:false};},getInitialState:function(){return {errorLevel:c('AdsError').Level.SUCCESS,imageReady:this.props.image.hasDimensions(),previewShown:false,hovering:false,isValidForFacebook:true};},_isDisabled:function(){return this.props.decoration==='disabled';},_mayClickImages:function(){if(this._isDisabled())return false;if(!this.props.isTooSmall||this.state.errorLevel!==c('AdsError').Level.WARN)return true;return this.state.isValidForFacebook;},_getOnImageClick:function(){return this._mayClickImages()?this.props.onImageClick:null;},_getOnImageDoubleClick:function(){return this._mayClickImages()?this.props.onImageDoubleClick:null;},_mayShowPreviews:function(){return (!this._isDisabled()&&this.props.image.isStockImage()&&c('AdsMediaPanelImageBoxUtils').flyoverPreviewEnabled());},_getOnImageMouseEnter:function(){return this._mayShowPreviews()?this._showPreview:null;},_getOnImageMouseLeave:function(){return this._mayShowPreviews()?this._hidePreview:null;},_showPreview:function(){this._resetSchedulePreviewHide();this.setState({previewShown:true});},_hidePreview:function(){this._resetSchedulePreviewHide();this.setState({previewShown:false});},_onImageDimensionsReady:function(){if(this.isMounted())this.setState({imageReady:true});},componentWillReceiveProps:function(w){if(w.image.equals(this.props.image))return;var x=w.image.hasDimensions();this.setState({imageReady:x});if(!x)w.image.setDimensionsReadyCallback(this._onImageDimensionsReady);},componentWillMount:function(){this._setSchedulePreviewHide(c('debounce')(this._hidePreview,r));if(!this.state.imageReady)this.props.image.setDimensionsReadyCallback(this._onImageDimensionsReady);if(this.props.imageSpec)this.props.image.resetValidation(this.props.imageSpec.placement);if(this.props.igSpecificImageSpec)this.props.image.resetValidation(this.props.igSpecificImageSpec.placement);},componentWillUnmount:function(){this._resetSchedulePreviewHide();this._setSchedulePreviewHide(null);},_setSchedulePreviewHide:function(w){var x=this;x._schedulePreviewHide=w;},_resetSchedulePreviewHide:function(){var w=this;w._schedulePreviewHide.reset();},_renderDecorationIcon:function(){var w=this.props.onDecorationIconClick;return (c('React').createElement(c('Link.react'),{className:"_5ywm",tabIndex:w?null:-1,onClick:w,onMouseEnter:this._getOnImageMouseEnter(),onMouseLeave:this._getOnImageMouseLeave()}));},_renderOverlay:function(){if(!this._isDisabled())return null;return (c('React').createElement('div',{className:"_29wz"}));},_renderImage:function(){var w=this.props.image,x=this._calculateImageDimensions(),y=w.calculatedWidth,z=w.calculatedHeight,aa=null,ba=null,ca=null;if(this.props.isTooSmall){aa=this._renderErrorIcon();ba=this._renderDimensionInfo();ca=this._renderOverlayGradient();}else if(s&&this.state.hovering){ba=this._renderDimensionInfo();ca=this._renderOverlayGradient();}return (c('React').createElement(c('FBOverlayContainer.react'),{className:"_29w-"},c('React').createElement(c('FBOverlayBase.react'),null,c('React').createElement('div',{className:!w.isStockImage()?"_5ywo":''},c('React').createElement(c('BackgroundImage.react'),{alt:this.props.alt,backgroundPosition:'0px',backgroundSize:'cover',className:(!w.isStockImage()&&!s?"_24s3":'')+(!w.isStockImage()&&s?' '+"_24s7":''),height:z||x.height,loadingIndicatorStyle:'small',optimizeResizeSpeed:true,ref:'image',src:w.getThumbnailUrl()||w.getUrl(),style:this._getImageStyle(),width:y||x.width}))),ca,c('React').createElement(c('FBOverlayElement.react'),{vertical:'bottom'},c('React').createElement('div',{className:"_20-u"},ba,aa))));},_renderOverlayGradient:function(){return (c('React').createElement(c('FBOverlayElement.react'),{vertical:'bottom'},c('React').createElement(c('GradientBox.react'),{className:"_2_4q",color:'black',direction:'up'})));},_renderDimensionInfo:function(){var w=this.props.image.isStockImage()?this._calculateFullSizeStockImageDimensions():this._getImageDimensions();return j._("{width} \u00d7 {height}",[j.param('width',w.width),j.param('height',w.height)]);},_renderErrorIcon:function(){var w=[];if(this.props.imageSpec)w.push(this.props.imageSpec);if(this.props.igSpecificImageSpec)w.push(this.props.igSpecificImageSpec);var x=c('AdsImageValidation').getAdsErrorsForImage(this.props.image,w,this.props.qes,this.props.buyingTypes);if(!x||x.length===0)return null;var y=this.props.imageSpec&&this.props.imageSpec.placement!==c('AdsPageTypes').INSTAGRAM_STREAM&&x.every(function(aa){return aa.key!==c('AdsErrorType_DEPRECATED').ADGROUP_CREATIVE_IMAGE_INVALID;});if(y!==this.state.isValidForFacebook)this.setState({isValidForFacebook:y});var z=c('AdsErrorUtils').getLevelForErrors(x);if(z!==this.state.errorLevel)this.setState({errorLevel:z});x=c('AdsErrorUtils').getAllErrorsAtLevel(x,z);return (c('React').createElement(c('AdsValidationIcon.react'),{className:"_20-v",isError:z===c('AdsError').Level.WARN,messages:this._getErrorMessages(x,z),type:z===c('AdsError').Level.WARN?c('AdsValidationIconType').ERROR_IMAGE:c('AdsValidationIconType').WARNING}));},_getErrorMessages:function(w,x){var y=w.filter(function(aa){return !t.has(aa.key);}).map(function(aa){return aa.message;}),z=c('AdsInstagramErrorUtils').getCombinedErrorMessage(w.filter(function(aa){return t.has(aa.key);}),x);z&&y.push(z);return y;},render:function(){return (c('React').createElement('div',{className:"_5ywp"},c('React').createElement('div',{className:c('joinClasses')((!s?"_24s3":'')+(s?' '+"_24s7":''),u[this.props.decoration],this.props.className),onMouseEnter:function(){return this.setState({hovering:true});}.bind(this),onMouseLeave:function(){return this.setState({hovering:false});}.bind(this)},c('React').createElement(c('Link.react'),{className:"_5ywq",tabIndex:this.props.onImageClick?null:-1,onClick:this._getOnImageClick(),onDoubleClick:this._getOnImageDoubleClick(),onMouseEnter:this._getOnImageMouseEnter(),onMouseLeave:this._getOnImageMouseLeave()},this._renderImage()),this._renderOverlay(),this._renderDecorationIcon())));},renderLayers:function(){var w=this.props.image,x=this._mayShowPreviews()&&this.state.previewShown,y=w.getPreviewWidth(),z=w.getPreviewHeight(),aa=null;if(!x)return {};var ba={height:String(z)+'px',width:String(y)+'px'},ca=c('getElementPosition')(c('ReactDOM').findDOMNode(this)),da=c('getViewportDimensions')(),ea=ca.x,fa=da.width-ca.x-ca.width;aa=ea>fa?'left':'right';return {preview:c('React').createElement(c('ContextualDialog.react'),{contextRef:function(){return this.refs.image;}.bind(this),position:aa,shown:true,style:ba},c('React').createElement(c('BackgroundImage.react'),{backgroudSize:'cover',backgroundPosition:'0px',height:z,loadingIndicatorStyle:'large',optimizeResizeSpeed:true,src:w.getPreviewUrl(),width:y}))};},_getSizeMultiplier:function(w,x,y){return s?Math.min(x/w.width,y/w.height):Math.min(x/w.width,y/w.height,1);},_getStockImageSizeMultiplier:function(){return this._getSizeMultiplier(this._getStockImageVisibleDimensions(),l,m);},_fitDimensions:function(w,x,y){var z=this._getSizeMultiplier(w,x,y);return {height:Math.floor(w.height*z),width:Math.floor(w.width*z)};},_getImageStyle:function(){var w=this.props.image;if(!w.isStockImage()||!this.state.imageReady)return null;var x=this._getStockImageVisibleDimensions(),y=this._getImageDimensions(),z={height:y.height-x.height,width:y.width-x.width},aa=this._getStockImageSizeMultiplier(),ba={};if(z.height>0)ba.marginBottom=String(Math.ceil(z.height*-aa))+'px';if(z.width>0)ba.marginRight=String(Math.ceil(z.width*-aa))+'px';return ba;},_getImageDimensions:function(){return {height:this.props.image.height,width:this.props.image.width};},_getNonStockImageDimensions:function(){return {height:this.props.image.getThumbnailHeight()||this.props.image.height,width:this.props.image.getThumbnailWidth()||this.props.image.width};},_getStockImageVisibleDimensions:function(){return {height:this.props.image.getThumbnailHeight(),width:this.props.image.getThumbnailWidth()};},_calculateImageDimensions:function(){return this.props.image.isStockImage()?this._calculateStockImageDimensions():this._calculateNonStockImageDimensions();},_calculateNonStockImageDimensions:function(){if(!this.state.imageReady)return {height:q,width:p};return this._fitDimensions(this._getNonStockImageDimensions(),l,m);},_calculateStockImageDimensions:function(){if(!this.state.imageReady)return this._fitDimensions(this._getStockImageVisibleDimensions(),l,m);var w=this._getImageDimensions(),x=this._getStockImageSizeMultiplier();return {height:Math.floor(w.height*x),width:Math.floor(w.width*x)};},_calculateFullSizeStockImageDimensions:function(){var w=this.props.image;if(w.hasFullSizeDimensions())return {height:w.getFullSizeHeight(),width:w.getFullSizeWidth()};var x=w.getPreviewWidth(),y=w.getPreviewHeight(),z=Math.min(n/x,o/y);return {height:Math.round(y*z),width:Math.round(x*z)};}});f.exports=v;},null);
__d('AdsMediaPanelImageBoxContainer.react',['AdsImageLegacy','AdsMediaPanelImageBox.react','AdsQE','AdsQEStore','FluxContainer','LoadObject','React','XUISpinner.react'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').Component;h=babelHelpers.inherits(k,j);i=h&&h.prototype;k.getStores=function(){return [c('AdsQEStore')];};k.calculateState=function(){return {qes:{ig_ads_editing_soft_errors:c('AdsQEStore').getForCurrentUser('ads_ig_soft_errors_all'),ig_ads_landscape_cropping:c('AdsQEStore').getForCurrentUser('ig_ads_landscape_cropping')}};};k.prototype.render=function(){if(!this.state.qes.ig_ads_editing_soft_errors.isDone())return c('React').createElement(c('XUISpinner.react'),null);return (c('React').createElement(c('AdsMediaPanelImageBox.react'),babelHelpers['extends']({},this.props,{qes:this.state.qes})));};function k(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(k);},null);
__d('AdsMediaStandaloneLibraryImageWithDimensions.react',['cx','fbt','AdsImageLegacy','AdsValidationIcon.react','AdsValidationIconType','BackgroundImage.react','FBOverlayBase.react','FBOverlayContainer.react','FBOverlayElement.react','React'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k={height:600,width:200},l={height:400,width:400},m=c('React').createClass({displayName:'AdsMediaStandaloneLibraryImageWithDimensions',propTypes:{alt:j.string,image:j.instanceOf(c('AdsImageLegacy')).isRequired,imageReady:j.bool},getInitialState:function(){return {thumbnailLoaded:false};},render:function(){var n=this.props.image,o=this._calculateImageDimensions(),p=n.calculatedWidth,q=n.calculatedHeight,r=this.state.thumbnailLoaded?n.getUrl():n.getThumbnailUrl();return (c('React').createElement(c('FBOverlayContainer.react'),{className:"_1bye"},c('React').createElement(c('FBOverlayBase.react'),null,c('React').createElement('div',null,c('React').createElement(c('BackgroundImage.react'),{alt:this.props.alt,backgroundPosition:0,backgroundSize:'cover',className:"_2vjn",height:q||o.height,loadingIndicatorStyle:'small',optimizeResizeSpeed:true,src:r,width:p||o.width,onImageLoad:this._handleImageLoad}))),c('React').createElement(c('FBOverlayElement.react'),{vertical:'bottom'},this._renderImageDimensions(n))));},_renderImageDimensions:function(n){var o=n.getWidth(),p=n.getHeight();return (c('React').createElement('div',{className:"_1byh"},c('React').createElement('span',{className:"_1byi",onClick:this._handleImageInfoClick},c('React').createElement(c('AdsValidationIcon.react'),{className:"_1byj",type:c('AdsValidationIconType').LARGE_IMAGE}),c('React').createElement('span',{className:"_1byk"},i._("{width} \u00d7 {height}",[i.param('width',o),i.param('height',p)])))));},_handleImageLoad:function(){this.setState({thumbnailLoaded:true});},_handleImageInfoClick:function(n){n.stopPropagation();this.props.onExpandClick(this.props.image);},_calculateImageDimensions:function(){if(!this.props.imageReady)return l;return this._fitDimensions(this._getImageDimensions(),k);},_getImageDimensions:function(){return {height:this.props.image.getThumbnailHeight()||this.props.image.height,width:this.props.image.getThumbnailWidth()||this.props.image.width};},_fitDimensions:function(n,o){var p=this._getSizeMultiplier(n,o);return {height:Math.floor(n.height*p),width:Math.floor(n.width*p)};},_getSizeMultiplier:function(n,o){return Math.min(o.width/n.width,o.height/n.height,1);}});f.exports=m;},null);
__d('AdsMediaStandaloneLibraryMetadataImage.react',['cx','fbt','AdsImageLegacy','AdsMediaStandaloneLibraryImageWithDimensions.react','Link.react','React','URI'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=180,l=c('React').createClass({displayName:'AdsMediaStandaloneLibraryMetadataImage',propTypes:{alt:j.string,image:j.instanceOf(c('AdsImageLegacy')).isRequired,imageReady:j.bool.isRequired,onExpandClick:j.func.isRequired},render:function(){var n=this.props.image,o=new (c('URI'))(n.getUrl()).setQueryData({dl:1});return (c('React').createElement('div',{className:"_35qj"},c('React').createElement('div',{className:"_35qk"},c('React').createElement(c('AdsMediaStandaloneLibraryImageWithDimensions.react'),{image:n,imageReady:this.props.imageReady,onExpandClick:this.props.onExpandClick})),c('React').createElement('div',{className:"_35ql"},c('React').createElement(m,{propertyKey:i._("Name:"),propertyValue:n.name}),c('React').createElement(m,{propertyKey:i._("Hash:"),propertyValue:c('React').createElement(c('Link.react'),{href:o},n.getAdAccountHash())}))));}}),m=c('React').createClass({displayName:'AdsMediaStandaloneLibraryMetadataProperty',propTypes:{propertyKey:j.node.isRequired,propertyValue:j.node.isRequired},render:function(){return (c('React').createElement('div',{className:"_35qo"},c('React').createElement('div',{className:"_35qp"},this.props.propertyKey),' ',c('React').createElement('div',{className:"_35qq"},this.props.propertyValue)));}});f.exports=l;},null);
__d('AdsMediaStandaloneLibrarySelectableImage.react',['cx','AdsImageLegacy','AdsMediaStandaloneLibraryImageWithDimensions.react','Link.react','React','emptyFunction','joinClasses'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j={'default':null,disabled:null,selected:"_1byd"},k=c('React').createClass({displayName:'AdsMediaStandaloneLibrarySelectableImage',propTypes:{alt:i.string,decoration:i.oneOf(Object.keys(j)).isRequired,image:i.instanceOf(c('AdsImageLegacy')).isRequired,imageReady:i.bool,onExpandClick:i.func.isRequired,onImageClick:i.func.isRequired},getDefaultProps:function(){return {decoration:'default',onExpandClick:c('emptyFunction'),onImageClick:c('emptyFunction')};},render:function(){return (c('React').createElement('div',{className:"_1bym"},c('React').createElement('div',{className:c('joinClasses')(j[this.props.decoration],this.props.className)},c('React').createElement(c('Link.react'),{className:"_1byn",tabIndex:this.props.onImageClick?null:-1,onClick:this.props.onImageClick},c('React').createElement(c('AdsMediaStandaloneLibraryImageWithDimensions.react'),{image:this.props.image,imageReady:this.props.imageReady,onExpandClick:this.props.onExpandClick,onImageClick:this.props.onImageClick})),this._renderDecorationIcon())));},_renderDecorationIcon:function(){return (c('React').createElement(c('Link.react'),{className:"_1byl"}));}});f.exports=k;},null);
__d('AdsMediaStandaloneLibraryImage.react',['cx','AdsImageLegacy','AdsMediaStandaloneLibraryMetadataImage.react','AdsMediaStandaloneLibrarySelectableImage.react','React','emptyFunction'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'AdsMediaStandaloneLibraryImage',propTypes:{alt:i.string,decoration:i.string.isRequired,image:i.instanceOf(c('AdsImageLegacy')).isRequired,onExpandClick:i.func.isRequired,onImageClick:i.func.isRequired,showImageMetadata:i.bool},getDefaultProps:function(){return {decoration:'default',onExpandClick:c('emptyFunction'),onImageClick:c('emptyFunction'),showImageMetadata:false};},getInitialState:function(){return {imageReady:this.props.image.hasDimensions()};},_onImageDimensionsReady:function(){this.setState({imageReady:true});},componentWillReceiveProps:function(k){if(k.image.equals(this.props.image))return;var l=k.image.hasDimensions();this.setState({imageReady:l});if(!l)k.image.setDimensionsReadyCallback(this._onImageDimensionsReady);},componentWillMount:function(){if(!this.state.imageReady)this.props.image.setDimensionsReadyCallback(this._onImageDimensionsReady);},_renderMetadataImage:function(){return (c('React').createElement(c('AdsMediaStandaloneLibraryMetadataImage.react'),{alt:this.props.alt,image:this.props.image,imageReady:this.state.imageReady,onExpandClick:this.props.onExpandClick}));},_renderSelectableImage:function(){return (c('React').createElement(c('AdsMediaStandaloneLibrarySelectableImage.react'),{alt:this.props.alt,decoration:this.props.decoration,image:this.props.image,imageReady:this.state.imageReady,onExpandClick:this.props.onExpandClick,onImageClick:this.props.onImageClick}));},render:function(){return (c('React').createElement('div',{className:"_3tlt"},this.props.showImageMetadata?this._renderMetadataImage():this._renderSelectableImage()));}});f.exports=j;},null);
__d("DimensionTracker",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(){"use strict";this.$DimensionTracker1=[];this.$DimensionTracker2=0;}h.prototype.setValue=function(i,j){"use strict";this.$DimensionTracker2++;this.$DimensionTracker1.push({index:i,value:j});};h.prototype.getChangesSince=function(i){"use strict";var j=this.$DimensionTracker1.slice(i,this.$DimensionTracker2);return {changes:j,pointer:this.$DimensionTracker2};};f.exports=h;},null);
__d('ImageRowItem.react',['React'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ImageRowItem',propTypes:{footerRow:h.node,height:h.number.isRequired,imageRowItems:h.array,renderImage:h.func,rowGetter:h.func,rowIndex:h.number.isRequired,width:h.number.isRequired},render:function(){var j=this.props.imageRowItems[this.props.rowIndex];if(j){var k=this.props.renderImage,l=j.map(k);return (c('React').createElement('div',{key:'ImageRowItem'+j[0].getAdAccountHash()},l));}else return (c('React').createElement('div',{key:'ImageRowItemFooter'},this.props.footerRow));}});f.exports=i;},null);
__d('InfiniteScroll.react',['cx','Event','React','ReactDOM','Scroll','SubscriptionsHandler','joinClasses'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'InfiniteScroll',propTypes:{distanceToEnd:i.number,onEndReached:i.func},getDefaultProps:function(){return {distanceToEnd:50};},componentDidMount:function(){var k=c('ReactDOM').findDOMNode(this);this.subscriptions=new (c('SubscriptionsHandler'))();this.subscriptions.addSubscriptions(c('Event').listen(k,'scroll',this._checkIfEndReached),c('Event').listen(k,'resize',this._checkIfEndReached));},componentDidUpdate:function(){this._checkIfEndReached();},componentWillUnmount:function(){this.subscriptions.release();delete this.subscriptions;},_checkIfEndReached:function(){if(!this.props.onEndReached)return;var k=c('ReactDOM').findDOMNode(this);if(!k.offsetHeight)return;var l=c('Scroll').getTop(k)+k.offsetHeight;if(l>=k.scrollHeight-this.props.distanceToEnd)this.props.onEndReached();},render:function(){return (c('React').createElement('div',babelHelpers['extends']({},this.props,{className:c('joinClasses')(this.props.className,"_1ph1")}),this.props.children));}});f.exports=j;},null);
/**
 * @providesModule sha256
 * @preserve-header
 *
 * Copyright (c) 2003, Christoph Bichlmeier
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 3. Neither the name of the copyright holder nor the names of contributors
 *    may be used to endorse or promote products derived from this software
 *    without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE AUTHORS ''AS IS'' AND ANY EXPRESS
 * OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHORS OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
 * BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
 * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE
 * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */__d("sha256",["str2rstr"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h=c('str2rstr');function i(ga,ha){return ((ha>>>ga)|(ha<<(32-ga)));}function j(ga,ha,ia){return ((ga&ha)^(~ga&ia));}function k(ga,ha,ia){return ((ga&ha)^(ga&ia)^(ha&ia));}function l(ga){return (i(2,ga)^i(13,ga)^i(22,ga));}function m(ga){return (i(6,ga)^i(11,ga)^i(25,ga));}function n(ga){return (i(7,ga)^i(18,ga)^(ga>>>3));}function o(ga){return (i(17,ga)^i(19,ga)^(ga>>>10));}function p(ga,ha){return (ga[ha&15]+=o(ga[(ha+14)&15])+ga[(ha+9)&15]+n(ga[(ha+1)&15]));}var q=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),r=new Array(8),s=new Array(2),t=new Array(64),u=new Array(16),v="0123456789abcdef";function w(ga,ha){var ia=(ga&65535)+(ha&65535),ja=(ga>>16)+(ha>>16)+(ia>>16);return (ja<<16)|(ia&65535);}function x(){s[0]=s[1]=0;r[0]=1779033703;r[1]=3144134277;r[2]=1013904242;r[3]=2773480762;r[4]=1359893119;r[5]=2600822924;r[6]=528734635;r[7]=1541459225;}function y(){var ga,ha,ia,ja,ka,la,ma,na,oa,pa;ga=r[0];ha=r[1];ia=r[2];ja=r[3];ka=r[4];la=r[5];ma=r[6];na=r[7];for(var qa=0;qa<16;qa++)u[qa]=((t[(qa<<2)+3])|(t[(qa<<2)+2]<<8)|(t[(qa<<2)+1]<<16)|(t[qa<<2]<<24));for(var ra=0;ra<64;ra++){oa=na+m(ka)+j(ka,la,ma)+q[ra];if(ra<16){oa+=u[ra];}else oa+=p(u,ra);pa=l(ga)+k(ga,ha,ia);na=ma;ma=la;la=ka;ka=w(ja,oa);ja=ia;ia=ha;ha=ga;ga=w(oa,pa);}r[0]+=ga;r[1]+=ha;r[2]+=ia;r[3]+=ja;r[4]+=ka;r[5]+=la;r[6]+=ma;r[7]+=na;}function z(ga,ha){var ia,ja,ka=0;ja=((s[0]>>3)&63);var la=(ha&63);if((s[0]+=(ha<<3))<(ha<<3))s[1]++;s[1]+=(ha>>29);for(ia=0;ia+63<ha;ia+=64){for(var ma=ja;ma<64;ma++)t[ma]=ga.charCodeAt(ka++);y();ja=0;}for(var ma=0;ma<la;ma++)t[ma]=ga.charCodeAt(ka++);}function aa(){var ga=((s[0]>>3)&63);t[ga++]=128;if(ga<=56){for(var ha=ga;ha<56;ha++)t[ha]=0;}else{for(var ha=ga;ha<64;ha++)t[ha]=0;y();for(var ha=0;ha<56;ha++)t[ha]=0;}t[56]=(s[1]>>>24)&255;t[57]=(s[1]>>>16)&255;t[58]=(s[1]>>>8)&255;t[59]=s[1]&255;t[60]=(s[0]>>>24)&255;t[61]=(s[0]>>>16)&255;t[62]=(s[0]>>>8)&255;t[63]=s[0]&255;y();}function ba(){var ga=0,ha=new Array(32);for(var ia=0;ia<8;ia++){ha[ga++]=((r[ia]>>>24)&255);ha[ga++]=((r[ia]>>>16)&255);ha[ga++]=((r[ia]>>>8)&255);ha[ga++]=(r[ia]&255);}return ha;}function ca(){var ga=new String();for(var ha=0;ha<8;ha++)for(var ia=28;ia>=0;ia-=4)ga+=v.charAt((r[ha]>>>ia)&15);return ga;}function da(ga){var ha=0;for(var ia=0;ia<8;ia++)for(var ja=28;ja>=0;ja-=4)ga[ha++]=v.charCodeAt((r[ia]>>>ja)&15);}function ea(ga,ha){x();z(ga,ga.length);aa();if(ha){da(ha);}else return ca();}function fa(ga,ha,ia){if(ga===null||ga===undefined)return null;ha=(typeof ha=='undefined')?true:ha;if(ha)ga=h(ga);return ea(ga,ia);}f.exports=fa;},null);
__d("PhotoArrange",["Map","sha256"],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=.5,i=.5,j={height:-1,isOptimal:false,isValid:false};function k(){"use strict";this.$PhotoArrange1=new (c("Map"))();this.$PhotoArrange2=new (c("Map"))();}k.prototype.solve=function(m,n){"use strict";var o=n.map(function(s){return s.height/s.width;}),p=this.$PhotoArrange3(m,n);if(this.$PhotoArrange1.has(p))return this.$PhotoArrange1.get(p);var q;try{q=this.$PhotoArrange4(m,n,o);}catch(r){q=this.$PhotoArrange5(m,n,o);}this.$PhotoArrange1.set(p,q);return q;};k.prototype.$PhotoArrange3=function(m,n){"use strict";var o=[String(m.containerWidth),String(m.marginPerImage),String(m.maxImageHeight),String(m.minImageHeight),String(m.minImageWidth)].concat(n.map(function(p){return ([String(p.width),String(p.height)].join(","));})).join(",");return c("sha256")(o);};k.prototype.$PhotoArrange5=function(m,n,o){"use strict";var p=(m.maxImageHeight+m.minImageHeight)/2;return n.map(function(q,r){var s=p/o[r];return {height:p,width:s};});};k.prototype.$PhotoArrange4=function(m,n,o){"use strict";if(!n.length)return [];var p=j,q=0,r=j,s=0,t=n.length,u=m.maxImageHeight,v=m.minImageWidth,w=m.containerWidth,x=u/o[0],y=0;while(y<t-1){var z=Math.max(v,u/o[y+1]);if(x+z>w){break;}else{x+=z+m.marginPerImage;y++;}}var aa=[],ba=[],ca;for(;y<t;y++){q=y+1;aa=n.slice(0,q);ba=o.slice(0,q);ca=this.$PhotoArrange3(m,aa);if(this.$PhotoArrange2.has(ca)){p=this.$PhotoArrange2.get(ca);}else{p=new l(m,ba.slice(0,q)).solve();this.$PhotoArrange2.set(ca,p);}if(p.isValid&&p.isOptimal){break;}else if(p.isValid){r=p;s=q;}else{p=r;q=s;break;}}if(p.isValid){var da=p.height,ea=n.slice(0,q);ea=ea.map(function(fa,ga){return {width:da/o[ga],height:da};});return ea.concat(this.$PhotoArrange4(m,n.slice(q),o.slice(q)));}else throw "There is no valid solution to arrange these photos\n        under the specified constraints";};function l(m,n){var o=m.containerWidth,p=m.marginPerImage,q=m.maxImageHeight,r=m.minImageHeight,s=m.minImageWidth;"use strict";this.$ImagesBSSolver1=o;this.$ImagesBSSolver2=n;this.$ImagesBSSolver3=p;this.$ImagesBSSolver4=q;this.$ImagesBSSolver5=r;this.$ImagesBSSolver6=s;}l.prototype.solve=function(){"use strict";var m=this.$ImagesBSSolver5,n=this.$ImagesBSSolver4,o=(n+m)/2,p=this.$ImagesBSSolver7(m),q=this.$ImagesBSSolver7(o),r=this.$ImagesBSSolver7(n);if(!p.isValid){return j;}else if(r.isValid){return {height:n,isOptimal:r.isOptimal,isValid:r.isValid};}else{while(!q.isValid||n-m>h){if(!q.isValid){n=o;}else m=o;o=(n+m)/2;q=this.$ImagesBSSolver7(o);}return {height:o,isOptimal:q.isOptimal,isValid:q.isValid};}};l.prototype.$ImagesBSSolver7=function(m){"use strict";var n=this.$ImagesBSSolver2.reduce(function(q,r){var s=Math.max(this.$ImagesBSSolver6,m/r);return q+s+this.$ImagesBSSolver3;}.bind(this),-this.$ImagesBSSolver3),o=n<this.$ImagesBSSolver1,p=o&&n+i>this.$ImagesBSSolver1;return {isOptimal:p,isValid:o};};f.exports=new k();},null);
__d('AdsMediaLibrary.react',['cx','invariant','AdsCreationExperimentStore_DEPRECATED','AdsImageLegacy','AdsImageValidation','AdsMediaLibraryExpandedAsset.react','AdsMediaPanelImageBoxContainer.react','AdsMediaStandaloneLibraryImage.react','ImageRowItem.react','InfiniteScroll.react','PhotoArrange','React','ReactDOM','DimensionTracker','Scroll','SimpleList.react','XUISpinner.react','adsGKCheck','emptyFunction','joinClasses','setImmediate'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=false,l={height:100,width:100},m=60,n=290,o=90,p=210,q=14,r=48,s=550,t=60,u=50,v=0,w=12,x=49,y=c('React').createClass({displayName:'AdsMediaLibrary',propTypes:{buyingTypes:j.arrayOf(j.string),disableTooSmallImages:j.bool,height:j.number.isRequired,imageList:j.arrayOf(j.instanceOf(c('AdsImageLegacy'))).isRequired,imageSpec:j.shape({minWarningWidth:j.number.isRequired,minWarningHeight:j.number.isRequired}),isClickEnabled:j.bool.isRequired,isLoadingInitial:j.bool,igSpecificImageSpec:j.object,onEndReached:j.func,onImageClick:j.func.isRequired,onImageDoubleClick:j.func,photoArrangeConstraints:j.shape({containerPadding:j.number.isRequired,maxImageHeight:j.number.isRequired,minImageHeight:j.number.isRequired,minImageWidth:j.number.isRequired,marginPerImage:j.number.isRequired}).isRequired,photoArrangeEnabled:j.bool,selectedImageList:j.array.isRequired,scrollingAreaFooter:j.object,showStandaloneImageMetadata:j.bool,standalone:j.bool,topBarHeight:j.number},getDefaultProps:function(){return {disableTooSmallImages:false,onImageClick:c('emptyFunction'),photoArrangeConstraints:{containerPadding:m,maxImageHeight:t,minImageHeight:u,minImageWidth:v,marginPerImage:w},selectedImageList:[],showStandaloneImageMetadata:false,standalone:false};},getInitialState:function(){return {containerWidth:0,expandedImage:null};},componentDidMount:function(){c('setImmediate')(this.measureContainerWidth);},componentWillReceiveProps:function(){this.measureContainerWidth();},render:function(){var z=c('joinClasses')(this.props.className,"_3suv"),aa=this.props.children;if(aa)aa=c('React').createElement('div',{className:"_13u2 clearfix"},aa);var ba,ca=this.props.photoArrangeConstraints;if(this.state.containerWidth&&this.props.photoArrangeEnabled){var da=Math.max(0,this.state.containerWidth-ca.containerPadding),ea=this.props.imageList.map(function(la){return babelHelpers['extends']({},la,{width:la.width||l.width,height:la.height||l.height});}),fa=c('PhotoArrange').solve(babelHelpers['extends']({},ca,{containerWidth:da}),ea);ba=this.props.imageList.map(function(la,ma){la.calculatedWidth=fa[ma].width;la.calculatedHeight=fa[ma].height;return la;});}else ba=this.props.imageList;if(this.props.standalone){var ga=null;if(da){var ha=this._imagesToRows(ba,da,ca.marginPerImage,ca.minImageWidth),ia=new (c('DimensionTracker'))();ha.forEach(function(la,ma){var na=la[0],oa=this.props.showStandaloneImageMetadata?o:q,pa=na.calculatedHeight+oa;ia.setValue(ma,pa);}.bind(this));ia.setValue(ha.length,x);var ja=this.props.showStandaloneImageMetadata?n:p,ka=this.state.containerWidth-r;ga=c('React').createElement(c('SimpleList.react'),{height:this.props.height,item:c('React').createElement(c('ImageRowItem.react'),{footerRow:this.props.scrollingAreaFooter,imageRowItems:ha,renderImage:this._renderStandaloneLibraryImage}),rowCount:ha.length+1,rowHeight:ja,rowHeightTracker:ia,width:ka});}return (c('React').createElement('div',{className:z,ref:'AdsMediaLibraryRoot'},c('React').createElement('div',{className:"_13t_",ref:'imagesContainer'},ga),this._renderExpandedView(),this._renderOverlay()));}else return (c('React').createElement('div',{className:z,ref:'AdsMediaLibraryRoot'},c('React').createElement(c('InfiniteScroll.react'),{className:"_13u1",style:{height:this.props.height},onEndReached:this.props.onEndReached},aa,c('React').createElement('div',{className:"_13t_",ref:'imagesContainer'},ba.map(this._renderImage)),this.props.scrollingAreaFooter),this._renderOverlay()));},componentWillMount:function(){if(c('adsGKCheck')('ads_image_picker_redesign')){var z=c('AdsCreationExperimentStore_DEPRECATED').getExperiment('ads_image_picker_redesign_experiment');z.logExposure();k=z.getParam('has_redesign')==='1';}},measureContainerWidth:function(){var z=this.refs.imagesContainer;if(z){var aa=c('ReactDOM').findDOMNode(z),ba=aa.offsetWidth;this.setState({containerWidth:ba});}},_imagesToRows:function(z,aa,ba,ca){if(!z.length)return [];var da=[[]],ea=0,fa=0;z.forEach(function(ga,ha){var ia=Math.max(ca,ga.calculatedWidth);if(fa+ia>aa){da.push([]);fa=0;ea++;}da[ea].push(ga);fa+=ia+ba;});return da;},_renderOverlay:function(){if(!this.props.isLoadingInitial)return null;return (c('React').createElement('div',{className:"_13u3"},c('React').createElement(c('XUISpinner.react'),{background:'light',className:"_13t-",size:'large'})));},_renderExpandedView:function(){if(!this.state.expandedImage)return null;var z=this.state.expandedImage,aa=Math.min(z.height,s),ba=aa*z.width/z.height;return (c('React').createElement(c('AdsMediaLibraryExpandedAsset.react'),{height:aa,key:'expanded_view',source:z.getUrl(),topBarHeight:this.props.topBarHeight,width:ba,onClickClose:this._onExpandClickClose}));},_onExpandClick:function(z){this.setState({expandedImage:z});},_onExpandClickClose:function(){this.setState({expandedImage:null});},_isImageSelected:function(z){return this.props.selectedImageList.some(function(aa){return aa.getUniqueIdentifier()==z;});},_getImageDecoration:function(z){if(this._isImageSelected(z.getUniqueIdentifier())){return 'selected';}else if(!this.props.isClickEnabled)return 'disabled';return 'default';},_renderStandaloneLibraryImage:function(z){return (c('React').createElement(c('AdsMediaStandaloneLibraryImage.react'),{decoration:this._getImageDecoration(z),image:z,imageSpec:this.props.imageSpec,key:z.getUniqueIdentifier(),ref:z.getUniqueIdentifier(),showImageMetadata:this.props.showStandaloneImageMetadata,onExpandClick:this._onExpandClick,onImageClick:function(event){return this.props.onImageClick(z,event.shiftKey);}.bind(this)}));},_renderImage:function(z){var aa=false;if(this.props.imageSpec){aa=!c('AdsImageValidation').isWarningSize(z,this.props.imageSpec);if(this.props.igSpecificImageSpec)aa=aa||!c('AdsImageValidation').isWarningSize(z,this.props.igSpecificImageSpec);}return (c('React').createElement(c('AdsMediaPanelImageBoxContainer.react'),{buyingTypes:this.props.buyingTypes,className:(!k?"_13u0":'')+(k?' '+"_3ubt":''),decoration:this._getImageDecoration(z),igSpecificImageSpec:this.props.igSpecificImageSpec,image:z,imageSpec:this.props.imageSpec,isTooSmall:this.props.disableTooSmallImages&&aa,key:z.getUniqueIdentifier(),ref:z.getUniqueIdentifier(),onImageClick:function(event){this.props.onImageClick&&this.props.onImageClick(z);}.bind(this),onImageDoubleClick:function(event){this.props.onImageDoubleClick&&this.props.onImageDoubleClick(z);}.bind(this)}));},scrollToImage:function(z){var aa=z.getUniqueIdentifier();!(aa in this.refs)?i(0):void 0;var ba=c('ReactDOM').findDOMNode(this.refs[aa]),ca=c('ReactDOM').findDOMNode(this),da=ba.offsetTop;if(ca!=ba.offsetParent)da-=ca.offsetTop;c('Scroll').setTop(ca,da);}});f.exports=y;},null);
__d('AdsMediaPanelInfiniteScrollFooter.react',['cx','fbt','React','ReactComponentWithPureRenderMixin','XUISpinner.react'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'AdsMediaPanelInfiniteScrollFooter',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{fetchingNextPage:j.bool.isRequired,imagesLoaded:j.bool.isRequired,onEndReached:j.func},componentDidMount:function(){if(this.props.onEndReached)this.props.onEndReached();},render:function(){if(!this.props.imagesLoaded)return null;if(this.props.fetchingNextPage)return (c('React').createElement('div',{className:"_4bnz"},c('React').createElement(c('XUISpinner.react'),{background:'light',size:'large'})));return (c('React').createElement('div',{className:"_4bn-"},c('React').createElement('div',{className:"_4bn_"},c('React').createElement('div',{className:"_4bo2"},i._("No more images found")))));}});f.exports=k;},null);
__d('AdsMediaPanelMessage.react',['cx','Image.react','React','joinClasses'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'AdsMediaPanelMessage',propTypes:{icon:i.object.isRequired,subtitle:i.string,title:i.string.isRequired},render:function(){var k=c('joinClasses')("_3suv",this.props.className);return (c('React').createElement('div',{className:k,style:this.props.style},c('React').createElement('div',{className:"_5y4t"},c('React').createElement(c('Image.react'),{src:this.props.icon}),c('React').createElement('div',{className:"_5y4u"},c('React').createElement('div',null,this.props.title),c('React').createElement('div',null,this.props.subtitle)))));}});f.exports=j;},null);
__d('AdsShutterstockSearchBar.react',['cx','ix','fbt','Image.react','React','XUITextInput.react','emptyFunction'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=c('React').createClass({displayName:'AdsShutterstockSearchBar',propTypes:{searchText:k.string,onTriggerSearch:k.func,onTextChange:k.func},getDefaultProps:function(){return {onTriggerSearch:c('emptyFunction'),onTextChange:c('emptyFunction')};},render:function(){return (c('React').createElement('div',{className:"_134r"},c('React').createElement('div',{className:"_134s"},c('React').createElement(c('Image.react'),{className:"_134t",src:i('/images/ads/createflow/stock_images/icon_search.png')}),c('React').createElement('div',{className:"_134u"},j._("Powered by {partner-company-name}",[j.param('partner-company-name','Shutterstock')])),c('React').createElement(c('XUITextInput.react'),{className:"_134v",defaultValue:this.props.searchText,height:'tall',placeholder:j._("Search Free Stock Images"),onChange:this._onChange,onEnter:this._onTriggerSearch}))));},_onTriggerSearch:function(){this.props.onTriggerSearch();},_onChange:function(event){this.props.onTextChange(event.target.value);}});f.exports=l;},null);
__d('AdsShutterstockUseGuidelines.react',['cx','fbt','AdsActionTypes','AdsDispatcher','ContextualDialog.react','LayerFadeOnHide','Link.react','React','ReactLayeredComponentMixin','debounce','joinClasses'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=250,l=320,m=c('React').createClass({displayName:'AdsShutterstockUseGuidelines',mixins:[c('ReactLayeredComponentMixin')],propTypes:{dialogPosition:j.string},getDefaultProps:function(){return {dialogPosition:'right'};},getInitialState:function(){return {dialogShown:false};},_cancelScheduledHides:function(){this._scheduleHide.reset();},_hideDialog:function(){this._cancelScheduledHides();this.setState({dialogShown:false});},_toggleDialog:function(){this._cancelScheduledHides();var n=!this.state.dialogShown;this.setState({dialogShown:n});if(n)c('AdsDispatcher').handleUpdateFromViewAction({type:c('AdsActionTypes').SHUTTERSTOCK.GUIDELINES_SHOW});},componentWillMount:function(){this._scheduleHide=c('debounce')(this._hideDialog,k);},componentWillUnmount:function(){this._cancelScheduledHides();this._scheduleHide=null;},render:function(){var n=c('joinClasses')("_54kg",this.props.className);return (c('React').createElement(c('Link.react'),{className:n,ref:'link',onClick:this._toggleDialog,onMouseEnter:this._cancelScheduledHides,onMouseLeave:this._scheduleHide},i._("Some stock images may not comply with Facebook policies. Read our Advertising Policies before selecting an image.")));},getLegalLanguage:function(){return i._("Shutterstock images are available at no additional cost for use in your Facebook ads, with the following guidelines: {list of legal guidelines}",[i.param('list of legal guidelines',c('React').createElement('ul',{className:"_3-9n"},c('React').createElement('li',null,i._("You can't use the image as a trademark for a business.")),c('React').createElement('li',null,i._("You may not portray a person in a way that may be offensive, including: a) in ads for dating services; b) in connection with political endorsements; c) with defamatory, unlawful, offensive or immoral content; and d) as suffering from, or being treated for, a physical or mental ailment.")),c('React').createElement('li',null,i._("You may only use the image in ads and content on Facebook, and not with other websites or advertising services."))))]);},renderLayers:function(){return {dialog:c('React').createElement(c('ContextualDialog.react'),{behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},contextRef:function(){return this.refs.link;}.bind(this),position:this.props.dialogPosition,shown:this.state.dialogShown,width:l},c('React').createElement('div',{className:"_54kh",onMouseEnter:this._cancelScheduledHides,onMouseLeave:this._scheduleHide},c('React').createElement('h2',{className:"_54ki"},i._("Stock Image Use Guidelines")),this.getLegalLanguage()))};}});f.exports=m;},null);
__d('AdsCFShutterstockLibrary.react',['cx','fbt','ix','AdsCFActionTypes','AdsCFImageViewActions','AdsDispatcher','AdsImageCollectionViews','AdsImageLibraryUtils','AdsMediaLibrary.react','AdsMediaPanelInfiniteScrollFooter.react','AdsMediaPanelMessage.react','AdsShutterstockSearchBar.react','AdsShutterstockUseGuidelines.react','React','ShutterstockApiStatus','debounce','keyMirror'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=c('AdsImageCollectionViews').views.STOCK,m=c('keyMirror')({NONE:null,INITIAL:null,MORE:null}),n=c('keyMirror')({NEW:null,SUBSEQUENT:null}),o=c('React').createClass({displayName:'AdsCFShutterstockLibrary',propTypes:{defaultSearchText:k.string,imageCollection:k.object.isRequired,imageContainerHeight:k.number.isRequired,isClickEnabled:k.bool.isRequired,onImageClick:k.func,searchText:k.string,selectedImageList:k.array.isRequired},getInitialState:function(){return {loadState:m.NONE,searchTextForAPI:this._getSearchText(this.props)};},componentDidMount:function(){this._debouncedNewSearch=c('debounce')(this._newSearch,200,this);if(this.state.searchTextForAPI&&this.props.imageCollection.getImageCount(l)===0)this._newSearch(this.props.searchText);},_getSearchText:function(p){return p.searchText||p.defaultSearchText||'';},render:function(){if(!c('ShutterstockApiStatus').available)return (c('React').createElement(c('AdsMediaPanelMessage.react'),{className:this.props.className,icon:j('/images/ads/createflow/stock_images/icon_stock_no_results.png'),style:{height:String(this.props.imageContainerHeight)+'px'},subtitle:i._("Please try again later."),title:i._("Sorry, stock images aren't available right now.")}));return (c('React').createElement('div',{className:this.props.className},c('React').createElement(c('AdsShutterstockSearchBar.react'),{defaultSearchText:this.props.defaultSearchText,searchText:this.props.searchText,onTextChange:this._onSearchTextChange,onTriggerSearch:this._onTriggerSearch}),this._renderContent()));},_renderContent:function(){var p=this.props.imageCollection,q=p.getImageCount(l);if(q>0||this.state.loadState!==m.NONE){var r=this.state.loadState===m.INITIAL;return (c('React').createElement(c('AdsMediaLibrary.react'),{height:this.props.imageContainerHeight,imageList:p.getImages(l),isClickEnabled:this.props.isClickEnabled,isLoadingInitial:r,scrollingAreaFooter:this._renderScrollingAreaFooter(),selectedImageList:this.props.selectedImageList,onEndReached:this._getOnEndReached(),onImageClick:this.props.onImageClick},c('React').createElement(c('AdsShutterstockUseGuidelines.react'),{className:"_3cl1",dialogPosition:'left'})));}var s=void 0,t=void 0,u=void 0;if(this.props.searchText||this.props.defaultSearchText){s=j('/images/ads/createflow/stock_images/icon_stock_no_results.png');t=i._("There aren't any images that match what you searched.");u=i._("Try using other keywords.");}else{s=j('/images/ads/createflow/stock_images/icon_library_no_images.png');t=i._("Search for professional images to use in your ads.");u=i._("Any images you select will be saved in your image library.");}return (c('React').createElement(c('AdsMediaPanelMessage.react'),{icon:s,style:{height:String(this.props.imageContainerHeight)+'px'},subtitle:u,title:t}));},_shouldEnableInfiniteScroll:function(){return (this.state.loadState===m.NONE&&!!this._fetchNextPage);},_getOnEndReached:function(){return this._shouldEnableInfiniteScroll()?this._searchMore:null;},_renderScrollingAreaFooter:function(){return (c('React').createElement(c('AdsMediaPanelInfiniteScrollFooter.react'),{fetchingNextPage:!!this._fetchNextPage,imagesLoaded:this.state.loadState!==m.INITIAL}));},_onTriggerSearch:function(){this._debouncedNewSearch.reset();this._newSearch(this.props.searchText);},_newSearch:function(p){var q=this.state.searchTextForAPI;if(!q){this.setState({loadState:m.NONE});return;}this.setState({loadState:m.INITIAL});c('AdsImageLibraryUtils').searchStockImages(this._onSearchResults.bind(null,q,n.NEW),{q:q});c('AdsCFImageViewActions').changeStockSearchText(p);},_searchMore:function(){if(!this._fetchNextPage)return;this.setState({loadState:m.MORE});this._fetchNextPage(function(p,q){this._onSearchResults(this.state.searchTextForAPI,n.SUBSEQUENT,c('AdsImageLibraryUtils').convertStockImages(p),q);}.bind(this));},_onSearchResults:function(p,q,r,s){if(!this.isMounted())return;if(p!==this.state.searchTextForAPI)return;this._fetchNextPage=s;var t=this.props.imageCollection;if(q===n.NEW)t.clearImagesByViewBitmask(l);var u=t.getImageCount(l);t.addImagesToBack_UNSAFE(r,l);this.setState({loadState:m.NONE});c('AdsDispatcher').handleUpdateFromViewAction({data:{offset:u,query:p},type:c('AdsCFActionTypes').STOCK_IMAGE_SEARCH});},_onSearchTextChange:function(p){var q=this._getSearchText(babelHelpers['extends']({},this.props,{searchText:p}));this._fetchNextPage=null;this.setState({searchTextForAPI:q});this._debouncedNewSearch(p);}});f.exports=o;},null);
__d('AdsPageInstagramAccountActions',['AdsDispatcher','AdsInstagramAccountActionTypes','Map'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={accountsBatchLoaded:function(i){c('AdsDispatcher').handleUpdateFromServerResponse({specs:i,type:c('AdsInstagramAccountActionTypes').PAGE.BATCH_LOADED});},accountsBatchLoadError:function(i){c('AdsDispatcher').handleUpdateFromServerResponse({errors:i,type:c('AdsInstagramAccountActionTypes').PAGE.BATCH_LOAD_ERROR});},clearAccounts:function(i){c('AdsDispatcher').handleUpdateFromServerResponse({data:{pageID:i},type:c('AdsInstagramAccountActionTypes').PAGE.CLEAR_ACCOUNTS});},createAndUsePageBackedAccount:function(i,j,k,l,m,n){c('AdsDispatcher').handleUpdateFromServerResponse({data:{accessToken:l,campaignID:i,adgroupIDs:j,pageID:k,instagramAccountIDCallback:n},source:m,type:c('AdsInstagramAccountActionTypes').PAGE.CREATE_AND_USE_PAGE_BACKED});},handlePageBackedAccountCreateSuccess:function(i,j,k,l,m,n){c('AdsDispatcher').handleUpdateFromServerResponse({data:{campaignID:i,adgroupIDs:j,pageID:k,instagramAccountID:l,instagramAccountIDCallback:n},source:m,type:c('AdsInstagramAccountActionTypes').PAGE.CREATE_PAGE_BACKED_SUCCESS});},handlePageBackedAccountCreateError:function(i){c('AdsDispatcher').handleUpdateFromServerResponse({data:{pageID:i},type:c('AdsInstagramAccountActionTypes').PAGE.CREATE_PAGE_BACKED_ERROR});},linkInstagramAccount:function(i,j,k){c('AdsDispatcher').handleUpdateFromViewAction({data:{pageID:i,password:j,username:k},type:c('AdsInstagramAccountActionTypes').PAGE.LINK_ACCOUNT});},unlinkInstagramAccount:function(i,j){c('AdsDispatcher').handleUpdateFromViewAction({data:{pageID:i,instagramAccountID:j},type:c('AdsInstagramAccountActionTypes').PAGE.UNLINK_ACCOUNT});},handleLinkInstagramAccountResponse:function(i,j,k,l){c('AdsDispatcher').handleUpdateFromServerResponse({data:{pageID:i,instagramAccountID:j,errorMessages:k,errorCode:l},type:c('AdsInstagramAccountActionTypes').PAGE.HANDLE_LINK_ACCOUNT_RESPONSE});},handleLinkInstagramAccountError:function(i){c('AdsDispatcher').handleUpdateFromServerResponse({data:{pageID:i},type:c('AdsInstagramAccountActionTypes').PAGE.HANDLE_LINK_ACCOUNT_ERROR});},handleUnlinkInstagramAccountResponse:function(i,j,k){c('AdsDispatcher').handleUpdateFromServerResponse({data:{pageID:i,error:j,success:k},type:c('AdsInstagramAccountActionTypes').PAGE.HANDLE_UNLINK_ACCOUNT_RESPONSE});},handleUnlinkInstagramAccountError:function(i){c('AdsDispatcher').handleUpdateFromServerResponse({data:{pageID:i},type:c('AdsInstagramAccountActionTypes').PAGE.HANDLE_UNLINK_ACCOUNT_ERROR});}};f.exports=h;},null);
__d('AdsMediaPanelPageLinkInstagramAccountUnit.react',['cx','fbt','ix','ActionList.react','AdsImageLegacy','AdsLoadState','AdsMediaLibrary.react','AdsPageInstagramAccountActions','CenteredContainer.react','Grid.react','Image.react','Link.react','React','ScrollableArea.react','XPagesManagerSettingsController','XUIButton.react','XUINotice.react','XUINoticeGroup.react','XUISpinner.react','XUIText.react','XUITextInput.react'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=c('Grid.react').GridItem,l=c('React').PropTypes,m=30,n=32,o=36,p='https://instagram.com/accounts/password/reset/',q='https://www.facebook.com/business/help/898752960195806',r=c('React').createClass({displayName:'AdsMediaPanelPageLinkInstagramAccountUnit',propTypes:{imageList:l.arrayOf(l.instanceOf(c('AdsImageLegacy'))).isRequired,instagramAccount:l.shape({id:l.string.isRequired,is_published:l.bool.isRequired,profile_pic:l.string.isRequired,username:l.string.isRequired}),instagramAccountLoadState:l.oneOf(Object.keys(c('AdsLoadState'))).isRequired,isClickEnabled:l.bool.isRequired,pageID:l.string.isRequired,pageLinkOrUnlinkAccountError:l.arrayOf(l.string).isRequired},getDefaultProps:function(){return {imageList:[],instagramAccount:null,instagramAccountLoadState:c('AdsLoadState').NOT_LOADED,pageLinkOrUnlinkAccountError:[]};},getInitialState:function(){return {password:'',username:''};},render:function(){if(this.props.instagramAccount&&this.props.instagramAccount.is_published){return this._getAccountLinkedDialog();}else if(this.props.instagramAccountLoadState===c('AdsLoadState').LOADING){return this._getUnlinkedLoadingDialog();}else return this._getUnlinkedLoadedDialog();},_getUnlinkedLoadingDialog:function(){return (c('React').createElement(c('ScrollableArea.react'),{height:this.props.totalHeight},this._getErrorNotice(),c('React').createElement(c('CenteredContainer.react'),{fullHeight:true,horizontal:true,vertical:true},this._getLinkHeader(),c('React').createElement(c('CenteredContainer.react'),{className:"_hrr",horizontal:true,vertical:true},c('React').createElement(c('XUISpinner.react'),{size:'large'})))));},_getUnlinkedLoadedDialog:function(){return (c('React').createElement(c('ScrollableArea.react'),{height:this.props.totalHeight},this._getErrorNotice(),c('React').createElement(c('CenteredContainer.react'),{fullHeight:true,horizontal:true,vertical:true},this._getLinkHeader(),this._getLinkForm())));},_getAccountLinkedDialog:function(){var s=this._getErrorNotice()?this.props.totalHeight-n-o:this.props.totalHeight-n,t=this.props.instagramAccountLoadState===c('AdsLoadState').LOADING?c('React').createElement(c('XUISpinner.react'),{size:'large'}):this._getAccountInfo();return (c('React').createElement('div',{style:{height:this.props.totalHeight}},this._getErrorNotice(),c('React').createElement(c('AdsMediaLibrary.react'),babelHelpers['extends']({},this.props,{height:s})),c('React').createElement('div',{className:"_hrs"},t)));},_getLinkHeader:function(){var s=i._("Connect an Instagram Account"),t=null;if(this.props.instagramAccount){t=i._("Log into Instagram to select images for your Facebook ads. The Instagram account you add will represent your business in your Instagram ads. You can only connect one Instagram account to your Page.");}else t=c('React').createElement('div',null,i._("Log into an Instagram account to select Instagram images to use in your Facebook ads."),' ',c('React').createElement(c('Link.react'),{href:q,target:'_blank'},i._("Learn more")),'.');return (c('React').createElement(c('CenteredContainer.react'),{className:"_2pie",horizontal:true},c('React').createElement(c('Image.react'),{src:j('images/ads/growth/instagram-sign-in.png')}),c('React').createElement('div',{className:"_hru"},s),c('React').createElement('div',{className:"_hrx"},t)));},_getLinkForm:function(){return (c('React').createElement(c('Grid.react'),{className:"_3-8k",cols:2,spacing:"prl pts"},c('React').createElement(k,null,c('React').createElement(c('XUITextInput.react'),{className:"_hry",height:'tall',maxLength:m,placeholder:i._("Username"),value:this.state.username,onChange:this._setUsername})),c('React').createElement(k,null,c('React').createElement(c('XUITextInput.react'),{className:"_hry",height:'tall',placeholder:i._("Password"),type:'password',value:this.state.password,onChange:this._setPassword})),c('React').createElement(k,null,c('React').createElement(c('XUIText.react'),{className:"lfloat"},c('React').createElement(c('Link.react'),{href:p,target:'_blank'},i._("Forgot password?")))),c('React').createElement(k,null,c('React').createElement(c('XUIButton.react'),{className:"rfloat",disabled:this.state.username===''||this.state.password==='',label:i._("Connect"),use:'confirm',onClick:this._onLinkSubmit}))));},_getAccountInfo:function(){var s=this.props.instagramAccount?this.props.instagramAccount.username:'',t=c('XPagesManagerSettingsController').getURIBuilder().setString('page_token',this.props.pageID).setString('tab','instagram_ads').getURI();return (c('React').createElement(c('ActionList.react'),{className:"rfloat"},c('React').createElement(c('XUIText.react'),{className:"_hr-"},'@'+s),c('React').createElement(c('XUIText.react'),{className:"_1fui"},c('React').createElement(c('Link.react'),{href:t,target:'_blank'},i._("Edit")))));},_getErrorNotice:function(){if(this.props.pageLinkOrUnlinkAccountError.length===0)return null;return (c('React').createElement(c('XUINoticeGroup.react'),null,this.props.pageLinkOrUnlinkAccountError.map(function(s,t){return (c('React').createElement(c('XUINotice.react'),{key:t,use:'warn'},s));})));},_setPassword:function(event){this.setState({password:event.target.value});},_setUsername:function(event){this.setState({username:event.target.value});},_onLinkSubmit:function(){c('AdsPageInstagramAccountActions').linkInstagramAccount(this.props.pageID,this.state.password,this.state.username);},_onUnlinkSubmit:function(){c('AdsPageInstagramAccountActions').unlinkInstagramAccount(this.props.pageID,this.props.instagramAccount?this.props.instagramAccount.id:'');}});f.exports=r;},null);
__d('AdsMediaPanelTabs',['keyMirror'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('keyMirror')({UPLOAD:null,LIBRARY:null,STOCK:null});f.exports=h;},null);
__d('AdsMediaPanelViewFilterBar.react',['cx','fbt','AdsImageCollectionViews','Link.react','React','ReactLayeredComponentMixin','SimpleNUXMessage','SimpleNUXMessageTypes','XUIAmbientNUX.react'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'AdsMediaPanelViewFilterBar',propTypes:{availableViewFilters:j.array.isRequired,instagramAccountLinked:j.bool.isRequired,viewFilter:j.object.isRequired,onViewFilterChoose:j.func},render:function(){if(this.props.availableViewFilters.length===0)return c('React').createElement('div',{className:"_5y6l"});return (c('React').createElement('div',{className:"_5y6m"},this.props.availableViewFilters.map(this._renderLink)));},_renderLink:function(n){if(n.view===c('AdsImageCollectionViews').views.INSTAGRAM&&!this.props.instagramAccountLinked){return (c('React').createElement(m,{key:n.view||'ALL',selectedFilter:this.props.viewFilter,showImageCount:false,viewFilter:n,onViewFilterChoose:this.props.onViewFilterChoose}));}else return (c('React').createElement(l,{key:n.view||'ALL',selectedFilter:this.props.viewFilter,showImageCount:true,viewFilter:n,onViewFilterChoose:this.props.onViewFilterChoose}));}}),l=c('React').createClass({displayName:'LinkItem',render:function(){var n=this.props.showImageCount?c('React').createElement('span',{className:"_5y6p"},this.props.viewFilter.count):null;return (c('React').createElement(c('Link.react'),{className:"_5y6n"+(this.props.viewFilter.view===this.props.selectedFilter.view?' '+"_5y6o":''),onClick:this._onViewLinkClick},c('React').createElement('span',null,c('React').createElement('span',null,this.props.viewFilter.text),n)));},_onViewLinkClick:function(){this.props.onViewFilterChoose&&this.props.onViewFilterChoose(this.props.viewFilter);}}),m=c('React').createClass({displayName:'LinkItemWithNux',mixins:[c('ReactLayeredComponentMixin')],getInitialState:function(){return {nuxShown:!c('SimpleNUXMessage').hasUserSeenMessage(c('SimpleNUXMessageTypes').BOOSTED_COMPONENT_INSTAGRAM_LIBRARY)};},renderLayers:function(){return {nux_above:c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:this._getInstagramViewFilterRef,position:'above',shown:this.state.nuxShown,onCloseButtonClick:this._onNUXCloseButtonClick},i._("Connect an Instagram account to use its photos in your ads."))};},render:function(){return (c('React').createElement(l,babelHelpers['extends']({},this.props,{ref:'instagram_view_filter'})));},_getInstagramViewFilterRef:function(){return this.refs.instagram_view_filter;},_onNUXCloseButtonClick:function(){c('SimpleNUXMessage').markMessageSeenByUser(c('SimpleNUXMessageTypes').BOOSTED_COMPONENT_INSTAGRAM_LIBRARY);this.setState({nuxShown:false});}});f.exports=k;},null);
__d('AdsMediaPanelViewFilters',['fbt','AdsImageCollectionViews'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=[{view:c('AdsImageCollectionViews').views.LIBRARY,text:h._("Ad Images")},{view:c('AdsImageCollectionViews').views.INSTAGRAM,text:h._("Instagram Images")},{view:c('AdsImageCollectionViews').views.PAGE,text:h._("Page Images")},{view:c('AdsImageCollectionViews').views.SCRAPED,text:h._("Website Images")}],j=0;i.forEach(function(m){j|=m.view;});var k={view:j,text:h._("All")};i.unshift(k);var l={filters:i,all:k};f.exports=l;},null);
__d('AdsShutterstockViewStore',['AdsActionTypes','AdsDispatcher','FluxStore','Map','adsBaseStoreMixin'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('AdsDispatcher'));c('adsBaseStoreMixin')(this);this.$AdsShutterstockViewStoreClass3=new (c('Map'))();}j.prototype.__onDispatch=function(k){var l=k.action;switch(l.type){case c('AdsActionTypes').SHUTTERSTOCK.SEARCH_TEXT_CHANGED:this.$AdsShutterstockViewStoreClass1=l.data.searchText;this.__emitChange();break;case c('AdsActionTypes').SHUTTERSTOCK.SEARCH_DONE:this.$AdsShutterstockViewStoreClass2=l.data.searchText;if(!this.$AdsShutterstockViewStoreClass3.get(this.$AdsShutterstockViewStoreClass2))this.$AdsShutterstockViewStoreClass3.set(this.$AdsShutterstockViewStoreClass2,1);this.__emitChange();break;case c('AdsActionTypes').SHUTTERSTOCK.END_REACHED:var m=this.$AdsShutterstockViewStoreClass3.get(l.data.searchText);if(!m){this.$AdsShutterstockViewStoreClass3.set(l.data.searchText,2);}else this.$AdsShutterstockViewStoreClass3.set(l.data.searchText,m+1);this.__emitChange();break;}};j.prototype.getNumPagesForQuery=function(k){var l=this.$AdsShutterstockViewStoreClass3.get(k);return l||0;};j.prototype.getCurrentText=function(){return this.$AdsShutterstockViewStoreClass1;};j.prototype.getDelayedText=function(){return this.$AdsShutterstockViewStoreClass2;};j.prototype.isTyping=function(){var k=this.$AdsShutterstockViewStoreClass1!==null&&this.$AdsShutterstockViewStoreClass1!==undefined;return k&&this.$AdsShutterstockViewStoreClass1!==this.$AdsShutterstockViewStoreClass2;};f.exports=new j();},null);
__d('AdsShutterstockLibrary.react',['cx','fbt','ix','AdsMediaLibrary.react','AdsMediaPanelInfiniteScrollFooter.react','AdsMediaPanelMessage.react','AdsShutterstockSearchBar.react','AdsShutterstockSearchStore','AdsShutterstockUseGuidelines.react','AdsShutterstockViewActions','AdsShutterstockViewStore','FluxMixinLegacy','React','ReactComponentWithPureRenderMixin','ShutterstockApiStatus','debounce','keyMirror','setImmediate'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=25,m=c('keyMirror')({HAS_MORE:null,LOADING_INITIAL:null,LOADING_MORE:null,NO_MORE_RESULTS:null,NO_REQUEST:null,NO_RESULTS:null}),n=c('debounce')(function(p){return c('AdsShutterstockViewActions').searchDone(p);},200),o=c('React').createClass({displayName:'AdsShutterstockLibrary',mixins:[c('ReactComponentWithPureRenderMixin'),c('FluxMixinLegacy')([c('AdsShutterstockSearchStore'),c('AdsShutterstockViewStore')],{withProps:true})],propTypes:{defaultSearchText:k.string,imageContainerHeight:k.number.isRequired,onImageClick:k.func.isRequired,isClickEnabled:k.bool.isRequired,selectedImageList:k.array.isRequired},getDefaultProps:function(){return {isClickEnabled:true,selectedImageList:[]};},statics:{calculateState:function(p,q){var r=c('AdsShutterstockViewStore').getDelayedText()||q.defaultSearchText,s=c('AdsShutterstockViewStore').getNumPagesForQuery(r)||1,t=null;if(r)t=c('AdsShutterstockSearchStore').getSearchResults(r,l*s);return {currentSearchText:c('AdsShutterstockViewStore').getCurrentText(),isTyping:c('AdsShutterstockViewStore').isTyping(),query:r,results:t};}},_renderPanelMessage:function(p,q,r){return (c('React').createElement(c('AdsMediaPanelMessage.react'),{icon:p,style:{height:this.props.imageContainerHeight},subtitle:q,title:r}));},_getCurrentState:function(){var p=this.state.results,q=null,r=[];if(!p){if(this.state.isTyping){q=m.LOADING_INITIAL;}else q=m.NO_REQUEST;}else if(!p.hasValue()){q=m.LOADING_INITIAL;}else if(!p.getValueEnforcing().next){r=p.getValueEnforcing().images.toArray();if(r.length===0){q=m.NO_RESULTS;}else q=m.NO_MORE_RESULTS;}else{r=p.getValueEnforcing().images.toArray();if(p.hasOperation()){q=m.LOADING_MORE;}else q=m.HAS_MORE;}return {state:q,imageList:r};},_renderContent:function(){var p=this._getCurrentState(),q=p.state,r=p.imageList;switch(q){case m.NO_REQUEST:return this._renderPanelMessage(j('/images/ads/createflow/stock_images/icon_library_no_images.png'),i._("Any images you select will be saved in your image library."),i._("Search for professional images to use in your ads."));case m.NO_RESULTS:return this._renderPanelMessage(j('/images/ads/createflow/stock_images/icon_stock_no_results.png'),i._("Try using other keywords."),i._("There aren't any images that match what you searched."));default:var s=q===m.HAS_MORE||q===m.LOADING_MORE,t=c('React').createElement(c('AdsMediaPanelInfiniteScrollFooter.react'),{fetchingNextPage:s,imagesLoaded:q!==m.LOADING_INITIAL}),u=q===m.LOADING_INITIAL||this.state.isTyping;return (c('React').createElement(c('AdsMediaLibrary.react'),{height:this.props.imageContainerHeight,imageList:r,isClickEnabled:this.props.isClickEnabled,isLoadingInitial:u,scrollingAreaFooter:t,selectedImageList:this.props.selectedImageList,onEndReached:this._onEndReached,onImageClick:this.props.onImageClick},c('React').createElement(c('AdsShutterstockUseGuidelines.react'),{className:"_3cl1",dialogPosition:'left'})));}},render:function(){if(!c('ShutterstockApiStatus').available)return (c('React').createElement(c('AdsMediaPanelMessage.react'),{className:this.props.className,icon:j('/images/ads/createflow/stock_images/icon_stock_no_results.png'),style:{height:this.props.imageContainerHeight},subtitle:i._("Please try again later."),title:i._("Sorry, stock images aren't available right now.")}));return (c('React').createElement('div',{className:this.props.className},c('React').createElement(c('AdsShutterstockSearchBar.react'),{searchText:this.state.currentSearchText,onTextChange:this._onSearchTextChange}),this._renderContent()));},_onEndReached:function(){var p=this._getCurrentState(),q=p.state;if(q===m.HAS_MORE)c('setImmediate')(function(){return c('AdsShutterstockViewActions').endReached(this.state.query);}.bind(this));},_onSearchTextChange:function(p){c('AdsShutterstockViewActions').searchTextChanged(p);n(p);}});f.exports=o;},null);
__d('AdsAbstractImageUploadElementStates',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={IDLE:1,UPLOADING:2};f.exports=h;},null);
__d('AdsAbstractImageUploadElement.react',['cx','invariant','AdsAbstractImageUploadElementStates','AdsImageUploader','React','ReactDOM','SubscriptionsHandler','emptyFunction','joinClasses'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('AdsImageUploader').AdsImageUploader,k=c('React').PropTypes,l={};l[c('AdsAbstractImageUploadElementStates').IDLE]="_2uq";l[c('AdsAbstractImageUploadElementStates').UPLOADING]="_2ur";var m=c('React').createClass({displayName:'AdsAbstractImageUploadElement',propTypes:{accountId:k.string.isRequired,allowMultiImage:k.bool,imageSpec:k.shape({minWarningWidth:k.number.isRequired,minWarningHeight:k.number.isRequired}),onFormInputMount:k.func,onUploadClick:k.func.isRequired,onUploadEnd:k.func.isRequired,onUploadFail:k.func.isRequired,onUploadStart:k.func.isRequired,onUploadSuccess:k.func.isRequired,validateImageSize:k.bool,validateImageFormat:k.bool},getInitialState:function(){return {isUploading:false,subscriptions:new (c('SubscriptionsHandler'))()};},getDefaultProps:function(){return {allowMultiImage:false,onUploadClick:c('emptyFunction'),onUploadEnd:c('emptyFunction'),onUploadFail:c('emptyFunction'),onUploadStart:c('emptyFunction'),onUploadSuccess:c('emptyFunction')};},_getStateIdentifier:function(){return (this.state.isUploading?c('AdsAbstractImageUploadElementStates').UPLOADING:c('AdsAbstractImageUploadElementStates').IDLE);},render:function(){return (c('React').createElement('div',{className:c('joinClasses')("_2us",l[this._getStateIdentifier()],this.props.className),style:this.props.style},this.props.children));},componentWillReceiveProps:function(n){},componentDidMount:function(){var n=new j(c('ReactDOM').findDOMNode(this),{accountId:this.props.accountId,imageSpec:this.props.imageSpec,multiple:this.props.allowMultiImage,onFormInputMount:this.props.onFormInputMount,validateImageFormat:this.props.validateImageFormat,validateImageSize:this.props.validateImageSize});this.state.subscriptions.addSubscriptions(n.subscribe('onUploadClicked',this.props.onUploadClick),n.subscribe('onUploadStarted',function(o,p){this.setState({isUploading:true});this.props.onUploadStart(p);}.bind(this)),n.subscribe('onUploadFailed',function(){this.setState({isUploading:false});this.props.onUploadFail();}.bind(this)),n.subscribe('onUploadEnded',function(o,p){this.setState({isUploading:false});if(p.length)p.forEach(function(q){this.props.onUploadSuccess(q);}.bind(this));this.props.onUploadEnd(p);}.bind(this)));},componentWillUnmount:function(){this.state.subscriptions.release();}});f.exports=m;},null);
__d('AdsAbstractImageUploadElementContent.react',['cx','AdsAbstractImageUploadElementStates','AdsImageUploader','React','getObjectValues','joinClasses'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('AdsImageUploader').AdsImageUploaderConstants,j=c('React').PropTypes,k={};k[c('AdsAbstractImageUploadElementStates').IDLE]=c('joinClasses')("_5y7b",i.UPLOAD_ELEMENT);k[c('AdsAbstractImageUploadElementStates').UPLOADING]="_5y7c";var l=c('React').createClass({displayName:'AdsAbstractImageUploadElementContent',propTypes:{uploadState:j.oneOf(c('getObjectValues')(c('AdsAbstractImageUploadElementStates'))).isRequired},render:function(){return (c('React').createElement('div',{className:c('joinClasses')("_5y7d",k[this.props.uploadState])},this.props.children));}});f.exports=l;},null);
__d('AdsImageUploadErrorStore',['AdsCreationUIStore','AdsActionTypes','immutable'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('AdsCreationUIStore'));i=h&&h.prototype;j.prototype.getStoreName=function(){return 'AdsImageUploadErrorStore';};j.prototype.__getStateClass=function(){return c('immutable').Record({sizeError:null,formatError:null});};j.prototype.__handleAction=function(k,l){var m=k.action;switch(m.type){case c('AdsActionTypes').IMAGE_UPLOAD.FORMAT_ERROR:l.formatError=m.message;break;case c('AdsActionTypes').IMAGE_UPLOAD.SIZE_ERROR:l.sizeError=m.message;break;case c('AdsActionTypes').IMAGE_UPLOAD.REMOVE_ERRORS:l.sizeError=null;l.formatError=null;break;}};j.prototype.getUploadErrors=function(){var k=[];this.getState().forEach(function(l){if(l)k.push(l);});return k;};function j(){h.apply(this,arguments);}f.exports=new j();},null);
__d('AdsUploadImageBox.react',['cx','ix','fbt','AdsAbstractImageUploadElement.react','AdsAbstractImageUploadElementContent.react','AdsAbstractImageUploadElementStates','AdsImageUploadErrorStore','AdsValidationIcon.react','AdsValidationIconType','FluxMixinLegacy','Image.react','InlineBlock.react','React','ReactDOM','ReactComponentWithPureRenderMixin','joinClasses'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=180,m=35,n=c('React').createClass({displayName:'AdsUploadImageBox',mixins:[c('ReactComponentWithPureRenderMixin'),c('FluxMixinLegacy')([c('AdsImageUploadErrorStore')])],propTypes:{accountId:k.string.isRequired,allowMultiImage:k.bool,height:k.number.isRequired,imageSpec:k.shape({minWarningWidth:k.number.isRequired,minWarningHeight:k.number.isRequired}),onUploadClick:k.func,onUploadEnd:k.func,onUploadFail:k.func,onUploadStart:k.func,onUploadSuccess:k.func,validateImageFormat:k.bool,validateImageSize:k.bool},statics:{calculateState:function(){return {uploadErrors:c('AdsImageUploadErrorStore').getUploadErrors()};}},getDefaultProps:function(){return {style:{}};},_onWarningTextClick:function(){if(this.state.inputFormDOMElement)this.state.inputFormDOMElement.click();},_onFormInputMount:function(o){this.setState({inputFormDOMElement:c('ReactDOM').findDOMNode(o)});},render:function(){var o=this.props.height-l-6,p=Math.floor(o/2),q=o-p,r={marginTop:p+'px',marginBottom:q+'px'},s=null;if(this.state.uploadErrors.length>0){var t=this.state.uploadErrors.map(function(v,w){return (c('React').createElement('div',{key:w,onClick:this._onWarningTextClick},c('React').createElement(c('AdsValidationIcon.react'),{className:"_3sft",messages:[v.longMessage],type:c('AdsValidationIconType').ERROR_IMAGE}),v.shortMessage));}.bind(this));s=c('React').createElement('div',{className:"_3sfu"},t);}var u=this.props.allowMultiImage?j._("Drag and drop multiple images or click to upload images"):j._("Drag and drop an image or click to upload");return (c('React').createElement(c('AdsAbstractImageUploadElement.react'),babelHelpers['extends']({},this.props,{className:c('joinClasses')(this.props.className,"_3sfv"),style:babelHelpers['extends']({},r,this.props.style),onFormInputMount:this._onFormInputMount}),c('React').createElement(c('AdsAbstractImageUploadElementContent.react'),{uploadState:c('AdsAbstractImageUploadElementStates').IDLE},c('React').createElement(c('InlineBlock.react'),{alignv:'middle',height:l},c('React').createElement(c('Image.react'),{className:"_3sfw",src:i('/images/ads/createflow/upload_box_icon.png')}),c('React').createElement(c('InlineBlock.react'),{alignv:'middle',className:"_3sfx",height:m},u))),c('React').createElement(c('AdsAbstractImageUploadElementContent.react'),{uploadState:c('AdsAbstractImageUploadElementStates').UPLOADING},c('React').createElement(c('InlineBlock.react'),{alignv:'middle',height:l},j._("Uploading..."))),s));}});f.exports=n;},null);
__d('AdsMediaPanel.react',['cx','fbt','ix','Promise','AdsArrowedCarouselEnhanced.react','AdsCFShutterstockLibrary.react','AdsImageActions','AdsImageCollectionViews','AdsImageDimensionDataLoader','AdsImageSecondaryActions','AdsImageStore','AdsImageValidation','AdsLoadState','AdsMediaLibrary.react','AdsMediaPanelImageBoxContainer.react','AdsMediaPanelInfiniteScrollFooter.react','AdsMediaPanelMessage.react','AdsMediaPanelPageLinkInstagramAccountUnit.react','AdsMediaPanelTabs','AdsMediaPanelViewFilterBar.react','AdsMediaPanelViewFilters','AdsShutterstockLibrary.react','AdsUploadImageBox.react','Event','FluxMixinLegacy','Link.react','Map','React','ReactComponentWithPureRenderMixin','adsGKCheck','emptyFunction','getViewportDimensions','joinClasses'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=49,m=215,n=332,o=658,p=100;function q(){var t=m+l,u=n+l,v=o-u,w=c('getViewportDimensions')().height,x=w-p-v;return Math.max(t,Math.min(u,x));}var r={};r[c('AdsMediaPanelTabs').UPLOAD]={className:"_5xhy",title:i._("Upload Images"),renderer:'_renderUploadTab'};r[c('AdsMediaPanelTabs').LIBRARY]={className:"_5xh-",title:i._("Image Library"),renderer:'_renderLibraryTab'};r[c('AdsMediaPanelTabs').STOCK]={className:"_5xh_",title:i._("Stock Images"),renderer:'_renderStockTab'};var s=c('React').createClass({displayName:'AdsMediaPanel',mixins:[c('FluxMixinLegacy')([c('AdsImageStore')],{withProps:true}),c('ReactComponentWithPureRenderMixin')],propTypes:{accountID:k.string.isRequired,buyingTypes:k.arrayOf(k.string),defaultStockSearchText:k.string,disableTooSmallImages:k.bool,igSpecificImageSpec:k.object,imageCollection:k.object.isRequired,imageHandlers:k.shape({onClick:k.func,onDoubleClick:k.func,onSecondaryAction:k.func}).isRequired,imageSpec:k.shape({minWarningWidth:k.number.isRequired,minWarningHeight:k.number.isRequired}),initialSelectedTab:k.oneOf(Object.keys(r)),instagramAccount:k.shape({id:k.string.isRequired,is_published:k.bool.isRequired,profile_pic:k.string.isRequired,username:k.string.isRequired}),instagramAccountLoadState:k.oneOf(Object.keys(c('AdsLoadState'))),maxSelectedImages:k.number.isRequired,pageID:k.string,pageLinkOrUnlinkAccountError:k.arrayOf(k.string),selectedImageList:k.array.isRequired,stockSearchText:k.string,tabKeys:k.arrayOf(k.string).isRequired,uploadHandlers:k.shape({onClick:k.func,onEnd:k.func,onFail:k.func,onStart:k.func,onSuccess:k.func}).isRequired,useInstagramImageCreative:k.bool,userImagesLoaded:k.bool,validateImageFormat:k.bool,validateImageSize:k.bool,onTabSwitch:k.func.isRequired},getDefaultProps:function(){return {disableTooSmallImages:false,imageHandlers:{onClick:c('emptyFunction'),onDoubleClick:c('emptyFunction'),onSecondaryAction:c('emptyFunction')},maxSelectedImages:1,onTabSwitch:c('emptyFunction'),selectedImageList:[],uploadHandlers:{},userImagesLoaded:true};},getInitialState:function(){return {viewFilter:c('AdsMediaPanelViewFilters').all,selectedTab:this.props.initialSelectedTab||c('AdsMediaPanelTabs').LIBRARY};},statics:{calculateState:function(t,u){return {canFetchNextLibraryPage:c('AdsImageStore').hasCursorForNextPage(u.accountID),fetchingNextLibraryPage:c('AdsImageStore').isFetchingNextPage(u.accountID)};}},componentWillMount:function(){this._setResizeHandlerRef(c('Event').listen(window,'resize',this.forceUpdate.bind(this)));},componentWillUnmount:function(){this._removeResizeHandlerRef();this._setResizeHandlerRef(null);},_removeResizeHandlerRef:function(){var t=this;t._resizeHandlerRef.remove();},_setResizeHandlerRef:function(t){var u=this;u._resizeHandlerRef=t;},_isTabAllowed:function(t){return this.props.tabKeys.indexOf(t)!==-1;},_renderMultipleSelectedImagesRow:function(){var t=null;if(this.props.maxSelectedImages>1){var u=this.props.selectedImageList.map(function(v,w){return (c('React').createElement(c('AdsMediaPanelImageBoxContainer.react'),{alt:i._("Selected Image {number} of {total}",[i.param('number',w+1),i.param('total',this.props.selectedImageList.length)]),buyingTypes:this.props.buyingTypes,className:"_16es",decoration:'removable',image:v,imageSpec:this.props.imageSpec,key:v.getUniqueIdentifier(),onDecorationIconClick:this.props.imageHandlers.onSecondaryAction&&this.props.imageHandlers.onSecondaryAction.bind(null,v,c('AdsImageSecondaryActions').X)}));}.bind(this));t=c('React').createElement('div',{className:"_16et _5xi2 clearfix"},c('React').createElement('div',{className:"_16eu"},c('React').createElement('h2',{className:"_5xht"},i._("Selected Images")),c('React').createElement('span',{className:"_5xi4"},i._({"*":{"*":"({images} of {max-images})"}},[i.param('images',this.props.selectedImageList.length,[0]),i.param('max-images',this.props.maxSelectedImages,[0])]))),c('React').createElement(c('AdsArrowedCarouselEnhanced.react'),{maxChangeAmount:6},u));}return t;},render:function(){r[c('AdsMediaPanelTabs').UPLOAD].title=this.props.maxSelectedImages>1?i._("Upload Images"):i._("Upload Image");return (c('React').createElement('div',null,c('React').createElement('div',{className:"_5xhs"},this.props.tabKeys.map(this._renderTabTitle)),this._renderTabContent(),this._renderMultipleSelectedImagesRow()));},_renderTabTitle:function(t){var u=r[t],v=t===this.state.selectedTab,w=c('joinClasses')(u.className,"_5xhu"+(v?' '+"_5xhw":''));return (c('React').createElement(c('Link.react'),{className:w,key:t,onClick:this._switchToTab.bind(null,t)},c('React').createElement('div',{className:"_5xhz"}),u.title));},_switchToTab:function(t){this.setState({selectedTab:t});this.props.onTabSwitch(t);},_renderTabContent:function(){var t=r[this.state.selectedTab],u=c('joinClasses')(t.className,"_5xhx"+(' '+"_5xhw")),v=this;return v[t.renderer](this.state.selectedTab,u);},_renderUploadTab:function(t,u){return (c('React').createElement('div',{className:u,key:t},c('React').createElement(c('AdsUploadImageBox.react'),{accountId:this.props.accountID,allowMultiImage:this.props.maxSelectedImages>1,height:q(),imageSpec:this.props.imageSpec,validateImageFormat:this.props.validateImageFormat,validateImageSize:this.props.validateImageSize,onUploadClick:this.props.uploadHandlers.onClick,onUploadEnd:this._onUploadEnd,onUploadFail:this.props.uploadHandlers.onFail,onUploadStart:this.props.uploadHandlers.onStart,onUploadSuccess:this.props.uploadHandlers.onSuccess})));},_onUploadEnd:function(t){c('Promise').all(t.map(function(u){return (c('AdsImageDimensionDataLoader').getDimensionByURL(u.getUrl()).then(function(v){var w=v.width,x=v.height;return u.clone({width:w,height:x});}));})).done(function(u){if(this.props.uploadHandlers.onEnd)this.props.uploadHandlers.onEnd(u);if(this.props.maxSelectedImages===1&&u.length>0)this.setState({selectedTab:c('AdsMediaPanelTabs').LIBRARY},function(){return this.scrollToImage(u[0]);}.bind(this));}.bind(this));},_sortDownTooSmallImages:function(t){var u=this.props.imageSpec,v=this.props.igSpecificImageSpec,w=new (c('Map'))();t.forEach(function(x,y){return w.set(x,y);});return t.sort(function(x,y){var z=0,aa=0;if(v){z+=c('AdsImageValidation').isWarningSize(x,v)?1:0;aa+=c('AdsImageValidation').isWarningSize(y,v)?1:0;}z+=c('AdsImageValidation').isWarningSize(x,u)?1:0;aa+=c('AdsImageValidation').isWarningSize(y,u)?1:0;if(z>aa){return -1;}else if(z<aa){return 1;}else return w.get(x)-w.get(y);});},_onLibraryEndReached:function(){if(this.state.canFetchNextLibraryPage&&!this.state.fetchingNextLibraryPage)c('AdsImageActions').loadNextPage(this.props.accountID);},_canSelectImages:function(){return (this.props.maxSelectedImages===1||this.props.selectedImageList.length<this.props.maxSelectedImages);},_renderLibraryTab:function(t,u){var v=this.props.imageCollection,w=v.getImageCount(this.state.viewFilter.view),x=v.getImages(this.state.viewFilter.view);if(this.props.disableTooSmallImages)x=this._sortDownTooSmallImages(x);var y=c('emptyFunction'),z=null;if(c('adsGKCheck')('ads_image_picker_pagination')){y=this._onLibraryEndReached;if(this.state.fetchingNextLibraryPage||!this.state.canFetchNextLibraryPage)z=c('React').createElement(c('AdsMediaPanelInfiniteScrollFooter.react'),{fetchingNextPage:this.state.fetchingNextLibraryPage,imagesLoaded:this.props.userImagesLoaded});}var aa=q()-l,ba=void 0;if(this.state.viewFilter.view===c('AdsImageCollectionViews').views.INSTAGRAM){ba=c('React').createElement(c('AdsMediaPanelPageLinkInstagramAccountUnit.react'),babelHelpers['extends']({},this.props,{imageList:x,isClickEnabled:this._canSelectImages(),isLoadingInitial:!this.props.userImagesLoaded,photoArrangeEnabled:true,ref:'imageLib',scrollingAreaFooter:z,totalHeight:aa,onEndReached:y,onImageClick:this.props.imageHandlers.onClick,onImageDoubleClick:this.props.imageHandlers.onDoubleClick}));}else if(w>0||!this.props.userImagesLoaded){ba=c('React').createElement(c('AdsMediaLibrary.react'),{buyingTypes:this.props.buyingTypes,disableTooSmallImages:this.props.disableTooSmallImages,height:aa,igSpecificImageSpec:this.props.igSpecificImageSpec,imageList:x,imageSpec:this.props.imageSpec,isClickEnabled:this._canSelectImages(),isLoadingInitial:!this.props.userImagesLoaded,key:t,photoArrangeEnabled:true,ref:'imageLib',scrollingAreaFooter:z,selectedImageList:this.props.selectedImageList,onEndReached:y,onImageClick:this.props.imageHandlers.onClick,onImageDoubleClick:this.props.imageHandlers.onDoubleClick});}else{var ca=this._isTabAllowed(c('AdsMediaPanelTabs').STOCK)?i._("Upload images or try using professional stock images at no extra cost."):i._("Upload images to use them for your ads.");ba=c('React').createElement(c('AdsMediaPanelMessage.react'),{className:u,icon:j('/images/ads/createflow/stock_images/icon_library_no_images.png'),style:{height:String(aa)+'px'},subtitle:ca,title:i._("There aren't any images in your library.")});}var da=c('AdsMediaPanelViewFilters').filters.map(function(ea){return babelHelpers['extends']({},ea,{count:v.getImageCount(ea.view)});}).filter(function(ea){return (ea.view!==c('AdsImageCollectionViews').views.INSTAGRAM&&ea.count>0||ea.view===c('AdsImageCollectionViews').views.INSTAGRAM&&this.props.useInstagramImageCreative);}.bind(this));return (c('React').createElement('div',{className:u},c('React').createElement(c('AdsMediaPanelViewFilterBar.react'),{availableViewFilters:da,instagramAccountLinked:!!this.props.instagramAccount&&this.props.instagramAccount.is_published,viewFilter:this.state.viewFilter,onViewFilterChoose:this._onViewFilterChoose}),ba));},_onViewFilterChoose:function(t){if(t.view===this.state.viewFilter.view)return;this.setState({viewFilter:t});},_onStockImageClick:function(t){this.props.imageCollection.addImagesToBack_UNSAFE([t],c('AdsImageCollectionViews').views.STOCK);var u=this.props.imageHandlers.onClick;if(u)u.call(this.props.imageHandlers,t);},_renderStockTab:function(t,u){if(c('adsGKCheck')('ads_use_new_shutterstock_component')){return (c('React').createElement(c('AdsShutterstockLibrary.react'),{className:u,defaultSearchText:this.props.defaultStockSearchText,imageContainerHeight:q()-l,isClickEnabled:this._canSelectImages(),key:t,selectedImageList:this.props.selectedImageList,onImageClick:this._onStockImageClick}));}else return (c('React').createElement(c('AdsCFShutterstockLibrary.react'),{className:u,defaultSearchText:this.props.defaultStockSearchText,imageCollection:this.props.imageCollection,imageContainerHeight:q()-l,isClickEnabled:this._canSelectImages(),key:t,searchText:this.props.stockSearchText,selectedImageList:this.props.selectedImageList,onImageClick:this.props.imageHandlers.onClick}));},scrollToImage:function(t){this.refs.imageLib.scrollToImage(t);}});f.exports=s;},null);
__d('AdsImageDialog.react',['invariant','Promise','AdImageSpecsUtils','AdsShutterstockImageByIDStore','AdsImageCollection','AdsImageCollectionViews','AdsImageLegacy','AdsImageSecondaryActions','AdsMediaPanel.react','AdsMediaPanelTabs','LayerFadeOnHide','LayerRemoveOnHide','React','ReactComponentWithPureRenderMixin','XUIDialog.react','XUIDialogCancelButton.react','XUIDialogConfirmButton.react','XUIDialogFooter.react','adsGKCheck','deepFreezeValue','emptyFunction'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=[c('AdsMediaPanelTabs').UPLOAD,c('AdsMediaPanelTabs').LIBRARY,c('AdsMediaPanelTabs').STOCK],k={LayerFadeOnHide:c('LayerFadeOnHide'),LayerRemoveOnHide:c('LayerRemoveOnHide')},l=[];c('deepFreezeValue')(l);var m=c('React').createClass({displayName:'AdsImageLegacyDialog',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{accountID:i.string.isRequired,defaultStockSearchText:i.string,initialTab:i.string,libraryImages:i.arrayOf(i.shape({url:i.string.isRequired,hash:i.string.isRequired})).isRequired,maxSelectedImages:i.number.isRequired,pageImages:i.arrayOf(i.instanceOf(c('AdsImageLegacy'))),selectedImages:i.arrayOf(i.shape({stockImageID:i.string,url:i.string,hash:i.string}).isRequired).isRequired,specs:i.arrayOf(i.shape({minWarningWidth:i.number.isRequired,minWarningHeight:i.number.isRequired})).isRequired,tabKeys:i.arrayOf(i.string),onCancel:i.func,onSelect:i.func.isRequired},getDefaultProps:function(){return {defaultStockSearchText:'',initialTab:c('AdsMediaPanelTabs').LIBRARY,libraryImages:[],instagramImages:[],pageImages:[],maxSelectedImages:1,onSelect:c('emptyFunction'),selectedImages:[],specs:[]};},getInitialState:function(){var t=this.props.selectedImages.map(q);return {selectedLegacyImageList:t,userConfirmed:false,userSelected:false};},componentWillMount:function(){n(this.props.accountID,this.props.libraryImages,this.props.instagramImages,this.props.pageImages||[],{maxSelectedImages:this.props.maxSelectedImages});},componentWillReceiveProps:function(t){var u=t.accountID,v=t.libraryImages,w=t.instagramImages,x=t.pageImages,y=t.maxSelectedImages;n(u,v,w,x,{maxSelectedImages:y});},render:function(){var t=c('AdImageSpecsUtils').reduceMinImageSpec(this.props.specs),u=t.imageSpec,v=t.igSpecificImageSpec,w={onClick:this._onImageClick,onDoubleClick:this._onImageDblClick,onSecondaryAction:this._onImageSecondaryAction},x={onEnd:this._onUploadEnd},y=this.props.maxSelectedImages,z=r(this.props.accountID,{maxSelectedImages:y});return (c('React').createElement(c('XUIDialog.react'),{behaviors:k,shown:true,width:768,onToggle:this.props.onCancel},c('React').createElement(c('AdsMediaPanel.react'),babelHelpers['extends']({},this.props,{buttonStyle:'done',disableTooSmallImages:!!u,igSpecificImageSpec:v,imageCollection:z,imageHandlers:w,imageSpec:u,initialSelectedTab:this.props.initialTab,maxSelectedImages:y,selectedImageList:this.state.selectedLegacyImageList,stockSearchText:'',tabKeys:this.props.tabKeys||j,uploadHandlers:x})),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogCancelButton.react'),null),c('React').createElement(c('XUIDialogConfirmButton.react'),{disabled:!this.state.userSelected||this.state.userConfirmed,use:'confirm',onClick:this._onSelect}))));},_addSelectedImage:function(t,u){var v=this.props.maxSelectedImages,w=r(this.props.accountID,{maxSelectedImages:v});w.setImageSelected(t,true);var x=this.state.selectedLegacyImageList.concat(t),y=x.length-v;if(y>0){for(var z=0;z<y;z++)w.setImageSelected(t,false);x=x.slice(y,x.length);}this.setState({selectedLegacyImageList:x,userSelected:true},u||c('emptyFunction'));},_onImageSecondaryAction:function(t,u){if(u===c('AdsImageSecondaryActions').X)this._removeSelectedImage(t);},_removeSelectedImage:function(t){var u=r(this.props.accountID,{maxSelectedImages:this.props.maxSelectedImages});u.setImageSelected(t,false);var v=this.state.selectedLegacyImageList.filter(function(w){return !w.equals(t);});this.setState({selectedLegacyImageList:v,userSelected:true});},_setImageData:function(t){t.forEach(function(u){return delete u.crops;});if(this.props.maxSelectedImages===1)!t.length?h(0):void 0;this.props.onSelect(t);},_promiseStockImageData:function(t){return new (c('Promise'))(function(u,v){c('AdsShutterstockImageByIDStore').addLegacyCallback_DONT_USE_IN_NEW_CODE(t.getStockImageID(),function(w){if(w.hasError()){this.setState({userConfirmed:false});h(0);}else if(w.hasValue())u(babelHelpers['extends']({},t.toJSON(),{url:w.getValueEnforcing().get('preview_url')}));}.bind(this));}.bind(this));},_onSelect:function(t){var u=this;t&&t.preventDefault();var v=[];if(this.state.userSelected)(function(){var w=[];u.state.selectedLegacyImageList.forEach(function(x){if(x.isStockImage()){w.push(this._promiseStockImageData(x));}else v.push(x.toJSON());}.bind(u));if(w.length===0){u._setImageData(v);}else{u.setState({userConfirmed:true});c('Promise').all(w).done(function(x){this._setImageData(v.concat(x));}.bind(u));}})();},_onImageClick:function(t){var u=this.state.selectedLegacyImageList.some(function(v){return v.equals(t);});if(u){if(this.props.maxSelectedImages>1)this._removeSelectedImage(t);}else this._addSelectedImage(t);},_onImageDblClick:function(t){var u=this.props.selectedImages;if(this.props.maxSelectedImages==1&&u.length){var v=q(u[0]);if(v&&v.equals(t)){return;}else if(v)this._addSelectedImage(t,this._onSelect);}},_onUploadEnd:function(t){var u=[];u=t.map(function(v){return {legacyImage:v,view:c('AdsImageCollectionViews').views.LIBRARY};});o(this.props.accountID,u,false,{maxSelectedImages:this.maxSelectedImages});t.forEach(function(v){return this._addSelectedImage(v);}.bind(this));}});function n(t,u,v,w,x){var y=[];if(u.length)u.forEach(function(z){y.push({legacyImage:new (c('AdsImageLegacy'))(z),view:c('AdsImageCollectionViews').views.LIBRARY});});if(v.length)v.forEach(function(z){y.push({legacyImage:new (c('AdsImageLegacy'))({url:z.url,imageType:'INSTAGRAM'}),view:c('AdsImageCollectionViews').views.INSTAGRAM});});if(w.length)w.forEach(function(z){y.push({legacyImage:z,view:c('AdsImageCollectionViews').views.PAGE});});if(y.length)o(t,y,c('adsGKCheck')('ads_image_picker_pagination'),x);}function o(t,u,v,w){if(u&&u.length)(function(){var x=r(t,w),y=[];u.forEach(function(aa){if(!x.hasImage(aa.legacyImage))y.push(aa);});if(y.length){var z=[c('AdsImageCollectionViews').views.INSTAGRAM,c('AdsImageCollectionViews').views.LIBRARY,c('AdsImageCollectionViews').views.PAGE];z.map(function(aa){var ba=y.filter(function(ca){return ca.view===aa;}).map(function(ca){return ca.legacyImage;});if(v){x.addImagesToBack(ba,aa);}else x.addImagesToFront(ba,aa);});}})();}var p={};function q(t){if(t){return new (c('AdsImageLegacy'))(t);}else return null;}function r(t,u){var v=p[t];if(!v){v=new (c('AdsImageCollection'))(u);p[t]=v;}return v;}var s=c('React').createClass({displayName:'AdsImageDialog',render:function(){return c('React').createElement(m,this.props);}});f.exports=s;},null);
__d('AdsInstagramAccountMediaListActions',['AdsActionTypes','AdsDispatcher','Map'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={mediaListBatchLoaded:function(i,j){c('AdsDispatcher').handleUpdateFromServerResponse({data:{instagramUserID:i,media:j},type:c('AdsActionTypes').INSTAGRAM_MEDIA_LIST.BATCH_LOADED});},mediaListBatchLoadError:function(i){c('AdsDispatcher').handleUpdateFromServerResponse({errors:i,type:c('AdsActionTypes').INSTAGRAM_MEDIA_LIST.BATCH_LOAD_ERROR});},mediaListPartialBatchLoaded:function(i,j){c('AdsDispatcher').handleUpdateFromServerResponse({data:{instagramUserID:i,media:j},type:c('AdsActionTypes').INSTAGRAM_MEDIA_LIST.PARTIAL_LOAD});}};f.exports=h;},null);
__d('AdsInstagramAccountMediaListDataManager',['AdsBaseListDataManager','AdsGraphAPI','AdsInstagramAccountMediaListActions','GraphAPIPaging','Map'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('AdsBaseListDataManager'));i=h&&h.prototype;j.prototype.loadFor=function(k){c('AdsGraphAPI').getWithGeneralMigration(f.id).object('instagram_object',k).edge('instagram_media').get({fields:['id']}).then(c('GraphAPIPaging').eachPage(function(l){return this.$AdsInstagramAccountMediaListDataManager1(k,l.data);}.bind(this))).done(this.__handleSuccess.bind(this,['load'],k,null),this.__handleError.bind(this,['load'],k,null));};j.prototype.$AdsInstagramAccountMediaListDataManager1=function(k,l){c('AdsInstagramAccountMediaListActions').mediaListPartialBatchLoaded(k,l);};j.prototype.__onBatchLoaded=function(k){k.forEach(function(l,m){c('AdsInstagramAccountMediaListActions').mediaListBatchLoaded(m,l.data);});};j.prototype.__onBatchLoadError=function(k){k.forEach(function(l,m){c('AdsInstagramAccountMediaListActions').mediaListBatchLoadError(m);});};function j(){h.apply(this,arguments);}f.exports=new j();},null);
__d('AdsInstagramAccountMediaListStore',['AdsActionTypes','AdsBaseListStore','AdsInstagramAccountMediaListDataManager','AdsLoadState'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('AdsBaseListStore'));i=h&&h.prototype;j.prototype.getDataManager=function(){return c('AdsInstagramAccountMediaListDataManager');};j.prototype.__onDispatch=function(k){var l=k.action,m=l.data;switch(l.type){case c('AdsActionTypes').INSTAGRAM_MEDIA_LIST.BATCH_LOADED:this.__handleDataFor(m.instagramUserID,m.media,c('AdsLoadState').LOADED);break;case c('AdsActionTypes').INSTAGRAM_MEDIA_LIST.BATCH_LOAD_ERROR:this.__handleDataFor(l.errors,null,c('AdsLoadState').ERROR);break;case c('AdsActionTypes').INSTAGRAM_MEDIA_LIST.PARTIAL_LOAD:this.__handleDataFor(m.instagramUserID,m.media,c('AdsLoadState').LOADING);break;}};function j(){h.apply(this,arguments);}f.exports=new j();},null);
__d('AdsInstagramMediaActions',['AdsActionTypes','AdsDispatcher','Map'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={mediaLoaded:function(i){c('AdsDispatcher').handleUpdateFromServerResponse({specs:i,type:c('AdsActionTypes').INSTAGRAM_MEDIA.LOADED});},mediaLoadError:function(i){c('AdsDispatcher').handleUpdateFromServerResponse({errors:i,type:c('AdsActionTypes').INSTAGRAM_MEDIA.LOAD_ERROR});}};f.exports=h;},null);
__d('AdsInstagramMediaDataManager',['AdsBaseDataManager','AdsGraphAPI','AdsInstagramMediaActions','Map'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('AdsBaseDataManager'));i=h&&h.prototype;j.prototype.loadAll=function(k){k.forEach(function(l){return this.load(l);}.bind(this));};j.prototype.load=function(k){c('AdsGraphAPI').getWithGeneralMigration(f.id).object('instagram_object',k).batched().get({fields:['content_type','display_url','owner_instagram_user','video_url']}).done(function(l){return this.__handleSuccess(['load'],k,null,l);}.bind(this),function(l){return this.__handleError(['load'],k,null,l);}.bind(this));};j.prototype.__onBatchLoaded=function(k){c('AdsInstagramMediaActions').mediaLoaded(k);};j.prototype.__onBatchLoadError=function(k){c('AdsInstagramMediaActions').mediaLoadError(k);};function j(){h.apply(this,arguments);}f.exports=new j();},null);
__d('AdsInstagramMediaStore',['AdsActionTypes','AdsBaseDataStore','AdsInstagramMediaDataManager','AdsLoadState'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('AdsBaseDataStore'));i=h&&h.prototype;j.prototype.getDataManager=function(){return c('AdsInstagramMediaDataManager');};j.prototype.__onDispatch=function(k){var l=k.action;switch(l.type){case c('AdsActionTypes').INSTAGRAM_MEDIA.LOADED:this.__handleData(l.specs,c('AdsLoadState').LOADED);break;case c('AdsActionTypes').INSTAGRAM_MEDIA.LOAD_ERROR:this.__handleData(l.errors,c('AdsLoadState').ERROR);break;}};function j(){h.apply(this,arguments);}f.exports=new j();},null);
__d("XPageLinkInstagramAccountController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/page\/instagram\/link\/",{});},null);
__d("XPageUnlinkInstagramAccountController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/page\/instagram\/unlink\/",{});},null);
__d('AdsPageInstagramAccountDataManager',['fbt','AdsBaseDataManager','AdsGraphAPI','AdsPageInstagramAccountActions','AsyncRequest','GraphEdgeName','GraphInstagramUserFields','Map','XPageLinkInstagramAccountController','XPageUnlinkInstagramAccountController','sprintf'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=[c('GraphInstagramUserFields').HAS_PROFILE_PIC,c('GraphInstagramUserFields').ID,c('GraphInstagramUserFields').IS_PRIVATE,c('GraphInstagramUserFields').IS_PUBLISHED,c('GraphInstagramUserFields').PROFILE_PIC,c('GraphInstagramUserFields').USERNAME].join();i=babelHelpers.inherits(l,c('AdsBaseDataManager'));j=i&&i.prototype;l.prototype.loadAll=function(m){m.forEach(function(n){return this.load(n);}.bind(this));};l.prototype.load=function(m){c('AdsGraphAPI').getWithGeneralMigration(f.id).objectByName('page',m).batched().get({fields:[c('sprintf')('%s.limit(1).fields(%s)',c('GraphEdgeName').INSTAGRAM_ACCOUNTS,k),c('sprintf')('%s.limit(1).fields(%s)',c('GraphEdgeName').PAGE_BACKED_INSTAGRAM_ACCOUNTS,k)]}).done(function(n){return this.__handleSuccess(['load'],m,null,n);}.bind(this),function(n){return this.__handleError(['load'],m,null,n);}.bind(this));};l.prototype.createAndUsePageBackedAccount=function(m,n,o,p,q,r){c('AdsGraphAPI').getWithGeneralMigration(f.id).objectByName('page',o).edge(c('GraphEdgeName').PAGE_BACKED_INSTAGRAM_ACCOUNTS).batched().post({access_token:p}).done(function(s){c('AdsPageInstagramAccountActions').handlePageBackedAccountCreateSuccess(m,n,o,s.id,q,r);},function(s){c('AdsPageInstagramAccountActions').handlePageBackedAccountCreateError(o);});};l.prototype.linkInstagramAccount=function(m,n,o){var p=c('XPageLinkInstagramAccountController').getURIBuilder().getURI();new (c('AsyncRequest'))().setAllowCrossOrigin(true).setURI(p).setData({page_id:m,password:o,username:n}).setHandler(function(q){return (c('AdsPageInstagramAccountActions').handleLinkInstagramAccountResponse(m,q.payload.instagram_account_id,q.payload.error_messages,q.payload.error_code));}).setErrorHandler(function(q){return (c('AdsPageInstagramAccountActions').handleLinkInstagramAccountError(m));}).send();};l.prototype.unlinkInstagramAccount=function(m,n){var o=c('XPageUnlinkInstagramAccountController').getURIBuilder().getURI();new (c('AsyncRequest'))().setAllowCrossOrigin(true).setURI(o).setData({page_id:m,instagram_account_id:n}).setHandler(function(p){return (c('AdsPageInstagramAccountActions').handleUnlinkInstagramAccountResponse(m,p.payload.error,p.payload.success));}).setErrorHandler(function(p){return (c('AdsPageInstagramAccountActions').handleUnlinkInstagramAccountError(m));}).send();};l.prototype.__onBatchLoaded=function(m){c('AdsPageInstagramAccountActions').accountsBatchLoaded(m);};l.prototype.__onBatchLoadError=function(m){c('AdsPageInstagramAccountActions').accountsBatchLoadError(m);};l.prototype.__getObjectTypeLabel=function(){return h._("Page Instagram Accounts");};function l(){i.apply(this,arguments);}f.exports=new l();},null);
__d('AdsPageInstagramAccountStore',['AdsBaseDataStore','AdsInstagramAccountActionTypes','AdsLoadState','AdsLoadStateUtils','AdsPageInstagramAccountDataManager','GraphEdgeName','InstagramAuthenticationErrorMessages','adsGKCheck','getByPath'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('adsGKCheck')('pe_allow_page_linked_ig_account_for_business');h=babelHelpers.inherits(k,c('AdsBaseDataStore'));i=h&&h.prototype;function k(){i.constructor.call(this);this.$AdsPageInstagramAccountStore1={};this.$AdsPageInstagramAccountStore2={};this.$AdsPageInstagramAccountStore3={};}k.prototype.getDataManager=function(){return c('AdsPageInstagramAccountDataManager');};k.prototype.__onDispatch=function(l){var m=l.action;switch(m.type){case c('AdsInstagramAccountActionTypes').PAGE.BATCH_LOADED:this.__handleData(m.specs,c('AdsLoadState').LOADED);break;case c('AdsInstagramAccountActionTypes').PAGE.BATCH_LOAD_ERROR:this.__handleData(m.errors,c('AdsLoadState').ERROR);break;case c('AdsInstagramAccountActionTypes').PAGE.CLEAR_ACCOUNTS:this.__invalidate(m.data.pageID);break;case c('AdsInstagramAccountActionTypes').PAGE.CREATE_AND_USE_PAGE_BACKED:this.$AdsPageInstagramAccountStore4(m.data.campaignID,m.data.adgroupIDs,m.data.pageID,m.data.accessToken,m.data.instagramAccountIDCallback,m.source);break;case c('AdsInstagramAccountActionTypes').PAGE.CREATE_PAGE_BACKED_ERROR:this.$AdsPageInstagramAccountStore5(m.data.pageID);break;case c('AdsInstagramAccountActionTypes').PAGE.CREATE_PAGE_BACKED_SUCCESS:this.$AdsPageInstagramAccountStore6(m.data);break;case c('AdsInstagramAccountActionTypes').ERROR.REFRESH_ALL_ERRORS:if(this.__invalidateAllErrors())this.__emitChange();break;case c('AdsInstagramAccountActionTypes').PAGE.LINK_ACCOUNT:this.$AdsPageInstagramAccountStore7(m.data.pageID,m.data.username,m.data.password);break;case c('AdsInstagramAccountActionTypes').PAGE.UNLINK_ACCOUNT:this.$AdsPageInstagramAccountStore8(m.data.pageID,m.data.instagramAccountID);break;case c('AdsInstagramAccountActionTypes').PAGE.HANDLE_LINK_ACCOUNT_ERROR:case c('AdsInstagramAccountActionTypes').PAGE.HANDLE_UNLINK_ACCOUNT_ERROR:this.$AdsPageInstagramAccountStore9(m.data.pageID);break;case c('AdsInstagramAccountActionTypes').PAGE.HANDLE_LINK_ACCOUNT_RESPONSE:this.$AdsPageInstagramAccountStore10(m.data.pageID,m.data.instagramAccountID,m.data.errorMessages,m.data.errorCode);break;case c('AdsInstagramAccountActionTypes').PAGE.HANDLE_UNLINK_ACCOUNT_RESPONSE:this.$AdsPageInstagramAccountStore11(m.data.pageID,m.data.error,m.data.success);break;}};k.prototype.getEligibleInstagramAccount=function(l,m){if(!c('AdsLoadStateUtils').isLoaded(m))return null;var n=m[c('GraphEdgeName').PAGE_BACKED_INSTAGRAM_ACCOUNTS],o=m[c('GraphEdgeName').INSTAGRAM_ACCOUNTS];if((!l||j)&&o&&o.data&&o.data.length>0)return o.data[0];if(n&&n.data&&n.data.length>0)return n.data[0];return null;};k.prototype.getInstagramAccountInformation=function(l,m,n){if(!c('AdsLoadStateUtils').isLoaded(l))return null;var o=null,p=c('getByPath')(l,[c('GraphEdgeName').INSTAGRAM_ACCOUNTS,'data']);if(p)o=p.find(function(r){return r.id===m;});if(!o){var q=c('getByPath')(l,[c('GraphEdgeName').PAGE_BACKED_INSTAGRAM_ACCOUNTS,'data']);if(q){o=q.find(function(r){return r.id===m;});if(o&&n)o=babelHelpers['extends']({},o,{username:n.name});}}return o;};k.prototype.getPageBackedAccountCreateState=function(l){return this.$AdsPageInstagramAccountStore1[l]?this.$AdsPageInstagramAccountStore1[l]:c('AdsLoadState').LOADED;};k.prototype.getPageLinkOrUnlinkAccountErrors=function(l){return this.$AdsPageInstagramAccountStore2[l]?this.$AdsPageInstagramAccountStore2[l]:[];};k.prototype.getPageLinkOrUnlinkState=function(l){return this.$AdsPageInstagramAccountStore3[l]?this.$AdsPageInstagramAccountStore3[l]:c('AdsLoadState').LOADED;};k.prototype.$AdsPageInstagramAccountStore4=function(l,m,n,o,p,q){if(this.$AdsPageInstagramAccountStore1[n]===c('AdsLoadState').LOADING)return;this.$AdsPageInstagramAccountStore1[n]=c('AdsLoadState').LOADING;this.__emitChange();c('AdsPageInstagramAccountDataManager').createAndUsePageBackedAccount(l,m,n,o,q,p);};k.prototype.$AdsPageInstagramAccountStore6=function(l){if(l.instagramAccountIDCallback)l.instagramAccountIDCallback(l.instagramAccountID);this.$AdsPageInstagramAccountStore1[l.pageID]=c('AdsLoadState').LOADED;this.__invalidate(l.pageID);};k.prototype.$AdsPageInstagramAccountStore5=function(l){this.$AdsPageInstagramAccountStore1[l]=c('AdsLoadState').ERROR;this.__emitChange();};k.prototype.$AdsPageInstagramAccountStore7=function(l,m,n){this.$AdsPageInstagramAccountStore2[l]=[];this.$AdsPageInstagramAccountStore3[l]=c('AdsLoadState').LOADING;c('AdsPageInstagramAccountDataManager').linkInstagramAccount(l,m,n);this.__emitChange();};k.prototype.$AdsPageInstagramAccountStore8=function(l,m){this.$AdsPageInstagramAccountStore2[l]=[];this.$AdsPageInstagramAccountStore3[l]=c('AdsLoadState').LOADING;c('AdsPageInstagramAccountDataManager').unlinkInstagramAccount(l,m);this.__emitChange();};k.prototype.$AdsPageInstagramAccountStore10=function(l,m,n,o){this.$AdsPageInstagramAccountStore3[l]=c('AdsLoadState').LOADED;if(!m){var p=n||[];if(o)p.push(c('InstagramAuthenticationErrorMessages').getMessage(o));if(p.length===0)p.push(c('InstagramAuthenticationErrorMessages').getMessage());this.$AdsPageInstagramAccountStore2[l]=p;this.__emitChange();return;}this.__invalidate(l);this.__emitChange();};k.prototype.$AdsPageInstagramAccountStore11=function(l,m,n){this.$AdsPageInstagramAccountStore3[l]=c('AdsLoadState').LOADED;if(m||!n){this.$AdsPageInstagramAccountStore2[l]=[c('InstagramAuthenticationErrorMessages').getMessage(m)];this.__emitChange();return;}this.__invalidate(l);this.__emitChange();};k.prototype.$AdsPageInstagramAccountStore9=function(l){this.$AdsPageInstagramAccountStore3[l]=c('AdsLoadState').LOADED;var m=c('InstagramAuthenticationErrorMessages').getMessage();this.$AdsPageInstagramAccountStore2[l]=[m];this.__emitChange();};f.exports=new k();},null);
__d('AdsImageDialogContainer.react',['AdsImageDialog.react','AdsImageLegacy','AdsInstagramAccountMediaListStore','AdsInstagramMediaStore','AdsLoadStateUtils','AdsPageInstagramAccountStore','FluxContainer','InstagramSlipstreamMediaContentType','PageImageListPagingStore','PageImageListStoreRecord','React'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').Component;h=babelHelpers.inherits(k,j);i=h&&h.prototype;k.getStores=function(){return [c('AdsInstagramAccountMediaListStore'),c('AdsInstagramMediaStore'),c('AdsPageInstagramAccountStore'),c('PageImageListPagingStore')];};k.calculateState=function(l,m){var n=m.pageID?c('AdsPageInstagramAccountStore').getPageLinkOrUnlinkAccountErrors(m.pageID):[],o=m.pageID?c('AdsPageInstagramAccountStore').getPageLinkOrUnlinkState(m.pageID):null,p=m.pageID?c('AdsPageInstagramAccountStore').get(m.pageID):null,q=null,r=null,s=[],t=m.pageImages?m.pageImages:[];if(m.pageID&&!m.pageImages){var u=new (c('PageImageListStoreRecord'))({pageID:m.pageID});t=c('PageImageListPagingStore').get(u).imageList;}if(p){r=c('AdsLoadStateUtils').mergeLoadStates([o,p.loadState]);q=c('AdsPageInstagramAccountStore').getEligibleInstagramAccount(false,p);if(q&&q.id){var v=c('AdsInstagramAccountMediaListStore').getFor(q.id);if(v.list&&v.list.length>0){var w=c('AdsInstagramMediaStore').getAll(v.list);w.forEach(function(x){if(c('AdsLoadStateUtils').isLoaded(x)&&x.content_type===c('InstagramSlipstreamMediaContentType').MEDIA_CONTENT_TYPE_PHOTO)s.push({url:x.display_url});});}}}return {instagramAccount:q,instagramAccountLoadState:r,instagramImages:s,pageLinkOrUnlinkAccountError:n,pageImages:t};};k.prototype.render=function(){return (c('React').createElement(c('AdsImageDialog.react'),babelHelpers['extends']({},this.props,{instagramAccount:this.state.instagramAccount,instagramAccountLoadState:this.state.instagramAccountLoadState,instagramImages:this.state.instagramImages,pageImages:this.state.pageImages,pageLinkOrUnlinkAccountError:this.state.pageLinkOrUnlinkAccountError})));};function k(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(k,{withProps:true});},null);
__d('AdsSlideshowImageUploadsContainer.react',['cx','AdsImageDialogContainer.react','AdsMediaPanelTabs','Link.react','React','ReactLayeredComponentMixin'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'AdsSlideshowImageUploadsContainer',mixins:[c('ReactLayeredComponentMixin')],propTypes:{accountID:i.string.isRequired,imageDialogShown:i.bool.isRequired,libraryImages:i.arrayOf(i.shape({url:i.string.isRequired,hash:i.string.isRequired})).isRequired,maxSelectedImages:i.number.isRequired,pageID:i.oneOfType([i.oneOf([null,undefined]),i.string]),selectedImages:i.arrayOf(i.shape({height:i.number,isLoading:i.bool.isRequired,key:i.string.isRequired,url:i.string,width:i.number})).isRequired,onImageDialogClose:i.func.isRequired,onImageDialogShown:i.func.isRequired,onSelectImagesConfirm:i.func.isRequired},renderLayers:function(){return this.props.imageDialogShown?{imageDialog:c('React').createElement(c('AdsImageDialogContainer.react'),{accountID:this.props.accountID,libraryImages:this.props.libraryImages,maxSelectedImages:this.props.maxSelectedImages,pageID:this.props.pageID,selectedImages:this.props.selectedImages,tabKeys:[c('AdsMediaPanelTabs').UPLOAD,c('AdsMediaPanelTabs').LIBRARY],useInstagramImageCreative:false,onCancel:this.props.onImageDialogClose,onSelect:this.props.onSelectImagesConfirm})}:null;},render:function(){return (c('React').createElement('span',{className:"_38i2",onClick:this.props.onImageDialogShown},c('React').createElement(c('Link.react'),{className:"_10ct"})));}});f.exports=j;},null);
__d('AdsSlideshowUploader',['AdsVideoEncodingAsyncNotifier','AdsGraphAPI','SlideshowUtil','abstractMethod'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();h.prototype.__handleEncodingSuccess=function(i){c('abstractMethod')('AdsSlideshowUploader','__handleEncodingSuccess');};h.prototype.__handleUploadFailure=function(i){c('abstractMethod')('AdsSlideshowUploader','__handleUploadFailure');};h.prototype.upload=function(i,j,k,l,m,n){var o=c('SlideshowUtil').getDurationParam(j.length,k,l);if(n)n=c('SlideshowUtil').getAudioFileParam(n,k);c('AdsGraphAPI').getWithGeneralMigration(f.id).adaccount(i).edge('advideos').post({slideshow_spec:{duration_ms:o.durationInMS,images_urls:j,images_crops:m,transition_ms:o.transitionInMS,audio_file:n}}).done(function(p){return this.$AdsSlideshowUploader1(p.id,i);}.bind(this),function(p){return this.__handleUploadFailure(p);}.bind(this));};h.prototype.$AdsSlideshowUploader1=function(i,j){var k=new (c('AdsVideoEncodingAsyncNotifier'))(i);k.setOnStatusUpdateListener(function(){return this.$AdsSlideshowUploader2();}.bind(this));k.setOnFailedListener(function(l){return this.__handleUploadFailure(l);}.bind(this));k.setOnSuccessListener(function(l){return this.__handleEncodingSuccess(l,j);}.bind(this));k.start();};h.prototype.$AdsSlideshowUploader2=function(){};function h(){}f.exports=h;},null);