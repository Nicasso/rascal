<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.4">
<title>Rascal</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
body{-webkit-font-smoothing:antialiased}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
body{tab-size:4}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
</head>
<body id="Rascal" class="article toc2 toc-left">
<div id="header">
<h1>Rascal</h1>
<div id="toc" class="toc2">
<div id="toctitle">Rascal</div>
<ul class="sectlevel1">
<li><a href="#Rascal-Motivation">1. Motivation</a></li>
<li><a href="#Rascal-InstallingAndRunning">2. Installing and Running</a>
<ul class="sectlevel2">
<li><a href="#InstallingAndRunning-Installing">2.1. Installing</a></li>
<li><a href="#InstallingAndRunning-Running">2.2. Running</a></li>
</ul>
</li>
<li><a href="#Rascal-Concepts">3. Concepts</a>
<ul class="sectlevel2">
<li><a href="#Concepts-StaticTyping">3.1. Static Typing</a></li>
<li><a href="#Concepts-Datatypes">3.2. Datatypes</a></li>
<li><a href="#Concepts-ImmutableValues">3.3. Immutable Values</a></li>
<li><a href="#Concepts-Comprehensions">3.4. Comprehensions</a></li>
<li><a href="#Concepts-PatternMatching">3.5. Pattern Matching</a></li>
<li><a href="#Concepts-ControlStructures">3.6. Control Structures</a></li>
<li><a href="#Concepts-CaseDistinction">3.7. Case Distinction</a></li>
<li><a href="#Concepts-Visiting">3.8. Visiting</a></li>
<li><a href="#Concepts-Functions">3.9. Functions</a></li>
<li><a href="#Concepts-SyntaxDefinitionAndParsing">3.10. Syntax Definition and Parsing</a></li>
<li><a href="#Concepts-RewriteRules">3.11. RewriteRules</a></li>
<li><a href="#Concepts-IDEConstruction">3.12. IDE Construction</a></li>
<li><a href="#Concepts-CodeModels">3.13. Code Models</a></li>
<li><a href="#Concepts-Enumerating">3.14. Enumerating</a></li>
</ul>
</li>
<li><a href="#Rascal-Declarations">4. Declarations</a>
<ul class="sectlevel2">
<li><a href="#Declarations-Module">4.1. Module Declaration</a></li>
<li><a href="#Declarations-Import">4.2. Import</a></li>
<li><a href="#Declarations-Program">4.3. Program</a></li>
<li><a href="#Declarations-StaticTyping">4.4. StaticTyping</a></li>
<li><a href="#Declarations-AlgebraicDataType">4.5. Algebraic Data Type</a></li>
<li><a href="#Declarations-Variable">4.6. Variable Declaration</a></li>
<li><a href="#Declarations-Function">4.7. Function Declaration</a></li>
<li><a href="#Declarations-SyntaxDefinition">4.8. Syntax Definition</a></li>
<li><a href="#Declarations-Alias">4.9. Alias Declaration</a></li>
<li><a href="#Declarations-Annotation">4.10. Annotation Declaration</a></li>
<li><a href="#Declarations-Tag">4.11. Tag Declaration</a></li>
</ul>
</li>
<li><a href="#Rascal-Patterns">5. Patterns</a>
<ul class="sectlevel2">
<li><a href="#Patterns-Abstract">5.1. Abstract Patterns</a></li>
<li><a href="#Patterns-Concrete">5.2. Concrete Patterns</a></li>
<li><a href="#Patterns-PatternWithAction">5.3. Pattern With Action</a></li>
<li><a href="#Patterns-Regular">5.4. Regular Expression Pattern</a></li>
</ul>
</li>
<li><a href="#Rascal-Expressions">6. Expressions</a>
<ul class="sectlevel2">
<li><a href="#Expressions-Values">6.1. Values</a></li>
<li><a href="#Expressions-Operators">6.2. Operators</a></li>
<li><a href="#Expressions-Call">6.3. Call</a></li>
<li><a href="#Expressions-Comprehensions">6.4. Comprehensions</a></li>
<li><a href="#Expressions-ConcreteSyntax">6.5. Concrete Syntax</a></li>
<li><a href="#Expressions-Reducer">6.6. Reducer</a></li>
<li><a href="#Expressions-Replacement">6.7. Replacement</a></li>
<li><a href="#Expressions-Selection">6.8. Selection</a></li>
<li><a href="#Expressions-StatementAsExpression">6.9. Statement as Expression</a></li>
<li><a href="#Expressions-Visit">6.10. Visit</a></li>
</ul>
</li>
<li><a href="#Rascal-Statements">7. Statements</a>
<ul class="sectlevel2">
<li><a href="#Statements-Append">7.1. Append</a></li>
<li><a href="#Statements-Assert">7.2. Assert</a></li>
<li><a href="#Statements-Assignment">7.3. Assignment</a></li>
<li><a href="#Statements-Block">7.4. Block</a></li>
<li><a href="#Statements-Break">7.5. Break</a></li>
<li><a href="#Statements-Continue">7.6. Continue</a></li>
<li><a href="#Statements-Do">7.7. Do</a></li>
<li><a href="#Statements-Fail">7.8. Fail</a></li>
<li><a href="#Statements-For">7.9. For</a></li>
<li><a href="#Statements-If">7.10. If</a></li>
<li><a href="#Statements-Insert">7.11. Insert</a></li>
<li><a href="#Statements-Return">7.12. Return</a></li>
<li><a href="#Statements-Solve">7.13. Solve</a></li>
<li><a href="#Statements-Switch">7.14. Switch</a></li>
<li><a href="#Statements-Test">7.15. Test</a></li>
<li><a href="#Statements-Throw">7.16. Throw</a></li>
<li><a href="#Statements-TryCatch">7.17. Try Catch</a></li>
<li><a href="#Statements-While">7.18. While</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Rascal is a powerful but relatively simple meta-programming language.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>What you need to know about Rascal is this:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Which problems can Rascal help you to solve? Check out the <a href="#Rascal-Motivation">Motivation</a> for Rascal and the <a href="../EASY/EASY.html">EASY paradigm</a>.</p>
</li>
<li>
<p>How to get started? Read <a href="#Rascal-InstallingAndRunning">Installing and Running</a>.</p>
</li>
<li>
<p>What are the basic constructs in Rascal? Learn about its basic <a href="#Rascal-Concepts">Concepts</a>.</p>
</li>
<li>
<p>What is the complete reference to Rascal? Read or search through the documentation for
<a href="#Rascal-Expressions">Expressions</a>, <a href="#Rascal-Statements">Statements</a> or <a href="#Rascal-Declarations">Declarations</a>.</p>
</li>
<li>
<p>What standard functions does Rascal provide? Read or search through the <a href="../Libraries/Libraries.html">Rascal Libraries</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>What are the key distinguishing features of Rascal?</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#Concepts-PatternMatching">Pattern Matching</a> to express query and search in (models of) programs.</p>
</li>
<li>
<p><a href="#Concepts-Visiting">Visiting</a> to traverse and transform (models of) meta programs.</p>
</li>
<li>
<p><a href="#Concepts-SyntaxDefinitionAndParsing">Syntax Definition and Parsing</a> to effectively produce parsers for programming languages and other formats.</p>
</li>
<li>
<p><a href="#Expressions-ConcreteSyntax">Concrete Syntax</a> to analyse and transform source code using patterns in the programming language that is manipulated.</p>
</li>
<li>
<p>Rapid <a href="#Concepts-IDEConstruction">IDE Construction</a> using <a href="http://www.eclipse.org/imp/">Eclipse IMP</a> and other reusable aspects of meta-programming can be found
in the <a href="../Libraries/Libraries.html">Rascal Libraries</a>.</p>
</li>
<li>
<p>Simple value based <a href="#Concepts-CodeModels">Code Models</a> to represent any kind of fact about source code using either hierarchical or graph-like modeling constructs.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Read examples of Rascal code in <a href="../Recipes/Recipes.html">Recipes</a>. The Rascal <a href="../Libraries/Libraries.html">Rascal Libraries</a> contain many examples of Rascal code.
You will also find example code on almost every page in this tutor environment.</p>
</div>
<div class="ulist">
<div class="title">Benefits</div>
<ul>
<li>
<p>Rascal has everything you need for any kind of meta program you want to write. See <a href="#Rascal-Motivation">Motivation</a>.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Pitfalls</div>
<ul>
<li>
<p>Rascal is a procedural/functional language with immutable data. Do not confuse this with object-oriented programming.</p>
</li>
<li>
<p>Rascal allows you to write highly imperative code, but it has declarative constructs that lead to shorter and more readable code.</p>
</li>
<li>
<p>Rascal execution is sometimes slow; we are working on more optimization.</p>
</li>
<li>
<p>Rascal has a static type system, but the type-checker is not yet finished; currently types are checked at run-time.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Rascal-Motivation">1. Motivation</h2>
<div class="sectionbody">
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Rascal is a new language for <em>meta-programming</em>, this is the activity of writing meta-programs.
Using Rascal you create programs that read, analyse, transform, generate and/or visualize other programs.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p><em>Meta-programs</em> are programs that analyze, transform or generate other programs. Ordinary programs work on data; meta-programs work on programs.</p>
</div>
<div class="paragraph">
<p>The <em>range of programs</em> to which meta-programming can be applied is large: from programs in standard languages like C and Java to domain-specific languages for describing high-level system models or applications in specialized areas like gaming or finance. In some cases, even test results or performance data are used as input for meta-programs.</p>
</div>
<div class="paragraph">
<p>The <em>range of kinds of meta programs</em> that can be applied is also large. There are simple meta programs that generate boilerplate code from a list of items. There are complex meta programs that reverse engineer and statically analyse a big software system before visualizing the results. The point of Rascal is that in all these kinds of meta programs one needs similar operations and similar data-types.</p>
</div>
<div class="paragraph">
<p>The <em>point of Rascal</em> is to provide a reusable set of primitives to build and manipulate program representations. The point is <em>not</em> to be or provide a unified representation of programs to let generic algorithms operate on. In meta programming the devil is often in the details. Rascal makes sure to not a priori abstract from the important details programming language syntax and semantics.</p>
</div>
<div class="paragraph">
<p><em>Rascal is a domain specific programming language</em>. We emphasize programming here because Rascal is intended as an engineering tool for programmers that need to construct meta programs. Rascal programs allow running, inspecting, debugging, tracing, profiling, etc. just as normal programs do. The skills of any good programmer are enough to easily write good Rascal programs.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Typical applications of Rascal are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Refactoring of Java source code.</p>
</li>
<li>
<p>Analyzing PHP code.</p>
</li>
<li>
<p>Searching for buffer overflows in C code.</p>
</li>
<li>
<p>Analyzing the version history of a large software project.</p>
</li>
<li>
<p>Implementing a <em>domain-specific language</em> (DSL) for describing games or business processes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All these cases involve a form of meta-programming: software programs (in a wide sense) are the objects-of-interest
that are being analyzed, transformed or generated. The Rascal language is designed for meta-programming following
the <a href="../EASY/EASY.html">EASY paradigm</a>. It can be applied in domains ranging from compiler construction and implementing domain-specific languages to constraint solving and software renovation.</p>
</div>
<div class="paragraph">
<p>Since representation of information is central to the approach, Rascal provides a rich set of built-in data types. To support extraction and analysis, parsing and advanced pattern matching are provided. High-level control structures make analysis and synthesis of complex data structures simple.</p>
</div>
<div class="ulist">
<div class="title">Benefits</div>
<ul>
<li>
<p><em>Familiar syntax</em> in a <em>what-you-see is-what-you-get</em> style is used even for sophisticated concepts
and this makes the language easy to learn and easy to use.</p>
</li>
<li>
<p><em>Sophisticated built-in data types</em> provide standard solutions for many meta-programming problems.</p>
</li>
<li>
<p><em>Safety</em> is achieved by finding most errors before the program is executed and by making common errors
like missing initializations or invalid pointers impossible.</p>
</li>
<li>
<p><em>Local type inference</em> makes local variable declarations redundant.</p>
</li>
<li>
<p><em>Pattern matching</em> can be used to analyze all complex data structures.</p>
</li>
<li>
<p><em>Syntax definitions</em> make it possible to define new and existing languages and to write tools for them.</p>
</li>
<li>
<p><em>Visiting</em> makes it easy to traverse data structures and to extract information from them or to synthesize results.</p>
</li>
<li>
<p><em>Templates</em> enable easy code generation.</p>
</li>
<li>
<p><em>Functions as values</em> permit programming styles with high re-use.</p>
</li>
<li>
<p><em>Generic types</em> allow writing functions that are applicable for many different types.</p>
</li>
<li>
<p><em>Eclipse integration</em> makes Rascal programming a breeze. All familiar tools are at your fingertips.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Pitfalls</div>
<ul>
<li>
<p>Rascal programs are not yet highly optimized so execution maybe slow for some programs.</p>
</li>
<li>
<p>At the time of writing, this checking is done during execution, but we are working on this.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Rascal-InstallingAndRunning">2. Installing and Running</h2>
<div class="sectionbody">
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Instructions to install and run Rascal.</p>
</div>
<div class="sect2">
<h3 id="InstallingAndRunning-Installing">2.1. Installing</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>The latest download and installation instructions can be found at the <a href="http://www.rascal-mpl.org">Rascal Website</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="InstallingAndRunning-Running">2.2. Running</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Running the Rascal system.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>The Rascal system comes in two flavours: a command line version and a version integrated in Eclipse.</p>
</div>
<div class="paragraph">
<p>At the command line the Rascal system can be invoked by typing the command <strong>rascal</strong>.
Next, the Rascal prompt <strong>rascal&gt;</strong> appears and you can start typing commands (declarations, statements, expressions).
To simplify interactive use, semicolons (<code>;</code>) that end commands may be omitted at the top level.</p>
</div>
<div class="paragraph">
<p>In the Eclipse version, Rascal modules can be edited and a command console is also available.</p>
</div>
<div class="sect3">
<h4 id="Running-Help">2.2.1. Help</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Help facilities.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Various forms of help are available.</p>
</div>
<div class="paragraph">
<p>At the command console, type <strong>:help</strong> to get a list of help commands.</p>
</div>
<div class="paragraph">
<p>In the Eclipse environment, select the menu <code>Rascal &gt; Start Tutor</code> to start
the interactive Rascal Tutor.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;:help
ok</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Rascal-Concepts">3. Concepts</h2>
<div class="sectionbody">
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Introduction to the main concepts of the Rascal language.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Rascal has a statically checked type system that prevents type errors and uninitialized variables at runtime.
There are no runtime type casts as in Java and there are therefore less opportunities for run-time errors.
The language provides higher-order, parametric polymorphism.
A type aliasing mechanism allows documenting specific uses of a type.
Built-in operators are heavily overloaded.
For instance, the operator <code>+</code> is used for addition on integers and reals but also for list concatenation,
set union and the like.</p>
</div>
<div class="paragraph">
<p>The flow of Rascal program execution is completely explicit. Boolean expressions determine choices that drive the control structures. Rewrite rules form the only exception to the explicit control flow principle. Only local backtracking is provided in the context of boolean expressions and pattern matching; side effects are undone in case of backtracking.</p>
</div>
<div class="paragraph">
<p>Most language concepts are described separately but some features we just mention here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Rascal programs consist of modules that are organized in packages.</p>
</li>
<li>
<p>Modules can import other modules.</p>
</li>
<li>
<p>The visibility of entities declared in modules can be controlled using public/private modifiers.</p>
</li>
<li>
<p>Data structures may have annotations that can be explicitly used and modified.</p>
</li>
<li>
<p>There is an extensive library for built-in datatypes, input/output, fact extraction from Java source code, visualization, and more.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here is a brief summary of the concepts to be discussed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#Concepts-StaticTyping">Static Typing</a>: Static type checking.</p>
</li>
<li>
<p><a href="#Concepts-Datatypes">Datatypes</a>: Built-in and user-defined datatypes.</p>
</li>
<li>
<p><a href="#Concepts-ImmutableValues">Immutable Values</a>: Immutable values.</p>
</li>
<li>
<p><a href="#Concepts-Comprehensions">Comprehensions</a>: Comprehensions for generating values.</p>
</li>
<li>
<p><a href="#Concepts-PatternMatching">Pattern Matching</a>: Pattern matching.</p>
</li>
<li>
<p><a href="#Concepts-ControlStructures">Control Structures</a>: Success-directed control structures.</p>
</li>
<li>
<p><a href="#Concepts-CaseDistinction">Case Distinction</a>: Case distinction via pattern matching.</p>
</li>
<li>
<p><a href="#Concepts-Visiting">Visiting</a>: Visiting tree structures and arbitrary values.</p>
<div class="ulist">
<ul>
<li>
<p><a href="#Enumerators-EquationSolving">Equation Solving</a>: Solving equations by fixed-point iteration.</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="#Concepts-Functions">Functions</a>: Functions and pattern-directed invocation.</p>
</li>
<li>
<p><a href="#Concepts-SyntaxDefinitionAndParsing">Syntax Definition and Parsing</a>: Syntax definition and parser generation for new languages.</p>
</li>
<li>
<p><a href="#Concepts-RewriteRules">RewriteRules</a>: Rewrite rules (deprecated).</p>
</li>
<li>
<p><a href="#Concepts-IDEConstruction">IDE Construction</a>: Extend an IDE with interactive, language-specific, features (Eclipse only).</p>
</li>
<li>
<p><a href="#Concepts-CodeModels">Code Models</a>: code models are abstract representations of source code.</p>
</li>
<li>
<p><a href="#Concepts-Enumerating">Enumerating</a>: Enumerating values.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="Concepts-StaticTyping">3.1. Static Typing</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Static type checking.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="Concepts/StaticTyping/type-lattice.png" alt="type lattice" width="400">
</div>
<div class="title">Figure 1. Type Lattice</div>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Rascal is based on static typing, this means that as many errors and inconsistencies as possible are spotted before the program is executed. The types are ordered in a so-called <em>type lattice</em> shown in the figure.</p>
</div>
<div class="paragraph">
<p>The arrows describe a <em>subtype-of</em> relation between types. The type <code>void</code> is the <em>smallest</em> type and
is included in all other types and the type <code>value</code> is the <em>largest</em> type that includes all other types.
We also see that <code>rel</code> is a subtype of <code>set</code> and that each ADT is a subtype of <code>node</code>.
A special role is played by the datatype <code>Tree</code> that is the generic type of syntax trees.
Syntax trees for specific languages are all subtypes of <code>Tree</code>. As a result, syntax trees can be addressed at two levels:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>in a generic fashion as <code>Tree</code> and,</p>
</li>
<li>
<p>in a specific fashion as a more precisely typed syntax tree.
Finally, each <code>alias</code> is structurally equivalent to one or more specific other types.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Rascal does not provide an explicit casting mechanism, but pattern matching can play that role.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Some example can illustrate the above.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;int I = 3;
int: 3</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since I is declared as type <code>int</code>, we cannot assign a <code>real</code> value to it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;I = 3.5;
[error] Unable to bind subject type real to assignable IN 'I = 3.5;'</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;num N = 3;
int: 3</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since N is declared as type <code>num</code>, we can assign both <code>int</code> and <code>real</code> values to it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;N = 3.5;
real: 3.5</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since all types are a subtype of type <code>value</code>, one can assign values of any type to a variable declared as <code>value</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;value V = 3;
int: 3
rascal&gt;V = "abc";
str: "abc"
rascal&gt;V = false;
bool: false</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can use pattern matching to classify the actual type of a value:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;str classify(value V){
&gt;&gt;&gt;&gt;&gt;&gt;&gt;  switch(V){
&gt;&gt;&gt;&gt;&gt;&gt;&gt;    case str S: return "A string";
&gt;&gt;&gt;&gt;&gt;&gt;&gt;    case bool B: return "A Boolean";
&gt;&gt;&gt;&gt;&gt;&gt;&gt;    default: return "Another type";
&gt;&gt;&gt;&gt;&gt;&gt;&gt;  }
&gt;&gt;&gt;&gt;&gt;&gt;&gt;}
ok
rascal&gt;classify(V);
str: "Another type"
rascal&gt;V = 3.5;
real: 3.5
rascal&gt;classify(V);
str: "Another type"</code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition to these standard examples, it is interesting that all <a href="#Declarations-AlgebraicDataType">Algebraic Data Type</a>s are subtypes of type <code>node</code>.
Let&#8217;s introduce a simple <code>Color</code> data type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;data Color = red(int level) | blue(int level);
ok</code></pre>
</div>
</div>
<div class="paragraph">
<p>Unsurprisingly, we have:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;Color C = red(3);
Color: red(3)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Due to subtyping, we can also have:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;node ND = red(3);
Color: red(3)</code></pre>
</div>
</div>
<div class="paragraph">
<p>One example of the actual application of subtypes can be found in <a href="../Recipes/Recipes.html#CountConstructors">Count Constructors</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Concepts-Datatypes">3.2. Datatypes</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Built-in and user-defined datatypes.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Rascal provides a rich set of datatypes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#Values-Boolean">Boolean</a> (<code>bool</code>).</p>
</li>
<li>
<p>Infinite precision <a href="#Values-Integer">Integer</a> (<code>int</code>), <a href="#Values-Real">real</a> (<code>real</code>), and <a href="#Values-Number">Number</a> (<code>num</code>).</p>
</li>
<li>
<p><a href="#Values-String">String</a>s (<code>str</code>) that can act as templates with embedded expressions and statements.</p>
</li>
<li>
<p>Source code <a href="#Values-Location">Location</a>s (<code>loc</code>) based on an extension of Universal Resource Identifiers (URI) that allow precise description of text areas in local and remote files.</p>
</li>
<li>
<p>Date and time values (<a href="#Values-DateTime">DateTime</a>, <code>datetime</code>).</p>
</li>
<li>
<p><a href="#Values-List">List</a> (<code>list</code>).</p>
</li>
<li>
<p><a href="#Values-Tuple">Tuple</a> (<code>tuple</code>).</p>
</li>
<li>
<p><a href="#Values-Set">Set</a> (<code>set</code>).</p>
</li>
<li>
<p><a href="#Values-Map">Map</a> (<code>map</code>)</p>
</li>
<li>
<p><a href="#Values-Relation">Relation</a> (<code>rel</code>).</p>
</li>
<li>
<p>Untyped tree structures (<a href="#Values-Node">Node</a>, <code>node</code>).</p>
</li>
<li>
<p>User-defined algebraic datatypes (<a href="#Declarations-AlgebraicDataType">Algebraic Data Type</a>], <code>data</code>) allow the introduction of problem-specific types and are a subtype of node.
This makes it possible to have typed
and untyped views on the same data.
A special case are syntax trees that are the result of parsing source files are represented
as datatypes (<code>Tree</code>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There is a wealth of built-in operators and library functions available on the standard datatypes.</p>
</div>
<div class="paragraph">
<p>These built-in datatypes are closely related to each other:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In a list all elements have the same static type and the order of elements matters. A list may contain the same value more than once.</p>
</li>
<li>
<p>In a set all elements have the same static type and the order of elements does not matter.
A set contains an element only once. In other words, duplicate elements are eliminated
and no matter how many times an element is added to a set, it will occur in it only once.</p>
</li>
<li>
<p>In a tuple all elements (may) have a different static type. Each element of a tuple may have a label that can be used to select that
element of the tuple.</p>
</li>
<li>
<p>A relation is a set of tuples which all have the same static tuple type.</p>
</li>
<li>
<p>A map is an associative table of (key, value) pairs. Key and value (may) have different static
type and a key can only be associated with a value once.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Here are some examples of the built-in data types:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><em>Type</em></th>
<th class="tableblock halign-left valign-top"><em>Examples</em></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code>, <code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>11, 101, 1-11, 1123456789</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1.01, 11.0232e201, 1-25.5</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>str</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"abc"</code>, <code>"first\nnext"</code>, <code>"result: &lt;X&gt;"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>loc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>|file:///etc/passwd|</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dateTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$2101-09-05T07:16:19.714+0200$</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tuple[<em>T<sub>1</sub>,&#8230;&#8203;,_T<sub>n</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;1,2&gt;</code>, <code>&lt;"john", 43, true&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[<em>T</em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[]</code>, <code>[1]</code>, <code>[1,2,3]</code>, <code>[true, 2, "abc"]</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[<em>T</em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{}</code>, <code>{1,2,3,5,7}</code>, <code>{"john", 4.0}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rel[<em>T<sub>1</sub>,&#8230;&#8203;,_T<sub>n</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{&lt;1,2&gt;,&lt;2,3&gt;,&lt;1,3&gt;}</code>, <code>{&lt;1,10,100&gt;, &lt;2,20,200&gt;}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>map[<em>T</em>, <em>U</em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>()</code>, <code>(1:true, 2:false)</code>, <code>("a":1, "b":2)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>node</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f()</code>, <code>add(x,y)</code>, <code>g("abc", [2,3,4])</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>A fragment of the datatype that defines the abstract syntax for statements (assignment, if, while) in a programming language would look as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">data STAT = asgStat(Id name, EXP exp)
          | ifStat(EXP exp,list[STAT] thenpart,
                           list[STAT] elsepart)
          | whileStat(EXP exp, list[STAT] body)
          ;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here are some examples how Rascal responds to values of the above built-in datatypes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;true;
bool: true
rascal&gt;101;
int: 101
rascal&gt;3.14;
real: 3.14
rascal&gt;"Rascal";
str: "Rascal"
rascal&gt;|file:///etc/passwd|;
loc: |file:///etc/passwd|
rascal&gt;$2101-09-05$;
datetime: $2101-09-05$
rascal&gt;[30, 20, 10];
list[int]: [30,20,10]
rascal&gt;&lt;"Rascal", 100000&gt;;
tuple[str,int]: &lt;"Rascal",100000&gt;
rascal&gt;{"apples", "oranges", "bananas"};
set[str]: {"oranges","bananas","apples"}
rascal&gt;{&lt;"apples", 10, 15&gt;, &lt;"oranges", 5, 7&gt;, &lt;"bananas", 9, 11&gt;};
rel[str,int,int]: {
  &lt;"apples",10,15&gt;,
  &lt;"bananas",9,11&gt;,
  &lt;"oranges",5,7&gt;
}
rascal&gt;("apples" : 100, "oranges": 150, "bananas": 75);
map[str, int]: ("oranges":150,"bananas":75,"apples":100)
rascal&gt;"abc"(1, 2, 3);
node: "abc"(1,2,3)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Concepts-ImmutableValues">3.3. Immutable Values</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Immutable values.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Values are the basic building blocks of a language and the type of values determines how they may be used.</p>
</div>
<div class="paragraph">
<p>Rascal is a <em>value-oriented language</em>. This means that values are immutable and are always freshly constructed from existing parts.
For instance, replacing an element in a list does not modify the original list but produces a new list that only differs
from the original one in the modified position.</p>
</div>
<div class="paragraph">
<p>The language also provides variables. A value can be associated with a variable as the result of an explicit assignment statement: during the lifetime of a variable different (immutable) values may be assignment to it. Other ways to associate a value with a variable is by way of function calls (binding of formal parameters to actual values) and as the result of a successful pattern match.</p>
</div>
<div class="paragraph">
<p>The approach that values are immutable and that variables can be associated with different immutable values during their lifetime avoids
sharing and aliasing problems that exist in many languages.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>First we, create a list value and assign it to two variables <code>L</code> and <code>M</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;L = [1, 2, 3];
list[int]: [1,2,3]
rascal&gt;M = L;
list[int]: [1,2,3]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next we assign a new value to the first element of the list. The effect is that a new list value <code>[10, 2, 3]</code> is constructed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;L[0] = 10;
list[int]: [10,2,3]</code></pre>
</div>
</div>
<div class="paragraph">
<p>L is now associated with this new value:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;L;
list[int]: [1,2,3]</code></pre>
</div>
</div>
<div class="paragraph">
<p>But <code>M</code> is still associated with the original, unmodified, value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;M;
list[int]: [1,2,3]</code></pre>
</div>
</div>
<div class="paragraph">
<p>In pointer-based languages and in object-oriented languages the change to the original value of <code>L</code> would also be visible
via <code>M</code>.</p>
</div>
<div class="paragraph">
<p>String values are, like all other values, also immutable. Let&#8217;s experiment with the <a href="../Libraries/Libraries.html#String-replaceAll">replaceAll</a> function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import String;
ok
rascal&gt;replaceAll("abracadabra", "a", "A");
str: "AbrAcAdAbrA"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now assign to variables <code>S</code> and <code>T</code> the string <code>"abracadabra"</code> and let&#8217;s see what happens:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;S = "abracadabra";
str: "abracadabra"
rascal&gt;T = S;
str: "abracadabra"
rascal&gt;S = replaceAll("abracadabra", "a", "A");
str: "AbrAcAdAbrA"
rascal&gt;S;
str: "abracadabra"
rascal&gt;T;
str: "abracadabra"</code></pre>
</div>
</div>
<div class="paragraph">
<p>To summarize: all values are immutable and variables can during their lifetime be associated with different immutable values.</p>
</div>
<div class="ulist">
<div class="title">Benefits</div>
<ul>
<li>
<p>Immutable values contribute to referential transparence.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Pitfalls</div>
<ul>
<li>
<p>Immutable values maybe less efficient than mutable ones.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Concepts-Comprehensions">3.4. Comprehensions</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Comprehensions for generating values.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Comprehensions are a notation inspired by mathematical <a href="http://en.wikipedia.org/wiki/Set-builder_notation">set-builder notation</a>
and <a href="http://en.wikipedia.org/wiki/List_comprehension">list comprehensions</a>
that help to write succinct definitions of lists and sets. They are also inspired by queries as found in a language like SQL.</p>
</div>
<div class="paragraph">
<p>Rascal generalizes comprehensions in various ways. Comprehensions exist for lists, sets and maps.
A comprehension consists of an expression that determines the successive elements to be included in the
result and a list of enumerators and tests (boolean expressions).
The enumerators produce values and the tests filter them.</p>
</div>
<div class="paragraph">
<p>See <a href="#Expressions-Comprehensions">Comprehensions</a>,
<a href="#List-Comprehension">List Comprehension</a>,
<a href="#Set-Comprehension">Set Comprehension</a>, and <a href="#Map-Comprehension">Map Comprehension</a> for details.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>A standard example is</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;{ x * x | int x &lt;- [1 .. 10], x % 3 == 0 }
set[int]: {9,81,36}</code></pre>
</div>
</div>
<div class="paragraph">
<p>i.e., the squares of the integers in the range <code>[ 1 .. 10 ]</code> that
are divisible by 3. A more intriguing example (that we do not give in full detail) is</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">{name | /asgStat(Id name, _) &lt;- P}</code></pre>
</div>
</div>
<div class="paragraph">
<p>which traverses program <code>P</code> (using the <em>descendant match</em> operator <code>/</code>, see <a href="#Patterns-Abstract">Abstract Patterns</a>) and constructs a set of all identifiers that occur on the left hand
side of assignment statements in <code>P</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Concepts-PatternMatching">3.5. Pattern Matching</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Pattern matching.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Pattern matching determines whether a given pattern matches a given value.
The outcome can be <code>false</code> (no match) or <code>true</code> (a match). A pattern match that succeeds may bind values to variables.</p>
</div>
<div class="paragraph">
<p>Pattern matching is <em>the</em> mechanism for case distinction (<a href="#Statements-Switch">Switch</a> statement) and search (<a href="#Expressions-Visit">Visit</a> statement) in Rascal. Patterns can also be used in an explicit match operator <code>:=</code> and can then be part of larger boolean expressions. Since a pattern match may have more than one solution, local backtracking over the alternatives of a match is provided. Patterns can also be used in <a href="#Comprehensions-Enumerator">Enumerator</a>s and control structures like <a href="#Statements-For">For</a> and <a href="#Statements-While">While</a> statement.</p>
</div>
<div class="paragraph">
<p>A very rich pattern language is provided that includes string matching based on regular expressions, matching of abstract patterns, and matching of concrete syntax patterns. Some of the features that are provided are list (associative) matching, set (associative, commutative, idempotent) matching, and deep matching of descendant patterns. All these forms of matching can be used in a single pattern and can be nested. Patterns may contain variables that are bound when the match is successful. Anonymous (don&#8217;t care) positions are indicated by the underscore (<code>_</code>). See <a href="#Rascal-Patterns">Patterns</a> for more details.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Here is a <em>regular expression</em> that matches a line of text, finds the first alphanumeric word in it, and extracts the word itself as well as the before and after it (<code>\W</code> matches all non-word characters; <code>\w</code> matches all word characters):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">/^&lt;before:\W*&gt;&lt;word:\w+&gt;&lt;after:.*$&gt;/</code></pre>
</div>
</div>
<div class="paragraph">
<p>Regular expressions follow the Java regular expression syntax with one exception: instead of using numbered groups to refer to parts of the subject string that have been matched by a part of the regular expression we use the notation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal"><<em>Name</em>:_RegularExpression_></code></pre>
</div>
</div>
<div class="paragraph">
<p>If <code><em>RegularExpression</em></code> matches, the matched substring is assigned to string variable <code><em>Name</em></code>.</p>
</div>
<div class="paragraph">
<p>The following abstract pattern matches the abstract syntax of a while statement defined earlier:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">whileStat(EXP Exp, list[STAT] Stats)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Variables in a pattern are either explicitly declared in the pattern itself---as done in the example---or they may be declared in the context in which the pattern occurs. So-called multi-variables in list and set patterns are declared by a <code><strong></code> suffix: <code>X</strong></code> is thus
an abbreviation for <code>list[&#8230;&#8203;] X</code> or <code>set[&#8230;&#8203;] X</code>, where the precise element type depends on the context. The above pattern can then be written as</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">whileStat(EXP Exp, Stats*)</code></pre>
</div>
</div>
<div class="paragraph">
<p>or, if you are not interested in the actual value of the statements as</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">whileStat(EXP Exp, _*)</code></pre>
</div>
</div>
<div class="paragraph">
<p>When there is a grammar for this example language, we can also write concrete patterns as we will see in <a href="#Patterns-Concrete">Concrete Patterns</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Concepts-ControlStructures">3.6. Control Structures</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Success-directed control structures.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Control structures like <a href="#Statements-If">If</a>, <a href="#Statements-While">While</a> and <a href="#Statements-For">For</a> statement are driven by Boolean expressions.
Actually, combinations of generators and Boolean expressions can be used to drive the control structures.
In the latter case, the Boolean expression is executed for each generated value.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>A classical if statement:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">if(N &lt;= 0)
     return 1;
  else
     return N * fac(N - 1);</code></pre>
</div>
</div>
<div class="paragraph">
<p>A combination of a generator and a test:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">for(/asgStat(Id name, _) &lt;- P, size(name) &gt; 10){
    println(name);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This statement prints all identifiers in assignment statements (<code>asgStat</code>) that consist of more than 10 characters.</p>
</div>
</div>
<div class="sect2">
<h3 id="Concepts-CaseDistinction">3.7. Case Distinction</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Case distinction via pattern matching.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>The switch statement as known from C and Java is generalized: the subject value to switch on may be an
arbitrary value and the cases are arbitrary patterns followed by a statement.
Each case is comparable to a <em>transaction</em>: when the pattern succeeds and the following statement is
executed successfully, all changes to variables made by the statement are committed and thus become permanent.
The variables bound by the pattern are always local to the statement associated with the case.
When a match fails or when the associated statement fails, a <em>rollback</em> takes place and all side-effects are undone.
External side-effects like I/O and side-effects in user-defined Java code are not undone.</p>
</div>
<div class="paragraph">
<p>See <a href="#Statements-Switch">Switch</a>,<a href="#Expressions-Visit">Visit</a> and <a href="#Patterns-PatternWithAction">Pattern With Action</a> for more details.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>We use the <a href="../Recipes/Recipes.html#Common-ColoredTrees">ColoredTrees from Recipes</a> datatype as example and use a switch to
distinguish between red and black nodes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;data ColoredTree =
&gt;&gt;&gt;&gt;&gt;&gt;&gt;      leaf(int N)
&gt;&gt;&gt;&gt;&gt;&gt;&gt;    | red(ColoredTree left, ColoredTree right)
&gt;&gt;&gt;&gt;&gt;&gt;&gt;    | black(ColoredTree left, ColoredTree right);
ok
rascal&gt;ColoredTree CT = red(black(leaf(1), red(leaf(2),leaf(3))), black(leaf(3), leaf(4)));
ColoredTree: red(
  black(
    leaf(1),
    red(
      leaf(2),
      leaf(3))),
  black(
    leaf(3),
    leaf(4)))
rascal&gt;import IO;
ok
rascal&gt;switch (CT){
&gt;&gt;&gt;&gt;&gt;&gt;&gt;case red(_, _):
&gt;&gt;&gt;&gt;&gt;&gt;&gt;     println("A red root node");
&gt;&gt;&gt;&gt;&gt;&gt;&gt;case black(_, _):
&gt;&gt;&gt;&gt;&gt;&gt;&gt;     println("A black root node");
&gt;&gt;&gt;&gt;&gt;&gt;&gt;}
A red root node
ok</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Concepts-Visiting">3.8. Visiting</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Visiting tree structures and arbitrary values.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Visiting the elements of a data structure is one of the most common operations in our domain
and the visitor design pattern is a solution known to every software engineer.
Given a tree-like data structure we want to perform an operation on some (or all) nodes of the tree. The purpose of the visitor design pattern is to decouple the logistics of visiting each node from the actual operation on each node. In Rascal the logistics of visiting is completely automated.</p>
</div>
<div class="paragraph">
<p>Visiting is achieved by way of visit expressions that resemble the switch statement. A visit expression traverses an arbitrarily complex subject value and applies a number of cases to all its subtrees.
All the elements of the subject are visited. When one of the cases matches the statements associated
with that case are executed. These cases may:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>cause some side effect, i.e., assign a value to local or global variables;</p>
</li>
<li>
<p>execute an <a href="#Statements-Insert">Insert</a> statement that replaces the current element;</p>
</li>
<li>
<p>execute a <a href="#Statements-Fail">Fail</a> statement that causes the match for the current case to fail (and undoing all side-effects due to the successful match itself and the execution of the statements so far).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The value of a visit expression is the original subject value with all replacements made as dictated by matching cases. The traversal order in a visit expressions can be explicitly defined by the programmer.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Examples of visiting are, for instance, given in the Recipes
<a href="../Recipes/Recipes.html#Common-ColoredTrees">ColoredTrees</a> and <a href="../Recipes/Recipes.html#Common-Derivative">Derivative</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Concepts-Functions">3.9. Functions</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Functions and pattern-directed invocation.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Functions allow the definition of frequently used operations. They have a name and formal parameters. They are explicitly declared and are fully typed.
Functions can also be used as values thus enabling higher-order functions.
Rascal is a higher-order language in which functions are first-class values.</p>
</div>
<div class="paragraph">
<p>See <a href="#Declarations-Function">Function Declaration</a> for details.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Here is an example of a function that counts the number of assignment statements in a program:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">int countAssignments(PROGRAM P){
    int n = 0;
    visit (P){
    case asgStat(_, _):
         n += 1;
    }
    return n;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Consider the following use of higher-order functions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">int double(int x) { return 2 * x; }

int triple(int x) { return 3 * x; }

int f(int x, int (int) multi){ return multi(x); }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The functions <code>double</code> and <code>triple</code> simply multiply their argument with a constant.
Function <code>f</code> is, however, more interesting.
It takes an integer <code>x</code> and a function <code>multi</code> (with integer argument and integer result) as argument and
applies multi to its own argument. <code>f(5, triple)</code> will hence return <code>15</code>.
Function values can also be created anonymously as illustrated by the following, alternative,
manner of writing this same call to <code>f</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">f(5, int (int y){return 3 * y;});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here the second argument of <code>f</code> is an anonymous function.</p>
</div>
</div>
<div class="sect2">
<h3 id="Concepts-SyntaxDefinitionAndParsing">3.10. Syntax Definition and Parsing</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Syntax definition and parser generation for new languages.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>All source code analysis projects need to extract information directly from the source code.
There are two main approaches to this:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Lexical information</em>: Use regular expressions to extract useful, but somewhat superficial, flat, information.
This can be achieved using regular expression patterns, see <a href="#Patterns-Regular">Regular Expression Pattern</a>s.</p>
</li>
<li>
<p><em>Structured information</em>: Use syntax analysis to extract the complete, nested, structure of the source code
in the form of a syntax tree. Rascal can directly manipulate the parse trees, but it also enables user-defined
mappings from parse tree to abstract syntax tree.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Using <a href="#Declarations-SyntaxDefinition">Syntax Definition</a>s you can define the syntax of any (programming) language. Then Rascal:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>will generate the parser, and</p>
</li>
<li>
<p>will provide pattern matching and pattern construction on parse trees and abstract syntax trees, see <a href="#Patterns-Abstract">Abstract Patterns</a> and
<a href="#Patterns-Concrete">Concrete Patterns</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Let&#8217;s use the Exp language as example. It contains the following elements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Integer constants, e.g., <code>123</code>.</p>
</li>
<li>
<p>A multiplication operator, e.g., <code>3*4</code>.</p>
</li>
<li>
<p>An addition operator, e.g., <code>3+4</code>.</p>
</li>
<li>
<p>Multiplication is left-associative and has precedence over addition.</p>
</li>
<li>
<p>Addition is left-associative.</p>
</li>
<li>
<p>Parentheses can be used to override the precedence of the operators.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here are some examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>123</code></p>
</li>
<li>
<p><code>2+3+4</code></p>
</li>
<li>
<p><code>2+3*4</code></p>
</li>
<li>
<p><code>(2+3)*4</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The EXP language can be defined as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">module demo::lang::Exp::Concrete::WithLayout::Syntax

layout Whitespace = [\t-\n\r\ ]*; <i class="conum" data-value="1"></i><b>(1)</b>

lexical IntegerLiteral = [0-9]+;

start syntax Exp
  = IntegerLiteral
  | bracket "(" Exp ")"
  &gt; left Exp "*" Exp
  &gt; left Exp "+" Exp
  ;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now you may parse and manipulate programs in the EXP language. Let&#8217;s demonstrate parsing an expression:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import demo::lang::Exp::Concrete::WithLayout::Syntax;
rascal2rvm: Parsing and checking |std:///demo/lang/Exp/Concrete/WithLayout/Syntax.rsc|
rascal2rvm: Compiling |std:///demo/lang/Exp/Concrete/WithLayout/Syntax.rsc|
r2mu: entering ... demo::lang::Exp::Concrete::WithLayout::Syntax
mu2rvm: Compiling module demo::lang::Exp::Concrete::WithLayout::Syntax
Compiling |std:///demo/lang/Exp/Concrete/WithLayout/Syntax.rsc|: check: 4, compile: 12, total: 16 ms
compile: Writing RVMModule |compressed+home:///bin-console/demo/lang/Exp/Concrete/WithLayout/Syntax.rvm.gz|
Removing |compressed+home:///bin-console/ConsoleInput_imports.rvm.gz|
ok
rascal&gt;import ParseTree;
ok
rascal&gt;parse(#start[Exp], "2+3*4");
start[Exp]: (start[Exp]) `2+3*4`</code></pre>
</div>
</div>
<div class="paragraph">
<p>First we import the syntax definition and the link:../Libraries/Libraries.html/ParseTree&gt;&gt; module that provides the parsing functionality.
Finally, we parse <code>2+3*4</code> using the start symbol <code>Exp</code>.</p>
</div>
<div class="paragraph">
<p>Don&#8217;t be worried, we are just showing the resulting parse tree here. It intended for programs and not for humans.
The points we want to make are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Rascal grammars are relatively easy to read and write (unfortunately, writing grammars will never become simple).</p>
</li>
<li>
<p>Parser generation is completely implicit.</p>
</li>
<li>
<p>Given a syntax definition, it can be used immediately for parsing.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="../Recipes/Recipes.html">Recipes</a> for a more extensive presentation of the <a href="../Recipes/Recipes.html#Languages-Exp">EXP</a>
language and <a href="../Recipes/Recipes.html#Languages">Languages</a> for other language examples.</p>
</div>
<div class="ulist">
<div class="title">Pitfalls</div>
<ul>
<li>
<p>The <a href="#Declarations-SyntaxDefinition">Syntax Definition</a> feature has recently been designed and implemented and is still going through some growing pains.
This includes both implementation and documentation.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Concepts-RewriteRules">3.11. RewriteRules</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Rewrite rules (deprecated)</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>A rewrite rule is a recipe on how to simplify values.
Remember: (<em>a</em> + <em>b</em>)<em><sup>2</sup> = <em>a</em><sup>2</sup> + 2_ab_ + <em>b</em><sup>2</sup>?
A rewrite rule has a pattern as left-hand side (here: (<em>a</em> + <em>b</em>)</em><sup>2</sup> and a replacement as
right-hand side (here: <em>a</em><sup>2</sup> + 2_ab_ + <em>b</em><sup>2</sup>).
Given a value and a set of rewrite rules the patterns are tried on every subpart of the value and replacements are made if a match is successful. This is repeated as long as some pattern matches.</p>
</div>
<div class="paragraph">
<p>Rascal has ancestors, notably <a href="http://www.meta-environment.org/">ASF+SDF</a>, where rewriting was the most important computation mechanism.
In Rascal, rewriting can be achieved using pattern-directed invocation, see <a href="#Declarations-Function">Function Declaration</a>, possibly combined with a <a href="#Expressions-Visit">Visit</a> statement.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>In a package for symbolic differentiation it is desirable to keep expressions in simplified form in order
to avoid intermediate results like <code>add(product(con(1), x), mul(con(0), y))</code> that can be simplified to <code>x</code>.
The following definitions achieve this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">public Exp simp(add(con(n), con(m))) = con(n + m);   /*1*/
public Exp simp(mul(con(n), con(m))) = con(n * m);

public Exp simp(mul(con(1), Exp e))  = e;
public Exp simp(mul(Exp e, con(1)))  = e;
public Exp simp(mul(con(0), Exp e))  = con(0);
public Exp simp(mul(Exp e, con(0)))  = con(0);

public Exp simp(add(con(0), Exp e))  = e;
public Exp simp(add(Exp e, con(0)))  = e;

public default Exp simp(Exp e)       = e;            /*2*/

public Exp simplify(Exp e){                          /*3*/
  return bottom-up visit(e){
           case Exp e1 =&gt; simp(e1)
         }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Starting at &lt;1&gt; definitions of the function <code>simp</code> are given with different patterns as formal argument.
Each definition is responsible for one particular simplification (here is where the similarity with rewrite rules surfaces).</p>
</div>
<div class="paragraph">
<p>At &lt;2&gt; a default for <code>simp</code> is given: if no other definition applies, the default one is used.</p>
</div>
<div class="paragraph">
<p>At &lt;3&gt; the actual <code>simplify</code> function is given: it performs a bottom up visit of the expression, replacing each subexpression by
a simplified version.</p>
</div>
<div class="paragraph">
<p>See <a href="../Recipes/Recipes.html#Common-Derivative">Derivative</a> for a full explanation of this example.</p>
</div>
<div class="paragraph">
<div class="title">Pitfalls</div>
<p>Rascal does still have special syntax for rewrite rules, but this has been <strong>deprecated</strong> in favour of pattern-directed invocation that can achieve the same, see <a href="#Declarations-Function">Function Declaration</a>.</p>
</div>
<div class="paragraph">
<p>The above example can be written using rule notation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">rule simp1 product(con(1), Expression e) =&gt; e;
rule simp2 product(Expression e, con(1)) =&gt; e;
rule simp3 product(con(0), Expression e) =&gt; con(0);
rule simp4 product(Expression e, con(0)) =&gt; con(0);
rule simp5 sum(con(0), Expression e)     =&gt; e;
rule simp6 sum(Expression e, con(0))     =&gt; e;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Concepts-IDEConstruction">3.12. IDE Construction</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Extend an IDE with interactive, language-specific, features (Eclipse only).</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Meta-programs become most useful, when they are integrated with an Interactive Development Environment (IDE).</p>
</div>
<div class="paragraph">
<p>A Rascal program running inside Eclipse can get access to many of the services provided by Eclipse such as syntax highlighting,
outlining, documentation hovering and much more.</p>
</div>
<div class="paragraph">
<p>Rascal uses the services of the IDE Meta-tooling Platform, or <a href="http://www.eclipse.org/imp/">IMP</a> for short, a collection of API and tools to support constructing IDEs for programming languages and domain specific languages. Rascal is also part of the collection of IMP tools and (will be) hosted shortly on eclipse.org.</p>
</div>
<div class="paragraph">
<p>Using the <a href="../Libraries/Libraries.html#util-IDE">IDE library</a>, you can instantiate the services that IMP provides for any language implemented in Rascal.</p>
</div>
<div class="paragraph">
<p>To instantiate an IDE for a language implemented using Rascal, use the following steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Define the grammar for the language.</p>
</li>
<li>
<p>Define a parse function for the language.</p>
</li>
<li>
<p>Register the language.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following IDE features are available</p>
</div>
</div>
<div class="sect2">
<h3 id="Concepts-CodeModels">3.13. Code Models</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>code models are abstract representations of source code</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>You can use any of Rascal&#8217;s <a href="#Expressions-Values">Values</a> to represent facts about source code. For example, <a href="#Declarations-AlgebraicDataType">Algebraic Data Type</a> can be used to define abstract syntax trees and <a href="#Values-Relation">Relation</a> are used to represent call graphs. We consistently use <a href="#Values-Location">Location</a> to refer to source code artifacts, either physically (<code>|file:///tmp/HelloWorld.java|</code>) or logically (<code>|java+class://java/lang/Object|</code>).</p>
</div>
<div class="paragraph">
<p>Specifically we have standardized a set of models to represent source code which are ready for computing metrics: <a href="#analysis-m3">[analysis-m3]</a>. This M3 model consists of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>an open (extensible) set of <a href="#Values-Relation">Relations</a> between source code artifacts.</p>
</li>
<li>
<p>a number of extensible <a href="#Declarations-AlgebraicDataType">Algebraic Data Types</a> for representing abstract syntax trees.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The core language independent model can be found here: <a href="../Libraries/Libraries.html#analysis-m3">analysis::m3</a>.</p>
</div>
<div class="paragraph">
<p>Extensions for representing facts about specific languages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../Libraries/Libraries.html#java-m3">lang::java::m3</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Concepts-Enumerating">3.14. Enumerating</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Enumerating values.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Enumerating regards the enumeration of the values in a given (finite) domain, be it the elements in a list, the substrings of a string,
or all the nodes in a tree.
Each value that is enumerated is first matched against a pattern before it can possibly contribute to the result of
the enumerator. An enumerator yields <code>true</code> as long as it has generated a new value, and <code>false</code> otherwise.</p>
</div>
<div class="paragraph">
<p>See <a href="#Comprehensions-Enumerator">Enumerator</a> for details.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">int x &lt;- { 1, 3, 5, 7, 11 }
int x &lt;- [ 1 .. 10 ]
/asgStat(Id name, _) &lt;- P</code></pre>
</div>
</div>
<div class="paragraph">
<p>The first two produce the integer elements of a set of integers, respectively, a range of integers.
Observe that the left-hand side of an enumerator is a pattern, of which <code>int x</code> is a specific instance.
The use of more general patterns is illustrated by the third enumerator that does a deep traversal
(as denoted by the descendant operator <code>/</code>) of the complete program <code>P</code> (that is assumed to have a
<code>PROGRAM</code> as value) and only yields statements that match the assignment pattern (<code>asgStat</code>).
Note the use of an anonymous variable at the <code>EXP</code> position in the pattern.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s practice some of these examples.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;int x &lt;- {};
bool: false</code></pre>
</div>
</div>
<div class="paragraph">
<p>The enumerator does not produce any value and returns <code>false</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;int x &lt;- {1, 3, 5, 7, 11 };
bool: true
rascal&gt;x;
[error] Name x is not in scope</code></pre>
</div>
</div>
<div class="paragraph">
<p>Well, this is a disappointing experience. The generator returned <code>true</code> since it did produce a value.
Apparently, we cannot inspect the value of the variable <code>x</code> that was bound.</p>
</div>
<div class="paragraph">
<p>Another example that results in an error:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;str x &lt;- {1, 3, 5, 7, 11 };
[error] Cannot match an expression of type: type(int(),()) against a pattern of type type(str(),()) IN 'str x'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here, the enumerator produces its first integer value, an attempt is made to assign this to variable <code>x</code> that is declared as string,
and an error results.</p>
</div>
<div class="paragraph">
<p>A more satisfying use is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;{ x * x | int x &lt;- {1, 3, 5, 7, 11 }};
set[int]: {121,1,9,49,25}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When used inside <a href="#Expressions-Comprehensions">Comprehensions</a>, or <a href="#Statements-For">For</a>, <a href="#Statements-Do">Do</a>, or <a href="#Statements-While">While</a> statement, all values of the generator will be produced and used.
The variables that are introduced by a enumerator are local to the construct in which the enumerator is used.
Here is a similar example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import IO;
ok
rascal&gt;for(int x &lt;- {1, 3, 5, 7, 11 })
&gt;&gt;&gt;&gt;&gt;&gt;&gt;    println("x = &lt;x&gt;");
x = 5
x = 7
x = 1
x = 3
x = 11
list[void]: []</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Pitfalls</div>
<p>The variables that are bound by an enumerator are local to the statement in which the enumerator is used.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Rascal-Declarations">4. Declarations</h2>
<div class="sectionbody">
<div class="paragraph">
<div class="title">Synopsis</div>
<p>The entities that can be declared in Rascal programs.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>The following concepts are relevant for declarations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#Declarations-Module">Module Declaration</a>: Declare a module.</p>
</li>
<li>
<p><a href="#Declarations-Import">Import</a>: Declare the import a module.</p>
</li>
<li>
<p><a href="#Declarations-Program">Program</a>: A Rascal program consists of a number of <a href="#Declarations-Module">Module Declaration</a>s.</p>
</li>
<li>
<p><a href="#Declarations-StaticTyping">StaticTyping</a>: The static type system of Rascal.</p>
<div class="ulist">
<ul>
<li>
<p><a href="#StaticTyping-ReifiedTypes">Reified Types</a>: Reified types are types that can be used as values.</p>
</li>
<li>
<p><a href="#StaticTyping-TypeConstraints">Type Constraints</a>: Type constraints restrict the acceptable type for parameters.</p>
</li>
<li>
<p><a href="#StaticTyping-TypeParameters">Type Parameters</a>: Type parameters enable parameterized types.</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="#Declarations-AlgebraicDataType">Algebraic Data Type</a>: Define a user-defined type (Algebraic Data Type).</p>
</li>
<li>
<p><a href="#Declarations-Variable">Variable Declaration</a>: Declare a variable.</p>
</li>
<li>
<p><a href="#Declarations-Function">Function Declaration</a>: Declare a function.</p>
</li>
<li>
<p><a href="#Declarations-SyntaxDefinition">Syntax Definition</a>: Syntax Definitions allow the definition of parsers for programming languages, domain-specific languages and data formats.</p>
<div class="ulist">
<ul>
<li>
<p><a href="#SyntaxDefinition-Action">Action</a>: Actions are functions that are called when parse trees are constructed (right after parsing).</p>
</li>
<li>
<p><a href="#SyntaxDefinition-AmbiguityDetection">Ambiguity Detection</a>: Ambiguity detection helps to find ambiguities in syntax definitions.</p>
</li>
<li>
<p><a href="#SyntaxDefinition-AmbiguityDiagnosis">Ambiguity Diagnosis</a>: Ambiguity diagnosis suggests changes to syntax definitions to make them non-ambiguous.</p>
</li>
<li>
<p><a href="#SyntaxDefinition-Disambiguation">Disambiguation</a>:</p>
</li>
<li>
<p><a href="#SyntaxDefinition-ParseTrees">ParseTrees</a>: The ParseTrees module defines an algebraic data-type for parse trees, which all parsers generated from [SyntaxDefinition]s produce.</p>
</li>
<li>
<p><a href="#SyntaxDefinition-Symbol">Symbol</a>: The symbols that can occur in a syntax definition.</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="#Declarations-Alias">Alias Declaration</a>: Declare an alias for a type.</p>
</li>
<li>
<p><a href="#Declarations-Annotation">Annotation Declaration</a>: Declare an annotation type for nodes.</p>
</li>
<li>
<p><a href="#Declarations-Tag">Tag Declaration</a>: Tag declarations are not implemented (yet).</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="Declarations-Module">4.1. Module Declaration</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Declare a module.</p>
</div>
<div class="listingblock">
<div class="title">Syntax</div>
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">module <em>Name</em>
<em>Imports</em>;
<em>Declaration<sub>1</sub></em>;
...
<em>Declaration<sub>n</sub></em>;</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>A module declaration consists of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A module name.</p>
</li>
<li>
<p>Zero or more imports;</p>
</li>
<li>
<p>Zero or more declarations.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The module name <em>Name</em> will be used when the current module is imported in another module.
A module name is in general a qualified name of the form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal"><em>Name<sub>1</sub></em>::_Name<sub>2</sub><em>:: ... ::_Name<sub>n</sub></em></code></pre>
</div>
</div>
<div class="paragraph">
<p>which corresponds to a path relative to the root of the current workspace.</p>
</div>
<div class="paragraph">
<p>The constituents of a module are shown in the figure below.</p>
</div>
<div class="imageblock float: right;">
<div class="content">
<img src="Declarations/Module/module-parts.png" alt="Module Parts" width="500px">
</div>
</div>
<div class="paragraph">
<p>An <a href="#Declarations-Import">Import</a> declares other modules that are used by the current module.
Following imports, a module may contain declarations (in arbitrary order, but a <a href="#Declarations-SyntaxDefinition">Syntax Definition</a> can
occur directly following the imports) for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#Declarations-SyntaxDefinition">Syntax Definition</a></p>
</li>
<li>
<p><a href="#Declarations-Variable">Variable Declaration</a></p>
</li>
<li>
<p><a href="#Declarations-Function">Function Declaration</a></p>
</li>
<li>
<p><a href="#Declarations-AlgebraicDataType">Algebraic Data Type</a></p>
</li>
<li>
<p><a href="#Declarations-Alias">Alias Declaration</a></p>
</li>
<li>
<p><a href="#Declarations-Annotation">Annotation Declaration</a></p>
</li>
<li>
<p><a href="#Declarations-Tag">Tag Declaration</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each declaration may contain a <code>private</code> or <code>public</code> keyword that determines
the <em>visibility</em> of the declared entity.</p>
</div>
<div class="paragraph">
<p>The entities that are <em>visible inside</em> a module are</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The private or public entities declared in the module itself.</p>
</li>
<li>
<p>The public entities declared in any imported module.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The only entities that are <em>visible outside</em> the module, are the public entities declared in the module itself. If different imported modules declare the same visible name, it can be disambiguated by explicitly qualifying it with its module name:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal"><em>Module</em> :: <em>Name</em></code></pre>
</div>
</div>
<div class="paragraph">
<p>Each module resides in a separate file with extension <code>.rsc</code>.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Here is the <code>Hello</code> module:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">module demo::basic::Hello

import IO;

void hello() {
   println("Hello world, this is my first Rascal program");
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>It defines a module with the name <code>demo::basic::Hello</code> and imports the <a href="../Libraries/Libraries.html#Prelude-IO">IO</a> library.
Finally, it declares the <code>hello</code> function.</p>
</div>
<div class="paragraph">
<p>The actual source of this module can be found in <code>library/demo/basic/Hello.rsc</code> in the Rascal sources.</p>
</div>
<div class="paragraph">
<p>More ways to write this example are discussed in the <a href="../Recipes/Recipes.html#Basic-Hello">Hello</a> example in <a href="../Recipes/Recipes.html">Recipes</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Declarations-Import">4.2. Import</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Declare the import a module.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>import <em>QualifiedName</em>;</code></p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>An import has as effect that all public entities declared in module <em>QualifiedName</em> are made available to the importing module. Circular imports are allowed. All publicly visible entities in the imported module become available in the importing module.</p>
</div>
<div class="paragraph">
<p>Import is <em>non-transitive</em>, i.e., the visible entities from an imported module are not re-exported by the importing module.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Here, is how to import the <a href="../Libraries/Libraries.html#Prelude-IO">IO</a> library:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import IO;
ok
rascal&gt;println("IO library was imported.");
IO library was imported.
ok</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Declarations-Program">4.3. Program</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>A Rascal program consists of a number of <a href="#Declarations-Module">Module Declaration</a>s.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>A Rascal program consists of a number of <a href="#Declarations-Module">Module Declaration</a>s, each stored in a separate file with extension <code>.rsc</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Declarations-StaticTyping">4.4. StaticTyping</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>The static type system of Rascal.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Rascal is based on static typing, this means that as many errors and inconsistencies as possible are spotted before
the program is executed.</p>
</div>
<div class="sect3">
<h4 id="_the_type_lattice">4.4.1. The Type Lattice</h4>
<div class="paragraph">
<p>The types are ordered in a so-called <em>type lattice</em> shown in the following figure.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="Declarations/StaticTyping/Concepts/StaticTyping/type-lattice.png" alt="type lattice" width="400">
</div>
<div class="title">Figure 2. Type Lattice</div>
</div>
<div class="paragraph">
<p>The arrows describe a <em>subtype-of</em> relation between types. The type <code>void</code> is the <em>smallest</em> type and
is included in all other types and the type <code>value</code> is the <em>largest</em> type that includes all other types.
We also see that <code>rel</code> is a subtype of <code>set</code> and that each ADT is a subtype of <code>node</code>.
A special role is played by the datatype <code>Tree</code> that is the generic type of syntax trees.
Syntax trees for specific languages are all subtypes of <code>Tree</code>. As a result, syntax trees can be addressed at two levels:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>in a generic fashion as <code>Tree</code> and,</p>
</li>
<li>
<p>in a specific fashion as a more precisely typed syntax tree.
Finally, each <code>alias</code> is structurally equivalent to one or more specific other types.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The fact that the types are ordered in a lattice makes it possible to define a <strong>Least Upper Bound</strong> (lub) on types.
Given two types <em>T</em><sub>1</sub> and <em>T</em><sub>2</sub>, <code>lub(<em>T</em><sub>1</sub>, <em>T</em><sub>2</sub>)</code> is defined as the nearest common super type of <em>T</em><sub>1</sub> and <em>T</em><sub>2</sub>
in the type lattice.</p>
</div>
</div>
<div class="sect3">
<h4 id="_advanced_features">4.4.2. Advanced Features</h4>
<div class="paragraph">
<p>The Rascal type system has various advanced features that are described separately:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Types may be be <em>parameterized</em> resulting in very general and reusable types, see [Type Parameters].</p>
</li>
<li>
<p>Declarations of [Function]s and [AlgebraicDataType]s may be parameterized and [Type Constraints] can be used to define
constraints on the actual type to be used.</p>
</li>
<li>
<p>The formal arguments of functions are bound to <em>values</em> but in exceptional cases
a function may need a type as argument value, <a href="#StaticTyping-ReifiedTypes">Reified Types</a> make this possible.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Here are some simple examples of correct and incorrect typing:</p>
</div>
<div class="paragraph">
<p>We can assign an integer value to an integer variable:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;int i = 3;
int: 3</code></pre>
</div>
</div>
<div class="paragraph">
<p>But assigning a string value gives an error:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;int j = "abc";
[error] Unable to bind subject type str to assignable IN 'j = "abc";'</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>num</code> type accepts integer and real values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;num n = i;
int: 3
rascal&gt;n = 3.14;
real: 3.14</code></pre>
</div>
</div>
<div class="paragraph">
<p>A variable of type <code>value</code> accepts all possible values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;value v = true;
bool: true
rascal&gt;v = "abc";
str: "abc"
rascal&gt;v = [1, 2, 3];
list[int]: [1,2,3]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="StaticTyping-ReifiedTypes">4.4.3. Reified Types</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Reified types are types that can be used as values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code># <em>Name</em></code></p>
</div>
<div class="paragraph">
<div class="title">Types</div>
<p><code>type</code></p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Usually one declares functions that have arguments that have a type that corresponds to one of the many forms of values in Rascal.
In exceptional circumstances it is desirable to define functions that have a type itself as argument.</p>
</div>
<div class="paragraph">
<p>To solve this problem in a more general manner something special has to be done.
Types are not values and without an additional mechanism they cannot be passed as arguments to functions.
To achieve this effect we introduce reified types that are denoted by the type <code>type</code>.
In other words, reified types make it possible to use types as values.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>The prototypical example is a parse function: how to write a type safe parse function that expresses the type of the result we expect?
Suppose we want to parse a language that has the non-terminals <code>EXP</code>, <code>STAT</code> and <code>PROGRAM</code>.
A first, naive, solution introduces a parse function for each non-terminal:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">EXP parseEXP(str s){ ... }
STAT parsePROGRAM(str s) { ... }
PROGRAM parsePROGRAM(str s) { ... }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Unfortunately this solution does not scale well to large languages with many non-terminals and it breaks down completely
when we do not know the non-terminals before hand.</p>
</div>
<div class="paragraph">
<p>Now we can write (see <a href="#StaticTyping-TypeParameters">Type Parameters</a> for a description of the <code>&amp;T</code> notation):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">&amp;T parse(type[&amp;T] start, str s) { ... }</code></pre>
</div>
</div>
<div class="paragraph">
<p>and use the parse by giving it a type as argument:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">parse(#EXP, "1+3");</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="StaticTyping-TypeConstraints">4.4.4. Type Constraints</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Type constraints restrict the acceptable type for parameters.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>&amp; <em>Name</em> &lt;: <em>Type</em></code></p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Constraints can be imposed on the actual types to which a type parameter may be bound.
This is expressed by a subtype constraint which expresses that
actual types bound to <em>Name</em> should be a subtype of <em>Type</em>.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Here is the definition of the absolute value function <code>abs</code> from the <a href="#Values-Number">Number</a> library:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">public &amp;T &lt;: num abs(&amp;T &lt;: num N)
{
	return N &gt;= 0 ? N : -N;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The argument <code>N</code> is constrained to be at most of type <code>num</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import util::Math;
ok
rascal&gt;abs(-3);
int: 3
rascal&gt;abs(-3.5);
real: 3.5</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is an example from the <a href="#Values-Node">Node</a> library:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">&amp;T &lt;: node setAnnotations(&amp;T &lt;: node x, map[str, value] annotations);</code></pre>
</div>
</div>
<div class="paragraph">
<p>(we don&#8217;t give the body of this function since it has been implemented in Java).
<code>setAnnotations</code> takes a value of any type that is at most <code>node</code> and adds annotations to it.
This makes it possible to set annotations on any <a href="#Declarations-AlgebraicDataType">Algebraic Data Type</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import Node;
ok
rascal&gt;nd = "f"(10, "abc");
node: "f"(10,"abc")</code></pre>
</div>
</div>
<div class="paragraph">
<p>First we apply <code>setAnnotations</code> to a node value:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;setAnnotations(nd, ("color" : "red", "size" : "large"));
node: "f"(10,"abc")[
  @size="large",
  @color="red"
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, we introduce a new data type <code>Suite</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;data Suite = hearts() | diamonds() | clubs() | spades();
ok
rascal&gt;st = diamonds();
Suite: diamonds()</code></pre>
</div>
</div>
<div class="paragraph">
<p>And apply <code>setAnnotations</code> to a value of type <code>Suite</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;setAnnotations(st, ("player" : "Hossein", "gain" : "120"));
Suite: diamonds()[
  @player="Hossein",
  @gain="120"
]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="StaticTyping-TypeParameters">4.4.5. Type Parameters</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Type parameters enable parameterized types.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>&amp; <em>Name</em></code></p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>A type parameter may occur at every syntactic position where a type is required and turns an ordinary type into a parameterized type.
Parameterized types are used to define polymorphic functions and data types, i.e., functions and data types that are applicable for more than one type. Type parameters are bound to an actual type when the function or data type is applied and further uses of the type parameter are consistently replaced by the actual type.</p>
</div>
<div class="paragraph">
<p>The following syntactic positions are <em>binding occurrences</em> for type parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type parameters in the type declaration of a function are bound to the types of the actual parameters in the call of that function. Type parameters that occur in the body of the function are replaced by the corresponding actual types.</p>
</li>
<li>
<p>The left-hand side of an alias. The type parameters are bound when the alias is used and occurrences of type parameters in the right hand side are replaced by corresponding actual types.</p>
</li>
<li>
<p>The alternatives of a data type. Binding and replacement is identical to that of function declarations.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All other occurrences of type parameters are <em>using occurrences</em>. The following rules apply:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When the same type parameter is used at different binding occurrences it should be bound to the same actual type.</p>
</li>
<li>
<p>For every using occurrence of a type parameter there should be a binding occurrence of a type parameter with the same name.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Let's consider a small example of the use of function parameters in a function declaration, see <a href="#Declarations-Function">Function Declaration</a>
for more details on function declarations.
The following function <code>swap</code> returns a tuple in which its arguments are swapped and can be applied to arbitrary values
in a type safe manner:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;tuple[&amp;B, &amp;A] swap(&amp;A a, &amp;B b) { return &lt;b, a&gt;; }
ok
rascal&gt;swap(1,2);
tuple[int,int]: &lt;2,1&gt;
rascal&gt;swap("abc", 3);
tuple[int,str]: &lt;3,"abc"&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Observe that the type parameters that are used in the return type should be defined in the declarations of the formal parameter of the function.</p>
</div>
<div class="paragraph">
<p>An <a href="#Alias">[Alias]</a> declaration may also be parameterized. So we can generalize graphs as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;alias Graph[&amp;Node] = rel[&amp;Node, &amp;Node];
ok
rascal&gt;Graph[int] GI = {&lt;1,2&gt;, &lt;3,4&gt;, &lt;4,1&gt;};
rel[int,int]: {
  &lt;4,1&gt;,
  &lt;3,4&gt;,
  &lt;1,2&gt;
}
rascal&gt;Graph[str] GS = {&lt;"a", "b"&gt;, &lt;"c","d"&gt;, &lt;"d", "a"&gt;};
rel[str,str]: {
  &lt;"d","a"&gt;,
  &lt;"a","b"&gt;,
  &lt;"c","d"&gt;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The type parameters that are used in the type in the right part of the alias declaration
should be defined in the left part of the alias definition.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Declarations-AlgebraicDataType">4.5. Algebraic Data Type</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Define a user-defined type (Algebraic Data Type).</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>In ordinary programming languages record types or classes exist to introduce a new type name for a collection of related,
named, values and to provide access to the elements of such a collection through their name.</p>
</div>
<div class="paragraph">
<p>In Rascal, algebraic data types provide this facility. They have to be declared, and
then values can be declared using calls to the declared constructor functions,
see <a href="#Values-Constructor">Constructor</a>.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>The following data declaration defines the datatype <code>Bool</code> that contains various constants (<code>tt()</code> and <code>ff()</code>
and constructor functions <code>conj</code> and <code>disj</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;data Bool = tt() | ff() | conj(Bool L, Bool R)  | disj(Bool L, Bool R);
ok</code></pre>
</div>
</div>
<div class="paragraph">
<p>terms of type <code>Bool</code> can be constructed using the defined constructors:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;conj(tt(),ff());
Bool: conj(
  tt(),
  ff())</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Declarations-Variable">4.6. Variable Declaration</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Declare a variable.</p>
</div>
<div class="ulist">
<div class="title">Syntax</div>
<ul>
<li>
<p><code><em>Type</em> <em>Name</em> = <em>Exp</em> ;</code></p>
</li>
<li>
<p><code><em>Type</em> <em>Name</em>;</code></p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Type</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Type</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;: <em>Type</em></code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>The effect of a variable declaration is to introduce a new variable <em>Name</em> and
to assign the value of expression <em>Exp</em> to <em>Name</em>. A mention of <em>Name</em> later on in the same scope
will be replaced by this value, provided that <em>Name</em>\'s value has not been changed by an intermediate assignment.</p>
</div>
<div class="paragraph">
<p>When a variable is declared, it has as scope the nearest enclosing block, or the module when declared at the module level.</p>
</div>
<div class="paragraph">
<p>The following rules apply:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Double declarations in the same scope are not allowed.</p>
</li>
<li>
<p>The type of <em>Exp</em> should be compatible with <em>Type</em>, i.e., it should be a subtype of <em>Type</em>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As a convenience, also declarations without an initialization expression are permitted inside functions (but not at the module level)
 and have the form</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal"><em>Type</em> <em>Name</em>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>and only introduce the variable <em>Name</em>.</p>
</div>
<div class="paragraph">
<p>Rascal provides local type inference, which allows the implicit declaration of variables that are used locally in functions. The following rules apply:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An implicitly declared variable is declared at the level of the current scope, this may the whole function body or a block nested in it.</p>
</li>
<li>
<p>An implicitly declared variable gets as type the type of the first value that is assignment to it.</p>
</li>
<li>
<p>If a variable is implicitly declared in different execution path of a function, all these implicit declarations should result in the same type.</p>
</li>
<li>
<p>All uses of an implicitly declared variable must be compatible with its implicit type.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Two explicit variable declarations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;int max = 100;
int: 100
rascal&gt;min = 0;
int: 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>An implicit variable declaration</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;day = {&lt;"mon", 1&gt;, &lt;"tue", 2&gt;, &lt;"wed",3&gt;,
&gt;&gt;&gt;&gt;&gt;&gt;&gt;       &lt;"thu", 4&gt;, &lt;"fri", 5&gt;, &lt;"sat",6&gt;, &lt;"sun",7&gt;};
rel[str,int]: {
  &lt;"wed",3&gt;,
  &lt;"thu",4&gt;,
  &lt;"sun",7&gt;,
  &lt;"tue",2&gt;,
  &lt;"sat",6&gt;,
  &lt;"mon",1&gt;,
  &lt;"fri",5&gt;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Variable declaration and assignment leading to type error</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;int month = 12;
int: 12
rascal&gt;month ="December";
[error] Unable to bind subject type str to assignable IN 'month ="December";'</code></pre>
</div>
</div>
<div class="ulist">
<div class="title">Pitfalls</div>
<ul>
<li>
<p>Local type inference for variables always uses the smallest possible scope for a variable; this implies that
a variable introduced in an inner scope is not available outside that scope. Here is how things can go wrong:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;if( 4 &gt; 3){ x = "abc"; } else { x = "def";}
str: "abc"
rascal&gt;x;
[error] Name x is not in scope</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Declarations-Function">4.7. Function Declaration</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Declare a function.</p>
</div>
<div class="ulist">
<div class="title">Syntax</div>
<ul>
<li>
<p><code><em>Modifiers</em> <em>Type</em> <em>Name</em>( <em>Type<sub>1</sub></em> <em>Var<sub>1</sub></em>, &#8230;&#8203;, <em>Type<sub>n</sub></em> <em>Var<sub>n</sub></em> ) <em>Body</em></code></p>
</li>
<li>
<p><code><em>Modifiers</em> <em>Type</em> <em>Name</em>( <em>Type<sub>1</sub></em> <em>Var<sub>1</sub></em>, &#8230;&#8203;, <em>Type<sub>n</sub></em> <em>Var<sub>n</sub></em> <em>Type<sub>0</sub></em> <em>Name<sub>0</sub></em>&#8230;&#8203; ) <em>Body</em></code></p>
</li>
<li>
<p><code><em>Modifiers</em> <em>Type</em> <em>Name</em>( <em>Pattern<sub>1</sub></em>, &#8230;&#8203;, <em>Pattern<sub>n</sub></em>) <em>Body</em></code></p>
</li>
<li>
<p><code><em>Modifiers</em> <em>Type</em> <em>Name</em>( <em>Pattern<sub>1</sub></em>, &#8230;&#8203;, <em>Pattern<sub>n</sub></em>, <em>Type<sub>0</sub></em> <em>Name<sub>0</sub></em>&#8230;&#8203;) <em>Body</em></code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>where <code><em>Body</em></code> is one of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{ <em>Statements</em> }</code></p>
</li>
<li>
<p><code>throws <em>Exception<sub>1</sub></em>, <em>Exception<sub>2</sub></em>, &#8230;&#8203; { <em>Statements</em> }</code></p>
</li>
<li>
<p><code>= <em>Expression</em>;</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>and where <code><em>Modifiers</em></code> may be:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>("public" | "private")? ("java" | "test" | "default")?</code></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_variant_1">4.7.1. Variant 1</h4>
<div class="paragraph">
<div class="title">Description</div>
<p>A function declaration introduces a new function with name <em>name</em>, typed formal parameters <code><em>Type</em><sub>1</sub> <em>Var</em><sub>1</sub></code>, a return type <em>Type</em>
and a <em>Statement</em> that forms the function body.
The type of <em>Statement</em> should be equal to <em>Type</em>.</p>
</div>
<div class="paragraph">
<p>The formal parameters may be used in <em>Statement</em> and get their value when function <em>Name</em> is invoked.</p>
</div>
</div>
<div class="sect3">
<h4 id="_variant_2">4.7.2. Variant 2</h4>
<div class="paragraph">
<p>A function may have a variable list of arguments, this has as syntax variant 2 given above.</p>
</div>
<div class="paragraph">
<p>The last parameter of a function may be followed by <code>&#8230;&#8203;</code> and this has as effect that all remaining actual parameters
that occur in a call to this function are collected as list value of the last formal parameter.
Inside the function body, the type of this parameter will therefore be <code>list[<em>Type</em><sub>0</sub>]</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_variant_3_and_4">4.7.3. Variant 3 and 4</h4>
<div class="paragraph">
<p>All formal parameter of a function can be <a href="#Rascal-Patterns">Patterns</a>. There are some restrictions however:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A Pattern in formal parameter positions may not refer to variables in the scope.</p>
</li>
<li>
<p>Patterns in formal parameter positions may not introduce fresh variables without an explicit type.</p>
</li>
<li>
<p>The last parameter, if followed by <code>&#8230;&#8203;</code> can only be a normal typed parameters, not just any pattern.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_body_types">4.7.4. Body types</h4>
<div class="ulist">
<ul>
<li>
<p>Functions with list of statements as bodies must eventually use <code>return</code> or <code>fail</code> on every control flow path.</p>
</li>
<li>
<p>The declarations to <code>throw</code> an exception are documentation only</p>
</li>
<li>
<p>Single expressions can be bodies of functions, the return value is the value of the expression.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_parameterized_types_in_function_declaration">4.7.5. Parameterized types in function declaration</h4>
<div class="paragraph">
<p>The types that occur in function declarations may also contain <a href="#StaticTyping-TypeParameters">Type Parameters</a>.
In this way functions can be defined for arbitrary types. The type variable is bound (statically) at by the types of the parameters given at location of the call. The result type must be used at least once in any of the parameters.</p>
</div>
</div>
<div class="sect3">
<h4 id="_overloading">4.7.6. Overloading</h4>
<div class="paragraph">
<p>Function definitions may be overloaded, i.e. a function with the same name may be defined twice and
a function may redefine a constructor of an <a href="#Declarations-AlgebraicDataType">Algebraic Data Type</a> or a <a href="#Declarations-SyntaxDefinition">Syntax Definition</a>.</p>
</div>
<div class="paragraph">
<p>There are some restrictions however:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Overloaded alternatives for the same function name but with different patterns must return the same type.</p>
</li>
<li>
<p>Overloaded alternatives for the same function name must have mutually exclusive patterns, unless one alternative is labeled <code>default</code> and the other is not. The patterns of formal parameters are mutually exclusive if for at least one parameter position:</p>
<div class="ulist">
<ul>
<li>
<p>They range over incomparable types, as in <code>int f(int a)</code> and <code>int f(real a)</code>, or</p>
</li>
<li>
<p>They range over different alternatives of an <a href="#Declarations-AlgebraicDataType">Algebraic Data Type</a>, as in <code>int f(and(Bool a, Bool b))</code> and <code>int f(or(Bool a, Bool b))</code></p>
</li>
<li>
<p>They range over different alternatives of a <a href="#Declarations-SyntaxDefinition">Syntax Definition</a></p>
</li>
<li>
<p>And note that deep matches using the <code>/</code> alternative are considered to be of type <code>value</code> and therefore overlap with all other patterns.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Overlapping patterns are allowed if the one alternative has the <code>default</code> modified while the other does not.</p>
</li>
<li>
<p>If a function is fallible, it uses the <code>fail</code> statement to back-track to a different alternative, then there must be a <code>default</code> alternative defined which can handle the general case. An [AlgebraicDataType] or a [SyntaxDefinition] with the same name and return type counts as a <code>default</code> alternative.</p>
</li>
<li>
<p><code>default</code> functions may not fail.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_modifiers">4.7.7. Modifiers</h4>
<div class="paragraph">
<p>The <em>Modifiers</em> affect <em>visibility</em> and <em>special behaviour</em> of functions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Visibility</em>: <code>private</code> declares that a function is only visible in the current module.
<code>public</code> declares that it is visible outside the module as well. When visibility is not specified, <code>private</code> is assumed.</p>
</li>
<li>
<p><em>Special Behaviour</em>:</p>
<div class="ulist">
<ul>
<li>
<p><code>java</code> declares that the body of the function is implemented in Java. The function should have a
<code>javaClass</code> annotation that determines where the Java implementation can be found.</p>
</li>
<li>
<p><code>test</code> declares that this is a test function. A test function is a boolean function (currently) without arguments.
It can be called as any other function. However, it can also be called automatically
by the unit test framework, by typing <code>:test</code> at the command line, see <a href="#Running-Help">Help</a>.</p>
</li>
<li>
<p><code>default</code> declares an alternative for an overloaded function that will only be tried after
all non-default alternatives have been tried. Note that <a href="#Declarations-AlgebraicDataType">Algebraic Data Type</a>s and <a href="#Declarations-SyntaxDefinition">Syntax Definition</a>s
<em>implicitly</em> define <code>default</code> functions that may be overloaded by normal <a href="#Declarations-Function">Function Declaration</a>s.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Declare a function</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;rel[int, int] invert(rel[int,int] R){
&gt;&gt;&gt;&gt;&gt;&gt;&gt;   return {&lt;Y, X&gt; | &lt;int X, int Y&gt; &lt;- R };
&gt;&gt;&gt;&gt;&gt;&gt;&gt;}
ok</code></pre>
</div>
</div>
<div class="paragraph">
<p>Call it</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;invert({&lt;1,10&gt;, &lt;2,20&gt;});
rel[int,int]: {
  &lt;10,1&gt;,
  &lt;20,2&gt;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the following example we illustrate the use of type variables in function declarations.
Declare an inversion function that is applicable to any binary relation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;rel[&amp;T2, &amp;T1] invert2(rel[&amp;T1,&amp;T2] R){
&gt;&gt;&gt;&gt;&gt;&gt;&gt;   return {&lt;Y, X&gt; | &lt;&amp;T1 X, &amp;T2 Y&gt; &lt;- R };
&gt;&gt;&gt;&gt;&gt;&gt;&gt;}
ok</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now apply it to relations with different types:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;invert2({&lt;1,10&gt;, &lt;2,20&gt;});
rel[int,int]: {
  &lt;10,1&gt;,
  &lt;20,2&gt;
}
rascal&gt;invert2({&lt;"mon", 1&gt;, &lt;"tue", 2&gt;});
rel[int,str]: {
  &lt;1,"mon"&gt;,
  &lt;2,"tue"&gt;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As another example declare a function that can be used to swap the elements of pairs of arbitrary types
(also see <a href="#Tuple-Subscription">Tuple Subscription</a>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;tuple[&amp;T2, &amp;T1] swap(tuple[&amp;T1, &amp;T2] TP) { return &lt;TP[1], TP[0]&gt;;}
ok
rascal&gt;swap(&lt;1, 2&gt;);
tuple[int,int]: &lt;2,1&gt;
rascal&gt;swap(&lt;"wed", 3&gt;);
tuple[int,str]: &lt;3,"wed"&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we use an overloaded definition with incomparable patterns:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;int f(int i) = 1;
ok
rascal&gt;int f(real r) = 2;
ok
rascal&gt;f(0);
int: 1
rascal&gt;f(0.0);
int: 2</code></pre>
</div>
</div>
<div class="paragraph">
<p>And we may use <code>default</code>, as in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;int f(0) = 1;
ok
rascal&gt;default int f(int n) = n * f(n - 1);
ok
rascal&gt;f(0);
int: 1
rascal&gt;f(2);
int: 2</code></pre>
</div>
</div>
<div class="paragraph">
<p>In combination with an <a href="#Declarations-AlgebraicDataType">Algebraic Data Type</a>, which defines <code>default</code> functions implicitly for every alternative,
we can define canonicalization functions. The same holds for <a href="#Declarations-SyntaxDefinition">Syntax Definition</a>s, see <a href="#SyntaxDefinition-Action">Action</a>s.</p>
</div>
<div class="paragraph">
<p>This definition implies a default function for t(), f() and neg(B):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;data B = t() | f() | neg(B);
ok</code></pre>
</div>
</div>
<div class="paragraph">
<p>the following definition will remove any nested neg before it is even constructed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;B neg(neg(B b)) = b;
ok
rascal&gt;neg(t());
B: neg(t())
rascal&gt;neg(neg(f()));
B: f()</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Declarations-SyntaxDefinition">4.8. Syntax Definition</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Syntax Definitions allow the definition of parsers for programming languages, domain-specific languages and data formats.</p>
</div>
<div class="ulist">
<div class="title">Syntax</div>
<ul>
<li>
<p><code><em>Start</em> syntax <em>Nonterminal</em> = <em>Alternatives</em>;</code></p>
</li>
<li>
<p><code>lexical <em>Nonterminal</em> = <em>Alternatives</em>;</code></p>
</li>
<li>
<p><code>layout <em>Nonterminal</em> = <em>Alternatives</em>;</code></p>
</li>
<li>
<p><code>keyword <em>Nonterminal</em> = <em>Alternatives</em>;</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>where <em>Start</em> is either <code>start</code> or nothing, and <em>Alternatives</em> are one of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><em>Tags</em> <em>Associativity</em> <em>Symbols</em></code></p>
</li>
<li>
<p><code><em>Tags</em> <em>Associativity</em> <em>Name</em> : <em>Symbols</em></code></p>
</li>
<li>
<p><code><em>Associativity</em> ( <em>Alternatives</em> )</code></p>
</li>
<li>
<p><code><em>Alternatives<sub>1</sub></em> | <em>Alternatives<sub>2</sub></em></code></p>
</li>
<li>
<p><code><em>Alternatives<sub>1</sub></em> &gt; <em>Alternatives<sub>2</sub></em></code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>where <em>Associativity</em> is nothing, or one of <code>assoc</code>, <code>left</code>, <code>right</code> or <code>non-assoc</code>, and <em>Tags</em> are a possibly empty list of tags.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Rascal supports full context-free grammars for syntax definition. It generates scannerless parsers from these definitions.
These parsers produce <a href="#SyntaxDefinition-ParseTrees">ParseTrees</a> that can be further processed by Rascal using <a href="#Expressions-ConcreteSyntax">Concrete Syntax</a> fragments
 in <a href="#Rascal-Patterns">Patterns</a> and <a href="#Rascal-Expressions">Expressions</a>, or they can be <em>imploded</em> to <a href="#Declarations-AlgebraicDataType">Algebraic Data Type</a>s.</p>
</div>
<div class="paragraph">
<p>There are four kinds of non-terminals that can be defined with slightly different characteristics.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Syntax</em> non-terminals are general context-free non-terminals. This mean left-recursion, right-recursion, any of the regular expression <a href="#SyntaxDefinition-Symbol">Symbol</a>s and all kinds of <a href="#SyntaxDefinition-Disambiguation">Disambiguation</a> can be used to define it.
It is important to note that in between the <em>Symbols</em> that define a syntax non-terminal the locally defined layout non-terminal will be interleaved.
For example, if you define <code>layout ML = [\ ]*;</code> and <code>syntax A = "a" "a"</code>, Rascal will <em>modify</em> the definition of A to <code>syntax A = "a" ML "a";</code> before generating a parser.</p>
</li>
<li>
<p><em>Lexical</em> non-terminals are just like <em>syntax</em> non-terminals, very much like <em>syntax</em> non-terminals.
However, the definition of a lexical is <em>not</em> modified with interleaved layout non-terminals.
And, the structure of lexicals is not traversed by the <a href="#Expressions-Visit">Visit</a> statement and equality is checked between lexicals
by checking the characters (not its structure) for equality.</p>
</li>
<li>
<p><em>Layout</em> non-terminals are just like <em>syntax</em> non-terminals as well. However, they are used to preprocess all <em>syntax</em> definitions in the same module scope (see above).</p>
</li>
<li>
<p><em>Keyword</em> non-terminals are <em>not</em> like <em>syntax</em> non-terminals. These only allow definition of enumeration of literal
symbols and single character classes. Keyword non-terminals play an important role in the semantics of <a href="#SyntaxDefinition-Disambiguation">Disambiguation</a>
where some disambiguation constructs require finite, non-empty enumeration of strings.
The prime example is the definition of reserved keywords.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each alternative of a syntax definition is defined by a list of <a href="#SyntaxDefinition-Symbol">Symbol</a>s. Each of the <a href="#SyntaxDefinition-Symbol">Symbol</a>s can be labeled or not.
The alternative of a defined syntax type may be labeled or not as well. With the label additional operations are activated on the corresponding parse trees:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>is</code> operator is defined for labeled alternatives (see <a href="#Expressions-Operators">Operators</a>).</p>
</li>
<li>
<p>The <code>has</code> operator is defined for labeled <a href="#SyntaxDefinition-Symbol">Symbol</a>s in the right-hand side (see <a href="#Expressions-Operators">Operators</a>).</p>
</li>
<li>
<p><a href="#SyntaxDefinition-Action">Action</a> functions can be written to override the construction of a parse tree, using the label of an alternative as the function name</p>
</li>
<li>
<p>[implode] uses labeled alternatives to map to an <a href="#Declarations-AlgebraicDataType">Algebraic Data Type</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Alternatives can be combined in a single <a href="#Declarations-SyntaxDefinition">Syntax Definition</a> using the <code>|</code>, <code>&gt;</code> and associativity combinators.
The latter two represent <a href="#SyntaxDefinition-Disambiguation">Disambiguation</a> constructs that you should read more about. The <code>|</code> is a short-hand for not having to repeat <code>syntax A =</code> for every alternative of <code>A</code>.</p>
</div>
<div class="paragraph">
<p>Alternatives can be named or not. The names are essential only if:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>you need to <a href="../Libraries/Libraries.html#ParseTree-implode">implode</a> <a href="#SyntaxDefinition-ParseTrees">ParseTrees</a></p>
</li>
<li>
<p>you need to use the <code>is</code> expression, as in <code>myStatement is ifThenElse</code> instead of using concrete pattern matching.</p>
</li>
<li>
<p>you want to write <a href="#SyntaxDefinition-Action">Action</a>s that triggers on the construction of the alternative.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>However, it is generally a good idea to name your rules even if you do not need them.
Note that a name may be reused for different alternatives for a single non-terminal,
provided that the lists of symbols for these "overloaded" alternatives use <em>different non-terminal symbols</em>.
This implies that alternatives for lexicals generally do not use overloaded names because they are often
defined only by regular expressions over terminal <a href="#SyntaxDefinition-Symbol">Symbol</a>s (literals and character classes).</p>
</div>
<div class="paragraph">
<p>The <em>start</em> modifier identifies the start of a grammar.
The effect of a start modifier is that Rascal will generate an extra syntax definition before generating a parser
that allows layout to before and after the start non-terminal.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">layout L = [\ ]*; start Program = Statement*;`</code></pre>
</div>
</div>
<div class="paragraph">
<p>will produce <code>syntax start[Program] = L Program <em>top</em> L;</code>.
Note that the <code>start[Program]</code> type is now available in your program, and <a href="#SyntaxDefinition-ParseTrees">ParseTrees</a> assigned to variable of that
type will allow access to the <em>top</em> field.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>The following example makes use of practically all of the <a href="#Declarations-SyntaxDefinition">Syntax Definition</a> features, except parse actions.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">// layout is lists of whitespace characters
layout MyLayout = [\t\n\ \r\f]*;

// identifiers are characters of lowercase alphabet letters,
// not immediately preceded or followed by those (longest match)
// and not any of the reserved keywords
lexical Identifier = [a-z] !&lt;&lt; [a-z]+ !&gt;&gt; [a-z] \ MyKeywords;

// this defines the reserved keywords used in the definition of Identifier
keyword MyKeywords = "if" | "then" | "else" | "fi";

// here is a recursive definition of expressions
// using priority and associativity groups.
syntax Expression
  = id: Identifier id
  | null: "null"
  | left multi: Expression l "*" Expression r
  &gt; left ( add: Expression l "+" Expression r
         | sub: Expression l "-" Expression r
         )
  | bracket "(" Expression ")"
  ;</code></pre>
</div>
</div>
<div class="ulist">
<div class="title">Benefits</div>
<ul>
<li>
<p>Modular and compositional.</p>
</li>
<li>
<p>No grammar normalization or grammar factoring necessary.</p>
</li>
<li>
<p>Generate a parser for any context-free grammar.</p>
</li>
<li>
<p>Generate parsers are really fast (for general parsers).</p>
</li>
<li>
<p>Powerful disambiguation constructs for common programming language disambiguation patterns.</p>
</li>
<li>
<p>Data-dependent (context-sensitive) disambiguation via arbitrary functions.</p>
</li>
<li>
<p>Embedding of concrete syntax fragments in Rascal programs</p>
</li>
<li>
<p><a href="#Declarations-SyntaxDefinition">Syntax Definition</a>s follow the syntax and semantics of <a href="#Declarations-AlgebraicDataType">Algebraic Data Type</a>s quite closely.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Pitfalls</div>
<ul>
<li>
<p>Grammars may be ambiguous, so read about <a href="#SyntaxDefinition-Disambiguation">Disambiguation</a>, <a href="#SyntaxDefinition-AmbiguityDetection">Ambiguity Detection</a> and <a href="#SyntaxDefinition-AmbiguityDiagnosis">Ambiguity Diagnosis</a>.</p>
</li>
<li>
<p>Static grammar checker is not implemented yet.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="SyntaxDefinition-Action">4.8.1. Action</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Actions are functions that are called when parse trees are constructed (right after parsing).</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>A so-called <a href="#SyntaxDefinition-Action">Action</a> is a normal rascal <a href="#Declarations-Function">Function Declaration</a> that overloads a <a href="#Declarations-SyntaxDefinition">Syntax Definition</a>.
A <a href="#Declarations-SyntaxDefinition">Syntax Definition</a>, very similar to <a href="#Declarations-AlgebraicDataType">Algebraic Data Type</a> definitions, defines a constructor for a parse tree node.
This constructor is the default function, and when it is overloaded by a non-default function this overloaded function will be tried first.
You can overload any labeled <a href="#Declarations-SyntaxDefinition">Syntax Definition</a> using the name of an alternative.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">syntax A = a: B  C;

public A a(B b, C c) {
  return f(b, c);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example <a href="#SyntaxDefinition-Action">Action</a> function the a is replaced by whatever A the <code>f</code> function returns.</p>
</div>
<div class="paragraph">
<p><a href="#SyntaxDefinition-Action">Action</a>s are executed every time a parse tree is constructed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Right after parsing.</p>
</li>
<li>
<p>On the way back from a visit statement.</p>
</li>
<li>
<p>When a <a href="#Expressions-ConcreteSyntax">Concrete Syntax</a> expression is executed.</p>
</li>
<li>
<p>When <a href="#SyntaxDefinition-ParseTrees">ParseTrees</a> are constructed "manually".</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>They can be used as a <a href="#SyntaxDefinition-Disambiguation">Disambiguation</a> method, using the <code>filter</code> statement, as in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">syntax E = id: Id i;
set[Id] types = {};

public E id(Id i) {
  if (i in types)
    filter; // remove this parse tree and all its parents up to the first amb node
  else
    fail; // just build the parse tree "E = id: Id i", by defaulting to the constructor
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="SyntaxDefinition-AmbiguityDetection">4.8.2. Ambiguity Detection</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Ambiguity detection helps to find ambiguities in syntax definitions.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>AmbiDexter is a tool that analyzes <a href="#Declarations-SyntaxDefinition">Syntax Definition</a>s, including their <a href="#SyntaxDefinition-Disambiguation">Disambiguation</a>s, to try and determine which ambiguities it contains.
Static detection of ambiguity is not decidable, nevertheless AmbiDexter does a fine job at finding them.</p>
</div>
<div class="ulist">
<div class="title">Benefits</div>
<ul>
<li>
<p>AmbiDexter can find ambiguity for you before testing the parser, after which you can use [AmbiguityDiagnosis] to explain it.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Pitfalls</div>
<ul>
<li>
<p>AmbiDexter is now a separate command-line tool which still needs integration</p>
</li>
<li>
<p>AmbiDexter is not a silver bullet. It has a time-limit to stop after having searcher only so much of a language. After the time limit has expired, your [SyntaxDefinition] may still be ambiguous.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="SyntaxDefinition-AmbiguityDiagnosis">4.8.3. Ambiguity Diagnosis</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Ambiguity diagnosis suggests changes to syntax definitions to make them non-ambiguous.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>The <code>Ambiguity</code> library, a.k.a. DrAmbiguity, contains a diagnosis tool that can help you find the causes of ambiguous
parse trees and possible <a href="#SyntaxDefinition-Disambiguation">Disambiguation</a>s to solve them in a <a href="#Declarations-SyntaxDefinition">Syntax Definition</a>.
DrAmbiguity is a library that processes any parse forest produced by a parser generated from Rascal&#8217;s <a href="#Declarations-SyntaxDefinition">Syntax Definition</a>s.
Please read <a href="#SyntaxDefinition-Disambiguation">Disambiguation</a> first.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">import Ambiguity;
diagnose(t); // for any t of which you know it contains an ambiguity</code></pre>
</div>
</div>
<div class="ulist">
<div class="title">Benefits</div>
<ul>
<li>
<p>DrAmbiguity automatically proposes <a href="#SyntaxDefinition-Disambiguation">Disambiguation</a>s that will work</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Pitfalls</div>
<ul>
<li>
<p>DrAmbiguity does not scale to large parse trees, so please first make your example smaller.</p>
</li>
<li>
<p>DrAmbiguity proposes several [Disambiguation]s for each ambiguity, only few of which make sense from a language design point of view!</p>
</li>
<li>
<p>DrAmbiguity is now only a library function, while it should be integrated into the Rascal IDE</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="SyntaxDefinition-Disambiguation">4.8.4. Disambiguation</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Disambiguation is the definition of filters on the parse trees that <a href="#Declarations-SyntaxDefinition">Syntax Definition</a>s define.
There are several ways of defining <a href="#SyntaxDefinition-Disambiguation">Disambiguation</a> in Rascal.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>There are generally three ways of removing ambiguity from parse forests that are produced by parsers generated from <a href="#SyntaxDefinition">[SyntaxDefinition]</a>s.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The first way is to add disambiguation declarations to the <a href="#Declarations-SyntaxDefinition">Syntax Definition</a>. You can choose from:</p>
<div class="ulist">
<ul>
<li>
<p><a href="#Disambiguation-Priority">Priority Declaration</a>s, which can be used to define the relative priority in expression languages</p>
</li>
<li>
<p><a href="#Disambiguation-Associativity">Associativity Declaration</a>s, which can be used to define relative associativity between operators of
expression languages</p>
</li>
<li>
<p><a href="#Disambiguation-Follow">Follow Declaration</a>s, which can be used to implement longest match using lookahead</p>
</li>
<li>
<p><a href="#Disambiguation-Precede">Precede Declaration</a>s, which can be used to implement first match using look behind</p>
</li>
<li>
<p><a href="#Reserve Declaration&gt;s">which allow you to finite sets of strings from a &lt;&lt;Syntax Definition</a>
to implement keyword reservation</p>
</li>
</ul>
</div>
</li>
<li>
<p>The second way is to add <a href="#SyntaxDefinition-Action">Action</a>s that will be triggered just after parsing and allow you to trim a parse forest
using any information necessary.</p>
</li>
<li>
<p>The third way is use the <a href="#Expressions-Visit">Visit</a> statement on a parse tree and implement your own filter post-parsing time,
or any other kind of program that processes <a href="#SyntaxDefinition-ParseTrees">ParseTrees</a>.</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="Disambiguation-Associativity">Associativity Declaration</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Define associativity of operators</p>
</div>
<div class="ulist">
<div class="title">Syntax</div>
<ul>
<li>
<p><code>syntax <em>Exp</em> = <em>Assoc</em> <em>Label</em> <em>Symbol<sub>1</sub></em> <em>Symbol<sub>2</sub></em> &#8230;&#8203;</code></p>
</li>
<li>
<p><code>syntax <em>Exp</em> = <em>Assoc</em> ( <em>Alt<sub>1</sub></em> | <em>Alt<sub>2</sub></em> | &#8230;&#8203; )</code></p>
</li>
<li>
<p><code>syntax <em>Exp</em> = <em>Assoc</em> <em>Symbol<sub>1</sub></em> <em>Symbol<sub>2</sub></em> &#8230;&#8203;</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here <em>Assoc</em> is one of: <code>left</code>, <code>right</code>, <code>assoc</code> or <code>non-assoc</code>. See <a href="#Declarations-SyntaxDefinition">Syntax Definition</a>s on how to define alternatives and <a href="#SyntaxDefinition-Symbol">Symbol</a>s.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Using Associativity declarations we may disambiguate binary recursive operators.</p>
</div>
<div class="paragraph">
<p>The semantics are that an associativity modifier will instruct the parser to disallow certain productions to nest <em>at particular argument positions</em>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>left</code> and <code>assoc</code> will disallow productions to directly nest in their <em>right-most</em> position.</p>
</li>
<li>
<p><code>right</code> will disallow productions to directly nest in their <em>left-most</em> position.</p>
</li>
<li>
<p><code>non-assoc</code> will disallow productions to directly nest in either their left-most or their right-most position.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When associativity is declared for a group of productions, e.g. <code>left ( <em>Alt</em><sub>1</sub> | <em>Alt <sub>2</sub></em> | <em>Alt</em><sub>3</sub>)</code>, then each alternative will be mutually associative to each other alternative <em>and itself</em>. If an alternative of a group defines its own local associativity, as in <code>left ( right <em>Alt</em><sub>1</sub> | <em>Alt</em><sub>2</sub> | <em>Alt</em><sub>3</sub>)</code>, then <em>Alt</em><sub>1</sub> is right associative with respect to itself and left associative with respect to all others in the group.</p>
</div>
<div class="paragraph">
<p>A finer point is that associativity has no effect on any other position than the left-most and right-most position (see also <a href="#Disambiguation-Priority">Priority Declaration</a>). This is to guarantee that associativity does not introduce parse errors. The following tables explain when an assocativity declaration filters given two productions <code>father</code> and <code>child</code> that share an associativity group.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">If `left (Parent</th>
<th class="tableblock halign-left valign-top">Child)`</th>
<th class="tableblock halign-left valign-top">Parent None: <code>E = "[" E "]"</code></th>
<th class="tableblock halign-left valign-top">Parent Left-most: <code>E = E "*"</code></th>
<th class="tableblock halign-left valign-top">Parent  Right-most: <code>E = "*" E</code></th>
<th class="tableblock halign-left valign-top">Parent Both: <code>E = E "*" E</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Child None:</em> <code>E = "{" E "}"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Child Left-most:</em> <code>E = E "+"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">No filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filter under right</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filter under right</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Child Right-most:</em> <code>E = "+" E</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No filter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">No filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Child Both:</em> <code>E = E "+" E</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No filter</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">If `right (Parent</th>
<th class="tableblock halign-left valign-top">Child)`</th>
<th class="tableblock halign-left valign-top">Parent None: <code>E = "[" E "]"</code></th>
<th class="tableblock halign-left valign-top">Parent Left-most: <code>E = E "*"</code></th>
<th class="tableblock halign-left valign-top">Parent  Right-most: <code>E = "*" E</code></th>
<th class="tableblock halign-left valign-top">Parent Both: <code>E = E "*" E</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Child None:</em> <code>E = "{" E "}"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Child Left-most:</em> <code>E = E "+"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">No filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Child Right-most:</em> <code>E = "+" E</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No filter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filter under left</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filter under left</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Child Both:</em> <code>E = E "+" E</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filter under left</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title">Benefits</div>
<ul>
<li>
<p>Short notation for common constructs in programming languages.</p>
</li>
<li>
<p>Removes ambiguity but can not introduce parse errors.</p>
</li>
<li>
<p>Allows the use of less non-terminals for the same expression grammar (typically only one), which makes parse trees simpler as well as the mapping to an abstract syntax tree more direct.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Pitfalls</div>
<ul>
<li>
<p>Please do not assume that Rascal&#8217;s associativity declarations have the same semantics as SDF&#8217;s associativity declarations.</p>
</li>
<li>
<p>Use of productions that are not both left and right recursive in an associativity group, although safe, is not very meaningful. We would advise to use the <a href="#Disambiguation-Priority">Priority Declaration</a> relation such a case. For example:</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Original associativity</th>
<th class="tableblock halign-left valign-top">Better written as priority</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">`E = left ( "+" E</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">E "+" E );`</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>E = E "" E &gt; "" E;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">`E = right ( "+" E</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">E "+" E );`</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>E = "" E &gt; E "" E;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">`E = left ( E "+"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">E "+" E);`</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>E = E "" &gt; E "" E;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">`E = right ( E "+"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">E "+" E);`</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>E = E "" E &gt; E "" ;</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="Disambiguation-Follow">Follow Declaration</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>A conditional <a href="#SyntaxDefinition-Symbol">Symbol</a>, constraining the characters that can immediately follow a symbol in the input source text.</p>
</div>
<div class="ulist">
<div class="title">Syntax</div>
<ul>
<li>
<p><code><em>Symbol</em> &gt;&gt; <em>constraint</em></code></p>
</li>
<li>
<p><code><em>Symbol</em> !&gt;&gt; <em>constraint</em></code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>where a <em>constraint</em> is any character class, a literal or a keyword non-terminal <a href="#SyntaxDefinition-Symbol">Symbol</a>.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Using <code>!&gt;&gt;</code>, the parser will not accept the <em>Symbol</em> if it is immediately followed by the <em>terminal</em> in the input string. If the end of the symbol coincides with end-of-file, the constraint will always succeed and the symbol is accepted.</p>
</div>
</div>
<div class="sect4">
<h5 id="Disambiguation-Precede">Precede Declaration</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>A conditional <a href="#SyntaxDefinition-Symbol">Symbol</a>, constraining the characters that can immediately precede a symbol in the input source text.</p>
</div>
<div class="ulist">
<div class="title">Syntax</div>
<ul>
<li>
<p><code><em>constraint</em> &lt;&lt; <em>Symbol</em></code></p>
</li>
<li>
<p><code><em>constraint</em> !&lt;&lt; <em>Symbol</em></code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>where a <em>constraint</em> is any character class, a literal or a keyword non-terminal <a href="#SyntaxDefinition-Symbol">Symbol</a>.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Using <code>!&lt;&lt;</code>, the parser will not accept the <em>Symbol</em> if it is immediately preceded by the <em>terminal</em> in the input string. If the start of the symbol coincides with start of the inout, the constraint will always succeed and the symbol is accepted.</p>
</div>
</div>
<div class="sect4">
<h5 id="Disambiguation-Priority">Priority Declaration</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Declare the priority of operators.</p>
</div>
<div class="ulist">
<div class="title">Syntax</div>
<ul>
<li>
<p><code>syntax <em>Exp</em> = <em>alt<sub>1</sub></em> &gt; <em>alt<sub>2</sub></em> &gt; <em>alt<sub>3</sub></em></code> is the basic syntax for priorities.</p>
</li>
<li>
<p><code>syntax <em>Exp</em> = <em>alt<sub>1</sub></em> | <em>alt<sub>2</sub></em> &gt; <em>alt<sub>3</sub></em> | <em>alt<sub>4</sub></em></code>, where the <code>|</code> signifies groups of equal priority</p>
</li>
<li>
<p><code>syntax <em>Exp</em> = <em>associativity</em> ( _alt<sub>1</sub> | &#8230;&#8203; ) &gt; _alt<sub>2</sub></code>, where an associativity group denotes a group of equal priority</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Priority declarations define a partial ordering between the productions <em>within a single non-terminal</em>. The feature is specifically designed to fit with the semantics of expression sub-languages embedded in programming languages. There exist other mechanisms for <a href="#SyntaxDefinition-Disambiguation">Disambiguation</a>, if <a href="#Disambiguation-Priority">Priority Declaration</a> does not work for you.</p>
</div>
<div class="paragraph">
<p>The semantics of a priority relation <code>A &gt; B</code> is that B will not be nested under A in the left-most or right-most position.
Any other position of A will allow B fine. Note that the priority relation you define is transitively closed, so if A &gt; B and B &gt; C then A &gt; C.</p>
</div>
<div class="paragraph">
<p>A finer point is that Rascal restricts the filtering of priority such that it is guaranteed that no parse errors occur at the cause of a priority. The following table defines when and where Rascal forbids a direct nesting between two productions <code>parent &gt; child</code>, depending on at which left-most or right-most positions the parent and the child are recursive.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">If <code>Parent &gt; Child</code></th>
<th class="tableblock halign-left valign-top">Parent None: <code>E = "[" E "]"</code></th>
<th class="tableblock halign-left valign-top">Parent Left-most: <code>E = E "*"</code></th>
<th class="tableblock halign-left valign-top">Parent  Right-most: <code>E = "*" E</code></th>
<th class="tableblock halign-left valign-top">Parent Both: <code>E = E "*" E</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Child None:</em> <code>E = "{" E "}"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No filter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Child Left-most:</em> <code>E = E "+"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filter under right</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filter under right</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Child Right-most:</em> <code>E = "+" E</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filter under left</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filter under left</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Child Both:</em> <code>E = E "+" E</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filter under left</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filter under right</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filter under left and right</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Examples</div>
<p>The following snippet uses all <a href="#Disambiguation-Priority">Priority Declaration</a> features:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">syntax Exp
  = A: Id
  | B: Number
  &gt; C: Exp "[" Exp "]"
  | D: Exp "!"
  &gt; E: Exp "*" Exp
  &gt; F: Exp "+" Exp;
  | bracket G: "(" Exp ")"
  ;</code></pre>
</div>
</div>
<div class="paragraph">
<p>A short explanation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>C and D share a group of equal priority. They are incomparable in the partial ordering. That&#8217;s fine because <code>1![2]</code> is not ambiguous.</p>
</li>
<li>
<p>Similarly A and B share a group; yet they are not recursive and so do not play any role in the priority ordering.</p>
</li>
<li>
<p>C and D both have higher priority then E and F, which means that E and F may not be directly nested under C or D.</p>
</li>
<li>
<p>However: E and F will be allowed under the second argument of C because it is not an outermost position. That&#8217;s fine because <code>1 [2 + 3]</code> is not ambiguous.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here a number of strings for this language, with brackets to show how they will be parsed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>"1 + 2 * 3" will be parsed as "1 + (2 * 3)" because E &gt; F.</p>
</li>
<li>
<p>"1 + 2 [ 3 ]" will be parsed as "1 + (2\[3\])" because C &gt; F.</p>
</li>
<li>
<p>"1 * 3!" will be parsed as "1 + (3!)" because D &gt; E.</p>
</li>
<li>
<p>"1 + [2 * 3]" will be parsed as "1 + ([2 * 3])" because priority is only defined for outermost positions.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Benefits</div>
<ul>
<li>
<p>Short notation for common expression grammars</p>
</li>
<li>
<p>Removes ambiguity but can not introduce parse errors</p>
</li>
<li>
<p>Allows the use of less non-terminals for the same expression grammar (typically only one), which makes parse trees simpler as well as the mapping to an abstract syntax tree more direct.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Pitfalls</div>
<ul>
<li>
<p>Please do not assume that Rascal&#8217;s priorities have the same semantics as SDF&#8217;s priorities.</p>
</li>
<li>
<p>When a priority does not have a filtering effect, such as in <code>E = E "+" &gt; E "<strong>"</code> it is usually better to use normal alternative composition: <code>E = E "+" | E "</strong>"</code>. There is no difference in the semantics of parsing, but the latter expression is more intentional.</p>
</li>
<li>
<p>You should not hide right or left recursion behind a nullable non-terminal, since the system will not filter the ambiguity then. Example:
E = left "a"? E "*" E &gt; E "" E will remain ambiguous. This should be written as: E = left ("a" E "*" E | E "*" E ) &gt; E "" E; (unfolding the optional such that E becomes explicitly left-most).</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Disambiguation-Reserve">Reserve Declaration</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Reserve is a conditional <a href="#SyntaxDefinition-Symbol">Symbol</a>, constraining the set of strings that a symbol may produce.</p>
</div>
<div class="ulist">
<div class="title">Syntax</div>
<ul>
<li>
<p><code><em>Symbol</em> \ <em>constraint</em></code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>where a <em>constraint</em> is any character class, a literal or a keyword non-terminal <a href="#SyntaxDefinition-Symbol">Symbol</a>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="SyntaxDefinition-ParseTrees">4.8.5. ParseTrees</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>The ParseTrees module defines an algebraic data-type for parse trees, which all parsers generated from [SyntaxDefinition]s produce.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Below is the full definition of <code>Tree</code> and <code>Production</code> and <code>Symbol</code>. A parse tree is a nested tree structure of type <code>Tree</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Most internal nodes are applications (<code>appl</code>) of a <code>Production</code> to a list of children <code>Tree</code> nodes. <code>Production</code> is the abstract representation of a [SyntaxDefinition] rule, which consists of a definition of an alternative for a <code>Symbol</code> by a list of <code>Symbols</code>.</p>
</li>
<li>
<p>The leaves of a parse tree are always
characters (<code>char</code>), which have an integer index in the UTF8 table.</p>
</li>
<li>
<p>Some internal nodes encode ambiguity (<code>amb</code>) by pointing to a set of
alternative <code>Tree</code> nodes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>Production</code> and <code>Symbol</code> types are an abstract notation for rules in <a href="#Declarations-SyntaxDefinition">Syntax Definition</a>s, while the <code>Tree</code> type is the actual notation
for parse trees.</p>
</div>
<div class="paragraph">
<p>Parse trees are called parse forests when they contain <code>amb</code> nodes.</p>
</div>
<div class="paragraph">
<p>You can analyze and manipulate parse trees in three ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Directly on the <code>Tree</code> level, just like any other <a href="#Declarations-AlgebraicDataType">Algebraic Data Type</a></p>
</li>
<li>
<p>Using <a href="#Expressions-ConcreteSyntax">Concrete Syntax</a></p>
</li>
<li>
<p>Using <a href="#SyntaxDefinition-Action">Action</a>s</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The type of a parse tree is the symbol that it&#8217;s production produces, i.e. <code>appl(prod(sort("A"),[],{}),[])</code> has type <code>A</code>. Ambiguity nodes
Each such a non-terminal type has <code>Tree</code> as its immediate super-type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">@license{
  Copyright (c) 2009-2015 CWI
  All rights reserved. This program and the accompanying materials
  are made available under the terms of the Eclipse Public License v1.0
  which accompanies this distribution, and is available at
  http://www.eclipse.org/legal/epl-v10.html
}
@contributor{Jurgen J. Vinju - Jurgen.Vinju@cwi.nl - CWI}
@contributor{Bas Basten - Bas.Basten@cwi.nl (CWI)}
@contributor{Tijs van der Storm - Tijs.van.der.Storm@cwi.nl}
@contributor{Paul Klint - Paul.Klint@cwi.nl - CWI}
@contributor{Arnold Lankamp - Arnold.Lankamp@cwi.nl}

@doc{
.Synopsis
Library functions for parse trees.

.Description

A _concrete syntax tree_ or http://en.wikipedia.org/wiki/Parse_tree[parse tree] is an ordered, rooted tree that
represents the syntactic structure of a string according to some formal grammar.

Most Rascal users will encounter parse trees in the form of concrete values.
Expert users may find the detailed description here useful when writing generic functions on parse trees.

In Rascal parse trees, the interior nodes are labeled by rules of the grammar,
while the leaf nodes are labeled by terminals (characters) of the grammar.

`Tree` is the universal parse tree data type in Rascal and can be used to represent parse trees for any language.

*  `Tree` is a subtype of the type link:{RascalLang}#Values-Node[node].
*  All types (non-terminals) declared in link:{RascalLang}#Declarations-SyntaxDefinition[syntax definitions] are sub-types of `Tree`.
*  All link:{RascalLang}#Expressions-ConcreteSyntax[concrete syntax expressions] produce parse trees with a type corresponding to a non-terminals.
*  Trees can be annotated in various ways, see features for link:{RascalLang}#Concepts-IDEConstruction[IDE construction].
   Most importantly the `\loc` annotation always points to the source location of any (sub) parse tree.


Parse trees are usually analyzed and constructed using
link:{RascalLang}#Expressions-ConcreteSyntax[concrete syntax expressions]
and link:{RascalLang}#Patterns-Concrete[concrete syntax patterns].

_Advanced users_ may want to create tools that analyze any parse tree, regardless of the
link:{RascalLang}#Declarations-SyntaxDefinition[syntax definition] that generated it, you can manipulate them on the abstract level.

A parse tree is of type &lt;&lt;ParseTree-Tree&gt;&gt; using the auxiliary types
&lt;&lt;ParseTree-Production&gt;&gt;, &lt;&lt;ParseTree-Symbol&gt;&gt;, &lt;&lt;ParseTree-Condition&gt;&gt;,
&lt;&lt;ParseTree-Attr&gt;&gt;, &lt;&lt;ParseTree-Associativity&gt;&gt;, &lt;&lt;ParseTree-CharRange&gt;&gt;.
Effectively, a parse tree is a nested tree structure of type `Tree`.

*  Most internal nodes are applications (`appl`) of a `Production` to a list of children `Tree` nodes.
   `Production` is the abstract representation of a rule in a
   link:{RascalLang}#Declarations-SyntaxDefinition[syntax definition],
   which consists of a definition of an alternative for a `Symbol` by a list of `Symbols`.
*  The leaves of a parse tree are always
characters (`char`), which have an integer index in the UTF8 table.

*  Some internal nodes encode ambiguity (`amb`) by pointing to a set of
alternative `Tree` nodes.


The `Production` and `Symbol` types are an abstract notation for rules in
link:{RascalLang}#Declarations-SyntaxDefinition[syntax definitions],
while the `Tree` type is the actual notation for parse trees.

Parse trees are called parse forests when they contain `amb` nodes.

You can analyze and manipulate parse trees in three ways:

*  Directly on the `Tree` level, just like any other link:{RascalLang}#Declarations-AlgebraicDataType[algebraic data type].
*  Using link:{RascalLang}#Expressions-ConcreteSyntax[concrete syntax expressions]
and link:{RascalLang}#Patterns-Concrete[concrete syntax patterns].
*  Using link:{RascalLang}#SynyaxDefinition-Action[actions].


The type of a parse tree is the symbol that it's production produces, i.e. `appl(prod(sort("A"),[],{}),[])` has type `A`. Ambiguity nodes
Each such a non-terminal type has `Tree` as its immediate super-type.

.Examples

// the following definition
[source,rascal-shell]</code></pre>
</div>
</div>
<div class="paragraph">
<p>import ParseTree;
syntax A = "a";</p>
</div>
<div class="listingblock">
<div class="content">
<pre>will make the following succeed:
[source,rascal-shell-continue]</pre>
</div>
</div>
<div class="paragraph">
<p>parse(#A,"a") ==
appl(
  prod(
    sort("A"),
    [lit("a")],
    {}),
  [appl(
      prod(
        lit("a"),
        [\char-class([range(97,97)])],
        {}),
      [char(97)])]);</p>
</div>
<div class="listingblock">
<div class="content">
<pre>You see that the defined non-terminal A ends up as the production for the outermost node.
As the only child is the tree for recognizing the literal a, which is defined to be a single a from the character-class `[ a ]`.

When we use labels in the definitions, they also end up in the trees.
The following definition
[source,rascal-shell]</pre>
</div>
</div>
<div class="paragraph">
<p>import ParseTree;
lexical B= myB:"b";
lexical C = myC:"c" B bLabel;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Will make the following succeed:

[source,rascal-shell-continue]</pre>
</div>
</div>
<div class="paragraph">
<p>parse(#C,"cb") ==
appl(
  prod(
    label(
      "myC",
      lex("C")),
    [
      lit("c"),
      label(
        "bLabel",
        lex("B"))
    ],
    {}),
  [appl(
      prod(
        lit("c"),
        [\char-class([range(99,99)])],
        {}),
      [char(99)]),appl(
      prod(
        label(
          "myB",
          lex("B")),
        [lit("b")],
        {}),
      [appl(
          prod(
            lit("b"),
            [\char-class([range(98,98)])],
            {}),
          [char(98)])])]);</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Here you see that the alternative name is a label around the first argument of `prod` while argument labels become
labels in the list of children of a `prod`.

.Examples

.Benefits

.Pitfalls
For historical reasons the name of the annotation is "loc" and this interferes with the Rascal keyword `loc`
for the type of link:{rascalLang}#Values-Location[source locations].
Therefore the annotation name has to be escaped as `\loc` when it is declared or used.

The following functions and data types are declared for ParseTrees:
}

module ParseTree

extend Type;
extend Message;
extend List;

@doc{
.Synopsis
The Tree data type as produced by the parser.

.Description

A `Tree` defines the trees normally found after parsing; additional constructors exist for execptional cases:

&lt;1&gt; Parse tree constructor when parse succeeded.
&lt;2&gt; Cyclic parsetree.
&lt;3&gt; Ambiguous subtree.
&lt;4&gt; A single character.
}

data Tree
     = appl(Production prod, list[Tree] args) <i class="conum" data-value="1"></i><b>(1)</b>
     | cycle(Symbol symbol, int cycleLength)  <i class="conum" data-value="2"></i><b>(2)</b>
     | amb(set[Tree] alternatives) <i class="conum" data-value="3"></i><b>(3)</b>
     | char(int character) <i class="conum" data-value="4"></i><b>(4)</b>
     ;

@doc{
.Synopsis
Production in ParseTrees

.Description

The type `Production` is introduced in &lt;&lt;Prelude-Type&gt;&gt;, see &lt;&lt;Type-Production&gt;&gt;. Here we extend it with the symbols
that can occur in a ParseTree. We also extend productions with basic combinators allowing to
construct ordered and un-ordered compositions, and associativity groups.

&lt;1&gt; A `prod` is a rule of a grammar, with a defined non-terminal, a list
    of terminal and/or non-terminal symbols and a possibly empty set of attributes.

&lt;2&gt; A `regular` is a regular expression, i.e. a repeated construct.

&lt;3&gt; A `error` represents a parse error.

&lt;4&gt; A `skipped` represents skipped input during error recovery.

&lt;5&gt; `priority` means ordered choice, where alternatives are tried from left to right;
&lt;6&gt; `assoc`  means all alternatives are acceptable, but nested on the declared side;
&lt;7&gt; `others` means '...', which is substituted for a choice among the other definitions;
&lt;8&gt; `reference` means a reference to another production rule which should be substituted there,
    for extending priority chains and such.
}
data Production
     = prod(Symbol def, list[Symbol] symbols, set[Attr] attributes) <i class="conum" data-value="1"></i><b>(1)</b>
     | regular(Symbol def) <i class="conum" data-value="2"></i><b>(2)</b>
     | error(Production prod, int dot) <i class="conum" data-value="3"></i><b>(3)</b>
     | skipped() <i class="conum" data-value="4"></i><b>(4)</b>
     ;

data Production
     = \priority(Symbol def, list[Production] choices) <i class="conum" data-value="5"></i><b>(5)</b>
     | \associativity(Symbol def, Associativity \assoc, set[Production] alternatives) <i class="conum" data-value="6"></i><b>(6)</b>
     | \others(Symbol def) <i class="conum" data-value="7"></i><b>(7)</b>
     | \reference(Symbol def, str cons) <i class="conum" data-value="8"></i><b>(8)</b>
     ;

@doc{
.Synopsis
Attributes in productions.

.Description

An `Attr` (attribute) documents additional semantics of a production rule. Neither tags nor
brackets are processed by the parser generator. Rather downstream processors are
activated by these. Associativity is a parser generator feature though.
}
data Attr
     = \assoc(Associativity \assoc)
     | \bracket()
     ;

@doc{
.Synopsis
Associativity attribute.

.Description

Associativity defines the various kinds of associativity of a specific production.
}
data Associativity
     = \left()
     | \right()
     | \assoc()
     | \non-assoc()
     ;

@doc{
.Synopsis
Character ranges and character class
.Description

*  `CharRange` defines a range of characters.
*  A `CharClass` consists of a list of characters ranges.
}
data CharRange = range(int begin, int end);

alias CharClass = list[CharRange];

@doc{
.Synopsis
Symbols that can occur in a ParseTree

.Description

The type `Symbol` is introduced in &lt;&lt;Prelude-Type&gt;&gt;, see &lt;&lt;Type-Symbol&gt;&gt;, to represent the basic Rascal types,
e.g., `int`, `list`, and `rel`. Here we extend it with the symbols that may occur in a ParseTree.

&lt;1&gt;  The `start` symbol wraps any symbol to indicate that it is a start symbol of the grammar and
        may occur at the root of a parse tree.
&lt;2&gt;  Context-free non-terminal
&lt;3&gt;  Lexical non-terminal
&lt;4&gt;  Layout symbols
&lt;5&gt;  Terminal symbols that are keywords
&lt;6&gt;  Parameterized context-free non-terminal
&lt;7&gt; Parameterized lexical non-terminal
&lt;8&gt;  Terminal.
&lt;9&gt;  Case-insensitive terminal.
&lt;10&gt; Character class
&lt;11&gt; Empty symbol
&lt;12&gt; Optional symbol
&lt;13&gt; List of one or more symbols without separators
&lt;14&gt; List of zero or more symbols without separators
&lt;15&gt; List of one or more symbols with separators
&lt;16&gt; List of zero or more symbols with separators
&lt;17&gt; Alternative of symbols
&lt;18&gt; Sequence of symbols
&lt;19&gt; Conditional occurrence of a symbol.

}
data Symbol <i class="conum" data-value="1"></i><b>(1)</b>
     = \start(Symbol symbol);

// These symbols are the named non-terminals.
data Symbol
     = \sort(str name) <i class="conum" data-value="2"></i><b>(2)</b>
     | \lex(str name)  <i class="conum" data-value="3"></i><b>(3)</b>
     | \layouts(str name)  <i class="conum" data-value="4"></i><b>(4)</b>
     | \keywords(str name) <i class="conum" data-value="5"></i><b>(5)</b>
     | \parameterized-sort(str name, list[Symbol] parameters) <i class="conum" data-value="6"></i><b>(6)</b>
     | \parameterized-lex(str name, list[Symbol] parameters)  <i class="conum" data-value="7"></i><b>(7)</b>
     ;

// These are the terminal symbols.
data Symbol
     = \lit(str string)   <i class="conum" data-value="8"></i><b>(8)</b>
     | \cilit(str string) <i class="conum" data-value="9"></i><b>(9)</b>
     | \char-class(list[CharRange] ranges) <i class="conum" data-value="10"></i><b>(10)</b>
     ;

// These are the regular expressions.
data Symbol
     = \empty() <i class="conum" data-value="11"></i><b>(11)</b>
     | \opt(Symbol symbol)  <i class="conum" data-value="12"></i><b>(12)</b>
     | \iter(Symbol symbol) <i class="conum" data-value="13"></i><b>(13)</b>
     | \iter-star(Symbol symbol)  <i class="conum" data-value="14"></i><b>(14)</b>
     | \iter-seps(Symbol symbol, list[Symbol] separators)      <i class="conum" data-value="15"></i><b>(15)</b>
     | \iter-star-seps(Symbol symbol, list[Symbol] separators) <i class="conum" data-value="16"></i><b>(16)</b>
     | \alt(set[Symbol] alternatives) <i class="conum" data-value="17"></i><b>(17)</b>
     | \seq(list[Symbol] symbols)     <i class="conum" data-value="18"></i><b>(18)</b>
     ;

data Symbol <i class="conum" data-value="19"></i><b>(19)</b>
     = \conditional(Symbol symbol, set[Condition] conditions);

public bool subtype(Symbol::\sort(_), Symbol::\adt("Tree", _)) = true;

@doc{
.Synopsis
Datatype for declaring preconditions and postconditions on symbols

.Description

A `Condition` can be attached to a symbol; it restricts the applicability
of that symbol while parsing input text. For instance, `follow` requires that it
is followed by another symbol and `at-column` requires that it occurs
at a certain position in the current line of the input text.
}
data Condition
     = \follow(Symbol symbol)
     | \not-follow(Symbol symbol)
     | \precede(Symbol symbol)
     | \not-precede(Symbol symbol)
     | \delete(Symbol symbol)
     | \at-column(int column)
     | \begin-of-line()
     | \end-of-line()
     | \except(str label)
     ;

@doc{
.Synopsis
Nested priority is flattened.
}
public Production priority(Symbol s, [*Production a, priority(Symbol t, list[Production] b), *Production c])
  = priority(s,a+b+c);

@doc{
.Synopsis
Normalization of associativity.

.Description

* Choice (see the `choice` constructor in &lt;&lt;Type-ParseTree&gt;&gt;) under associativity is flattened.
* Nested (equal) associativity is flattened.
* Priority under an associativity group defaults to choice.
}
public Production associativity(Symbol s, Associativity as, {*Production a, choice(Symbol t, set[Production] b)})
  = associativity(s, as, a+b);

public Production associativity(Symbol rhs, Associativity a, {associativity(rhs, Associativity b, set[Production] alts), *Production rest})
  = associativity(rhs, a, rest + alts) ;

//Production associativity(Symbol rhs, Associativity a, {prod(Symbol r2, list[Symbol] lhs, set[Attr] as), *Production rest})
//  = \associativity(rhs, a, {rest + {prod(r2, lhs, as + {\assoc(a)})}) when !(\assoc(_) &lt;- as);

Production associativity(Symbol rhs, Associativity a, set[Production] rest)
  = associativity(rhs, a, withAssoc + withNewAssocs)
  when  withoutAssoc := {p | p:prod(_,_,_) &lt;- rest, !(\assoc(_) &lt;- p.attributes)},
        withoutAssoc != {},
        withAssoc := rest - withoutAssoc,
        withNewAssocs := {p[attributes = p.attributes + {\assoc(a)}] | p &lt;- withoutAssoc}
        ;

public Production associativity(Symbol s, Associativity as, {*Production a, priority(Symbol t, list[Production] b)})
  = associativity(s, as, a + { e | e &lt;- b});

@doc{
.Synopsis
Annotate a parse tree node with a source location.
}
anno loc Tree@\loc;

@doc{
.Synopsis
Parse input text (from a string or a location) and return a parse tree.

.Description

*  Parse a string and return a parse tree.
*  Parse a string and return a parse tree, `origin` defines the original location of the input.
*  Parse the contents of resource input and return a parse tree.

.Examples
[source,rascal-shell,error]</pre>
</div>
</div>
<div class="paragraph">
<p>import demo::lang::Exp::Concrete::NoLayout::Syntax;
import ParseTree;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Seeing that `parse` returns a parse tree:
[source,rascal-shell,continue,error]</pre>
</div>
</div>
<div class="paragraph">
<p>parse(#Exp, "2+3");</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Catching a parse error:
[source,rascal-shell,continue,error]</pre>
</div>
</div>
<div class="paragraph">
<p>import IO;
try {
  Exp e = parse(#Exp, "2@3");
}
catch ParseError(loc l): {
  println("I found a parse error at line &lt;l.begin.line&gt;, column &lt;l.begin.column&gt;");
}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>}
@javaClass{org.rascalmpl.library.Prelude}
@reflect{uses information about syntax definitions at call site}
public java &amp;T&lt;:Tree parse(type[&amp;T&lt;:Tree] begin, str input, bool allowAmbiguity=false);

//@experimental
//@javaClass{org.rascalmpl.library.Prelude}
//@reflect{uses information about syntax definitions at call site}
//public java &amp;T&lt;:Tree parse(type[&amp;T&lt;:Tree] begin, map[Production robust, CharClass lookaheads] recovery, str input, loc origin);

@javaClass{org.rascalmpl.library.Prelude}
@reflect{uses information about syntax definitions at call site}
public java &amp;T&lt;:Tree parse(type[&amp;T&lt;:Tree] begin, str input, loc origin, bool allowAmbiguity=false);

@javaClass{org.rascalmpl.library.Prelude}
@reflect{uses information about syntax definitions at call site}
public java &amp;T&lt;:Tree parse(type[&amp;T&lt;:Tree] begin, loc input, bool allowAmbiguity=false);

@doc{
.Synopsis
Yield the string of characters that form the leafs of the given parse tree.

.Description
`unparse` is the inverse function of &lt;&lt;ParseTree-parse&gt;&gt;, i.e., for every syntactically correct string _TXT_ of
type `S`, the following holds:
[source,rascal,subs="quotes"]</pre>
</div>
</div>
<div class="paragraph">
<p>unparse(parse(#S, <em>TXT</em>)) == <em>TXT</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre>.Examples
[source,rascal-shell]</pre>
</div>
</div>
<div class="paragraph">
<p>import demo::lang::Exp::Concrete::NoLayout::Syntax;
import ParseTree;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>First parse an expression, this results in a parse tree. Then unparse this parse tree:
[source,rascal-shell,continue]</pre>
</div>
</div>
<div class="paragraph">
<p>unparse(parse(#Exp, "2+3"));</p>
</div>
<div class="listingblock">
<div class="content">
<pre>}
@javaClass{org.rascalmpl.library.Prelude}
public java str unparse(Tree tree);

@doc{
.Synopsis
Save the current object parser to a file.

.Description
`saveParser` will save the current object parser (constructed from (imported)
syntax declarations) to a file. The name of the parser class is returned,
for reference.

The saved parser can be used later on by loading the parser class from
the JAR file, instantiating it and calling the parse() method.

.Examples
[source,rascal]</pre>
</div>
</div>
<div class="paragraph">
<p>import ParseTree;
import demo::lang::Exp::Concrete::NoLayout::Syntax; //&lt;1&gt;</p>
</div>
<div class="paragraph">
<p>saveParser(|file:///tmp/Exp.jar|); //&lt;2&gt;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;1&gt; Import a grammar.
&lt;2&gt; Save the parser to a JAR file.
}
@javaClass{org.rascalmpl.library.Prelude}
@reflect{uses evaluator's parser interface}
public java str saveParser(loc outFile);

@javaClass{org.rascalmpl.library.Prelude}
public java str printSymbol(Symbol sym, bool withLayout);

@javaClass{org.rascalmpl.library.Prelude}
@reflect{Uses Evaluator to create constructors in the caller scope (to fire rewrite rules).}
@doc{
.Synopsis
Implode a parse tree according to a given (ADT) type.

.Description

Given a grammar for a language, its sentences can be parsed and the result is a parse tree
(or more precisely a value of type `Tree`). For many applications this is sufficient
and the results are achieved by traversing and matching them using concrete patterns.

In other cases, the further processing of parse trees is better done in a more abstract form.
The http://en.wikipedia.org/wiki/Abstract_syntax[abstract syntax] for a language is a
data type that is used to represent programs in the language in an _abstract_ form.
Abstract syntax has the following properties:

*  It is "abstract" in the sense that it does not contain textual details such as parentheses,
  layout, and the like.
*  While a language has one grammar (also known as, _concrete syntax_) it may have several abstract syntaxes
  for different purposes: type analysis, code generation, etc.


The function `implode` bridges the gap between parse tree and abstract syntax tree.
Given a parse tree and a Rascal type it traverses them simultaneously and constructs
an abstract syntax tree (a value of the given type) as follows:

*  Literals, layout and empty (i.e. ()) nodes are skipped.

*  Regular */+ lists are imploded to `list`s or `set`s depending on what is
  expected in the ADT.

*  Ambiguities are imploded to `set`s.

*  If the expected type is `str` the tree is unparsed into a string. This happens for both
  lexical and context-free parse trees.

*  If a tree's production has no label and a single AST (i.e. non-layout, non-literal) argument
  (for instance, an injection), the tree node is skipped, and implosion continues
  with the lone argument. The same applies to bracket productions, even if they
  are labeled.

*  If a tree's production has no label, but more than one argument, the tree is imploded
  to a tuple (provided this conforms to the ADT).

*  Optionals are imploded to booleans if this is expected in the ADT.
  This also works for optional literals, as shown in the example below.

*  An optional is imploded to a list with zero or one argument, iff a list
  type is expected.

*  If the argument of an optional tree has a production with no label, containing
  a single list, then this list is spliced into the optional list.

*  For trees with (cons-)labeled productions, the corresponding constructor
  in the ADT corresponding to the non-terminal of the production is found in
  order to make the AST.

*  If the provided type is `node`, (cons-)labeled trees will be imploded to untyped `node`s.
  This means that any subtrees below it will be untyped nodes (if there is a label), tuples of
  nodes (if a label is absent), and strings for lexicals.

*  Unlabeled lexicals are imploded to str, int, real, bool depending on the expected type in
  the ADT. To implode lexical into types other than str, the PDB parse functions for
  integers and doubles are used. Boolean lexicals should match "true" or "false".
  NB: lexicals are imploded this way, even if they are ambiguous.

*  If a lexical tree has a cons label, the tree imploded to a constructor with that name
  and a single string-valued argument containing the tree's yield.


An `IllegalArgument` exception is thrown if during implosion a tree is encountered that cannot be
imploded to the expected type in the ADT. As explained above, this function assumes that the
ADT type names correspond to syntax non-terminal names, and constructor names correspond
to production labels. Labels of production arguments do not have to match with labels
 in ADT constructors.

Finally, source location annotations are propagated as annotations on constructor ASTs.
To access them, the user is required to explicitly declare a location annotation on all
ADTs used in implosion. In other words, for every ADT type `T`, add:

[source,rascal]</pre>
</div>
</div>
<div class="paragraph">
<p>anno loc T@location;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>.Examples
Here are some examples for the above rules.

.Example for rule 5

Given the grammar
[source,rascal]</pre>
</div>
</div>
<div class="paragraph">
<p>syntax IDTYPE = Id ":" Type;
syntax Decls = decls: "declare" {IDTYPE ","}* ";";</p>
</div>
<div class="listingblock">
<div class="content">
<pre>`Decls` will be imploded as:
[source,rascal]</pre>
</div>
</div>
<div class="paragraph">
<p>data Decls = decls(list[tuple[str,Type]]);</p>
</div>
<div class="listingblock">
<div class="content">
<pre>(assuming Id is a lexical non-terminal).

.Example for rule 6

Given the grammar
[source,rascal]</pre>
</div>
</div>
<div class="paragraph">
<p>syntax Formal = formal: "VAR"? {Id ","}+ ":" Type;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>The corresponding ADT could be:
[source,rascal]</pre>
</div>
</div>
<div class="paragraph">
<p>data Formal = formal(bool, list[str], Type);</p>
</div>
<div class="listingblock">
<div class="content">
<pre>.Example for rule 8

Given the grammar
[source,rascal]</pre>
</div>
</div>
<div class="paragraph">
<p>syntax Tag = "[" {Modifier ","}* "]";
syntax Decl = decl: Tag? Signature Body;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>In this case, a `Decl` is imploded into the following ADT:
[source,rascal]</pre>
</div>
</div>
<div class="paragraph">
<p>data Decl = decl(list[Modifier], Signature, Body);</p>
</div>
<div class="listingblock">
<div class="content">
<pre>.Example for rule 9

Given the grammar
[source,rascal]</pre>
</div>
</div>
<div class="paragraph">
<p>syntax Exp = left add: Exp "+" Exp;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Can be imploded into:
[source,rascal]</pre>
</div>
</div>
<div class="paragraph">
<p>data Exp = add(Exp, Exp);</p>
</div>
<div class="listingblock">
<div class="content">
<pre>}
public java &amp;T&lt;:value implode(type[&amp;T&lt;:value] t, Tree tree);

@doc{
.Synopsis
Annotate a parse tree node with an (error) message.
}
public anno Message Tree@message;

@doc{
.Synopsis
Annotate a parse tree node with a list of (error) messages.
}
public anno set[Message] Tree@messages;

@doc{
.Synopsis
Annotate a parse tree node with a documentation string.
}
anno str Tree@doc;

@doc{
.Synopsis
Annotate a parse tree node with documentation strings for several locations.

}
anno map[loc,str] Tree@docs;


@doc{
.Synopsis
Annotate a parse tree node with the target of a reference.
}
anno loc Tree@link;

@doc{
.Synopsis
Annotate a parse tree node with multiple targets for a reference.
}
anno set[loc] Tree@links;

@doc{
.Synopsis
Tree search result type for &lt;&lt;treeAt&gt;&gt;.
}
public data TreeSearchResult[&amp;T&lt;:Tree] = treeFound(&amp;T tree) | treeNotFound();


@doc{
.Synopsis
Select the innermost Tree of a given type which is enclosed by a given location.

.Description
}
public TreeSearchResult[&amp;T&lt;:Tree] treeAt(type[&amp;T&lt;:Tree] t, loc l, a:appl(_, _)) {
	if ((a@\loc)?, al := a@\loc, al.offset &lt;= l.offset, al.offset + al.length &gt;= l.offset + l.length) {
		for (arg &lt;- a.args, TreeSearchResult[&amp;T&lt;:Tree] r:treeFound(&amp;T&lt;:Tree _) := treeAt(t, l, arg)) {
			return r;
		}

		if (&amp;T&lt;:Tree tree := a) {
			return treeFound(tree);
		}
	}
	return treeNotFound();
}

public default TreeSearchResult[&amp;T&lt;:Tree] treeAt(type[&amp;T&lt;:Tree] t, loc l, Tree root) = treeNotFound();

public bool sameType(label(_,Symbol s),Symbol t) = sameType(s,t);
public bool sameType(Symbol s,label(_,Symbol t)) = sameType(s,t);
public bool sameType(Symbol s,conditional(Symbol t,_)) = sameType(s,t);
public bool sameType(conditional(Symbol s,_), Symbol t) = sameType(s,t);
public bool sameType(Symbol s, s) = true;
public default bool sameType(Symbol s, Symbol t) = false;

@doc{
.Synopsis
Determine if the given type is a non-terminal type.
}
public bool isNonTerminalType(Symbol::\sort(str _)) = true;
public bool isNonTerminalType(Symbol::\lex(str _)) = true;
public bool isNonTerminalType(Symbol::\layouts(str _)) = true;
public bool isNonTerminalType(Symbol::\keywords(str _)) = true;
public bool isNonTerminalType(Symbol::\parameterized-sort(str _, list[Symbol] _)) = true;
public bool isNonTerminalType(Symbol::\parameterized-lex(str _, list[Symbol] _)) = true;
public bool isNonTerminalType(Symbol::\start(Symbol s)) = isNonTerminalType(s);
public default bool isNonTerminalType(Symbol s) = false;</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">// the following definition
syntax A = "a";
// would make the following [Test] succeed:
test a() = parse(#A,"a") == appl(prod(sort("A"),[lit("a")],{}),[appl(prod(lit("a"),[\char-class([range(97,97)]),[char(97)])]);
// you see that the defined non-terminal A ends up as the production for the outermost node. As the only child is the tree for recognizing the literal a, which is defined to be a single a from the character-class [ a ].</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">// when we use labels in the definitions, they also end up in the trees:
// the following definition
lexical A = myA:"a" B bLabel;
lexical B = myB:"b";
// would make the following [Test] succeed:
test a() = parse(#A,"ab") == appl(prod(label("myA",lex("A")),[lit("a"),sort("bLabel",lex("B"))],{}),[appl(prod(lit("a"),[\char-class([range(97,97)]),[char(97)]),appl(prod(label("myB", lex("B"),[lit("b")],{}),[appl(prod(lit("b"),[\char-class([range(98,98)]),[char(98)])]) ]);
// here you see that the alternative name is a label around the first argument of `prod` while argument labels become labels in the list of children of a `prod`.</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="SyntaxDefinition-Symbol">4.8.6. Symbol</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>The symbols that can occur in a syntax definition.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p>Nonterminal symbols are identifier names that <em>start with an uppercase letter</em>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Symbol</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Symbol</em> <em>fieldName</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any symbol can be labeled with a field name that <em>starts with a lowercase letter</em></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The following literal symbols and character classes are defined:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 40%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Symbol</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"<em>stringliteral</em>"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Literal string</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'<em>stringliteral</em>'</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Case-insensitive literal string</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[<em>range<sub>1</sub></em> <em>range<sub>2</sub></em> &#8230;&#8203; ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Character class</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The following operations on character classes can be composed arbitrarily:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 40%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Class</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>!<em>Class</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Complement of <code><em>Class</em></code> with respect to the UTF8 universe of characters</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Class<sub>1</sub></em> - <em>Class<sub>2</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Difference of character classes <code><em>Class<sub>1</sub></em></code> and <code><em>Class<sub>2</sub></em></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Class<sub>1</sub></em> || <em>Class<sub>2</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Union of character classes <code><em>Class<sub>1</sub></em></code> and <code><em>Class<sub>2</sub></em></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Class<sub>1</sub></em> &amp;&amp; <em>Class<sub>2</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intersection of character classes <code><em>Class<sub>1</sub></em></code> and <code><em>Class<sub>2</sub></em></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(<em>Class</em>)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Brackets for defining application order of class operators</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The following regular expressions can be constructed over <a href="#SyntaxDefinition-Symbol">Symbol</a>s:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 40%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Symbol</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Symbol</em>?</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional <em>Symbol</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Symbol</em>+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non-empty list of _Symbol_s</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Symbol</em>*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Possibly empty list of _Symbol_s.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{<em>Symbol<sub>1</sub></em> <em>Symbol<sub>2</sub></em>}+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non-empty list of <em>Symbol<sub>1</sub></em> separated by <em>Symbol<sub>2</sub></em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{<em>Symbol<sub>1</sub></em> <em>Symbol<sub>2</sub></em>}*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Possibly empty list of <em>Symbol<sub>1</sub></em> separated by <em>Symbol<sub>2</sub></em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(<em>Symbol<sub>1</sub></em> <em>Symbol<sub>2</sub></em> &#8230;&#8203; )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Embedded sequence of symbols</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(<em>Symbol<sub>1</sub></em> | <em>Symbol<sub>2</sub></em> | &#8230;&#8203; )</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Embedded choice of alternative symbols</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The anonymous non-terminal for the language with the empty string</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Inline conditions (<a href="#SyntaxDefinition-Disambiguation">Disambiguation</a>s) can be added to symbols to constrain their acceptability:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 40%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Disambiguation</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Symbol</em> _</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Symbol</em> ends at end of line or end of file</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>^<em>Symbol</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Symbol</em> starts at begin of line</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Symbol</em> @ <em>ColumnIndex</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Symbol</em> starts at certain column index.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Symbol<sub>1</sub></em> &gt;&gt; <em>Symbol<sub>2</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Symbol<sub>1</sub></em> must be (directly) followed by <em>Symbol<sub>2</sub></em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Symbol<sub>1</sub></em> !&gt;&gt; <em>Symbol<sub>2</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Symbol<sub>1</sub></em> must <em>not</em> be (directly) followed by <em>Symbol<sub>2</sub></em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Symbol<sub>1</sub></em> &lt;&lt; <em>Symbol<sub>2</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Symbol<sub>2</sub></em> must be (directly) preceded by <em>Symbol<sub>1</sub></em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Symbol<sub>1</sub></em> !&lt;&lt; <em>Symbol<sub>2</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Symbol<sub>2</sub></em> must <em>not</em> be (directly) preceded by <em>Symbol<sub>1</sub></em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Symbol<sub>1</sub></em> \ <em>Symbol<sub>2</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Symbol<sub>1</sub></em> must not be in the language defined by <em>Symbol<sub>2</sub></em></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Symbols can be composed arbitrarily.</p>
</div>
<div class="paragraph">
<div class="title">Types</div>
<p>Every non-terminal symbol is a type.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>The basic symbols are the non-terminal name and the labeled non-terminal name.
These refer to the names defined by <a href="#Declarations-SyntaxDefinition">Syntax Definition</a>.
You can use any defined non-terminal name in any other definition (lexical in syntax, syntax in lexical, etc).</p>
</div>
<div class="paragraph">
<p>Then we have literals and character classes to define the <em>terminals</em> of a grammar.
When you use a literal such as <code>"begin"</code>, Rascal will produce a definition for it down to the character level before generating a parser: <code>syntax "begin" = [b][e][g][i][n];</code>. This effect will be visible in the <a href="#SyntaxDefinition-ParseTrees">ParseTrees</a> produced by the parser. For case insensitive literals you will see a similar effect; the use of <code>'begin'</code> produces <code>syntax 'begin' = [bB][eE][gG][iI][nN]</code>.</p>
</div>
<div class="paragraph">
<p>Character classes have the same escaping conventions as characters in a <a href="#Values-String">String</a> literal, but spaces and newlines are meaningless and have to be escaped and the <code>[</code> and <code>]</code> brackets as well as the dash <code>-</code> need escaping. For example, one writes <code>[\[ \] \ \n\-]</code> for a class that includes the open and close square brackets and a space, a newline and a dash. Character classes support ranges as in <code>[a-zA-Z0-9]</code>. Please note about character classes that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the operations on character classes are executed before parser generation time. You will not find explicit representation of these operations in [ParseTrees], but rather their net effect as resulting character classes.</p>
</li>
<li>
<p>Character classes are also ordered by Rascal and overlapping ranges are merged before parsers are generated. Equality between character classes is checked after this canonicalization.</p>
</li>
<li>
<p>Although all <a href="#SyntaxDefinition-Symbol">Symbol</a>s are type constructors, the character class operators are not allowed in types.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The other symbols either <em>generate</em> for you parts of the construction of a grammar, or they <em>constrain</em> the rules of the grammar to generate a smaller set of trees as <a href="#SyntaxDefinition-Disambiguation">Disambiguation</a>s.</p>
</div>
<div class="paragraph">
<p>The <em>generative symbols</em> are referred to as the <em>regular symbols</em>. These are like named non-terminals, except that they are defined implicitly and interpreted by the parser generator to produce a parser that can recognize a symbol optionally, iteratively, alternatively, sequentially, etc. You also need to know this about the regular symbols:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <a href="#SyntaxDefinition-ParseTrees">ParseTrees</a> you will find special nodes for the regular expression symbols that hide <em>how</em> these were recognized.</p>
</li>
<li>
<p><a href="#Rascal-Patterns">Patterns</a> using <a href="#ConcreteSyntax">[ConcreteSyntax]</a> have special semantics for the regular symbols (list matching, separator handling, ignoring layout, etc.).</p>
</li>
<li>
<p>Regular symbols are not allowed in <em>keyword</em> <a href="#Declarations-SyntaxDefinition">Syntax Definition</a>s</p>
</li>
<li>
<p>Depending on their occurrence in a <em>lexical</em>, <em>syntax</em> or <em>layout</em> <a href="#Declarations-SyntaxDefinition">Syntax Definition</a>
the semantics of regular symbols changes. In the <em>syntax</em> context, layout non-terminals will be woven
into the regular symbol, but not in the <em>lexical</em> and <em>layout</em> contexts.
For example, a <code><em>Symbol</em>*</code> in a <em>syntax</em> definition such as <code>syntax X = A*;</code> will be processed to <code>syntax X = `{A Layout}*</code>. Similarly, <code>syntax X = {A B}+;</code> will be processed to <code>syntax X = {A (Layout B Layout)}+;</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <em>constraint</em> symbols are specially there to deal with the fact that Rascal does not generate a scanner. There are no a priori disambiguation rules such as prefer keywords or longest match. Instead, you should use the constraint symbols to define the effect of keyword reservation and longest match.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It is important to note that these constraints work on a character-by-character level in the input stream. So, a follow constraint such as <code>A &gt;&gt; [a-z]</code> means that the character immediately following a recognized A must be in the range <code>[a-z]</code>.</p>
</li>
<li>
<p>Read more on the constraint symbols via <a href="#SyntaxDefinition-Disambiguation">Disambiguation</a>s.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>A character class that defines all alphanumeric characters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">lexical AlphaNumeric = [a-zA-Z0-9];</code></pre>
</div>
</div>
<div class="paragraph">
<p>A character class that defines anything except quotes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">lexical AnythingExceptQuote = ![\"];</code></pre>
</div>
</div>
<div class="paragraph">
<p>An identifier class with longest match (can not be followed immediately by [a-z]):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">lexical Id = [a-z]+ !&gt;&gt; [a-z];</code></pre>
</div>
</div>
<div class="paragraph">
<p>An identifier class with longest match and first match (can not be preceded or followed by [a-z]):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;lexical Id = [a-z] !&lt;&lt; [a-z]+ !&gt;&gt; [a-z];
ok</code></pre>
</div>
</div>
<div class="paragraph">
<p>An identifier class with some reserved keywords and longest match:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">lexical Id = [a-z]+ !&gt;&gt; [a-z] \ "if" \ "else" \ "fi";</code></pre>
</div>
</div>
<div class="paragraph">
<p>An optional else branch coded using sequence and optional symbols:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">syntax Statement = "if" Expression "then" Statement ("else" Statement)? "fi";</code></pre>
</div>
</div>
<div class="paragraph">
<p>A block of statements separated by semicolons:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">syntax Statement = "{" {Statement ";"}* "}";</code></pre>
</div>
</div>
<div class="paragraph">
<p>A declaration with an embedded list of alternative modifiers and a list of typed parameters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">syntax Declaration = ("public" | "private" | "static" | "final")* Type Id "(" {(Type Id) ","}* ")" Statement;</code></pre>
</div>
</div>
<div class="ulist">
<div class="title">Benefits</div>
<ul>
<li>
<p>The symbol language is very expressive and can lead to short definitions of complex syntactic constructs.</p>
</li>
<li>
<p>There is no built-in longest match for iterators, which makes syntax definitions open to languages that do not have longest match.</p>
</li>
<li>
<p>There is no built-in keyword preference or reservation, which makes syntax definitions open to language composition and legacy languages.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Pitfalls</div>
<ul>
<li>
<p>By nesting too many symbols definitions can be become hard to understand.</p>
</li>
<li>
<p>By nesting too many symbols pattern matching and term construction becomes more complex. Extra non-terminals and rules with meaningful names can make a language specification more manageable.</p>
</li>
<li>
<p>The lack of automatic longest match and prefer keyword heuristics (you have to define it yourself), sometimes leads to unexpected ambiguity. See [Disambiguation].</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Declarations-Alias">4.9. Alias Declaration</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Declare an alias for a type.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>alias <em>Name</em>  = <em>Type</em>;</code></p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Everything can be expressed using the elementary types and values that are provided by Rascal.
However, for the purpose of documentation and readability it is sometimes better to use a descriptive name as type indication, rather than an elementary type.  The use of aliases is a good way to document your intentions.</p>
</div>
<div class="paragraph">
<p>An alias declaration states that <em>Name</em> can be used everywhere instead of the already defined type <em>Type</em>.
Both types are thus structurally equivalent.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell"></code></pre>
</div>
</div>
<div class="paragraph">
<p>Introduce two aliases <code>ModuleId</code> and <code>Frequency</code> for the type str.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;alias ModuleId = str;
ok
rascal&gt;alias Frequency = int;
ok</code></pre>
</div>
</div>
<div class="paragraph">
<p>Another example is an alias definition for a graph containing integer nodes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;alias IntGraph = rel[int,int];
ok</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the Rascal Standard Library provides a graph data type that is defined as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;alias Graph[&amp;T] = rel[&amp;T, &amp;T];
ok</code></pre>
</div>
</div>
<div class="paragraph">
<p>In other words the standard graph datatype can be parameterized with any element type.</p>
</div>
<div class="paragraph">
<p>See <a href="#StaticTyping-TypeParameters">Type Parameters</a> for other examples parameterized alias declarations.</p>
</div>
</div>
<div class="sect2">
<h3 id="Declarations-Annotation">4.10. Annotation Declaration</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Declare an annotation type for nodes.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>anno <em>AnnoType</em> <em>OnType</em> @ <em>Name</em></code></p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>An annotation may be associated with any node value, be it a pure node or some <a href="#Declarations-AlgebraicDataType">Algebraic Data Type</a> derived from it.</p>
</div>
<div class="paragraph">
<p>Annotations are intended to attach application data to values,
like adding position information or control flow information to source code or adding visualization information to a graph.</p>
</div>
<div class="paragraph">
<p>An annotation declaration defines:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>AnnoType</em>, the type of the annotation values,</p>
</li>
<li>
<p><em>OnType</em>, the type of the values that are being annotated,</p>
</li>
<li>
<p><em>Name</em>, the name of the annotation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Any value of any named type can be annotated and the type of these annotations can be declared precisely.</p>
</div>
<div class="paragraph">
<p>The following constructs are provided for handling annotations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><em>Val</em> @ <em>Anno</em></code>: is an expression that retrieves the value of annotation <em>Anno</em> of value <em>Val</em> (may be undefined!). See [Selection].</p>
</li>
<li>
<p><code><em>Val<sub>1</sub></em>[@<em>Anno</em> = <em>Val<sub>2</sub></em>]</code>: is an expression that sets the value of annotation <em>Anno</em> of the value <em>Val<sub>1</sub></em> to <em>Val<sub>2</sub></em>
and returns <em>Val<sub>1</sub></em> with the new annotation value as result. See <a href="#Expressions-Replacement">Replacement</a>.</p>
</li>
<li>
<p><code><em>Var</em> @ <em>Anno</em> = <em>Val</em></code>: is an assignment statement that sets the value of annotation <em>Anno</em> of the value of variable <em>Var</em> to <em>Val</em>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Here is a declaration of an annotation that attaches location information to certain syntactic constructs of
programs (e.g., <code>EXPRESSION</code>) with name <code>posinfo</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">anno loc EXPRESSION @ posinfo;</code></pre>
</div>
</div>
<div class="paragraph">
<p>One can also add such location information to all syntax trees:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">anno loc Tree @ posinfo;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Given a graph datatype, one can define an annotation with name <code>LayoutStrategy</code> that defines which
graph layout algorithm to apply to a particular graph, e.g.,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;data Graph = vertex(str name, int x, int y) | edge(str from, str to);
ok
rascal&gt;data LayoutStrategy = dot() | tree() | force() | hierarchy() | fisheye();
ok
rascal&gt;anno LayoutStrategy Graph @ strategy;
ok
rascal&gt;G = vertex("root", 0, 0);
Graph: vertex("root",0,0)
rascal&gt;G @ strategy = fisheye();
LayoutStrategy: fisheye()</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Declarations-Tag">4.11. Tag Declaration</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Tag declarations are not implemented (yet).</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Tag declarations explain which type the expected value of a tag should have.</p>
</div>
<div class="ulist">
<div class="title">Benefits</div>
<ul>
<li>
<p>They help the type checker to find common errors and they can help the parser to parse the contents of a string tag using a context-free grammar declaration.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Pitfalls</div>
<ul>
<li>
<p>Not yet implemented, so basically tags are not checked</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Rascal-Patterns">5. Patterns</h2>
<div class="sectionbody">
<div class="paragraph">
<div class="title">Synopsis</div>
<p>The various patterns that can be used for pattern matching.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>The following patterns are available:</p>
</div>
<div class="paragraph">
<p>Patterns may be used in:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>cases of a <a href="#Statements-Switch">Switch</a> or <a href="#Expressions-Visit">Visit</a>,</p>
</li>
<li>
<p>on the left of the <a href="#Boolean-Match">Boolean Match</a> operator (<code>:=</code>),</p>
</li>
<li>
<p>on the left of the <a href="#Comprehensions-Enumerator">Enumerator</a> operator (<code>&#8592;</code>), and</p>
</li>
<li>
<p>as formal parameters of <a href="#Declarations-Function">Function Declaration</a>s.</p>
</li>
<li>
<p><a href="#Statements-TryCatch">Try Catch</a> statements to match thrown exceptions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each pattern binds variables in a conditional scope. A case statement is such a scope, so are the conditions of if, for, and while and the generators of comprehensions.</p>
</div>
<div class="sect2">
<h3 id="Patterns-Abstract">5.1. Abstract Patterns</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Abstract patterns.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Syntax</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Pattern</th>
<th class="tableblock halign-left valign-top">Syntax</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Literal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Values-Boolean">Boolean</a>, <a href="#Values-Integer">Integer</a>, <a href="#Values-Real">Real</a>, <a href="#Values-Number">Number</a>, <a href="#Values-String">String</a>, <a href="#Values-Location">Location</a>, or <a href="#Values-DateTime">DateTime</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variable declaration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Type</em> <em>Var</em></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multi-variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*<em>Var</em></code>, <code>*<em>Type</em> <em>Var</em></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Var</em></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">List</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[ <em>Pat<sub>1</sub></em>, <em>Pat<sub>2</sub></em>, &#8230;&#8203;, <em>Pat<sub>n</sub></em> ]</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{ <em>Pat<sub>1</sub></em>, <em>Pat<sub>2</sub></em>, &#8230;&#8203;, <em>Pat<sub>n</sub></em> }</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tuple</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt; <em>Pat<sub>1</sub></em>, <em>Pat<sub>2</sub></em>, &#8230;&#8203;, <em>Pat<sub>n</sub></em> &gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Node</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Name</em> ( <em>Pat<sub>1</sub></em>, <em>Pat<sub>2</sub></em>, &#8230;&#8203;, <em>Pat<sub>n</sub></em> )</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Descendant</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/ <em>Pat</em></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Labelled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Var</em> : <em>Pat</em></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TypedLabelled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Type</em> <em>Var</em> : <em>Pat</em></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TypeConstrained</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[<em>Type</em>] <em>Pat</em></code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>An abstract pattern is recursively defined and may contain the following elements:</p>
</div>
<div class="paragraph">
<div class="title">Pitfalls</div>
<p>Map patterns are not (yet?) supported.</p>
</div>
<div class="sect3">
<h4 id="Abstract-Descendant">5.1.1. Descendant Pattern</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Deep match in an abstract pattern.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>A descendant pattern
performs a deep match of the pattern <em>Pat</em>. In other words, it matches when any element of the subject at any depth
that matches <em>Pat</em> and is used to match, for instance, tree nodes at an arbitrary distance from the root.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import IO;
ok
rascal&gt;data ColoredTree = leaf(int N)
&gt;&gt;&gt;&gt;&gt;&gt;&gt;                 | red(ColoredTree left, ColoredTree right)
&gt;&gt;&gt;&gt;&gt;&gt;&gt;                 | black(ColoredTree left, ColoredTree right);
ok
rascal&gt;T = red(red(black(leaf(1), leaf(2)), black(leaf(3), leaf(4))), black(leaf(5), leaf(4)));
ColoredTree: red(
  red(
    black(
      leaf(1),
      leaf(2)),
    black(
      leaf(3),
      leaf(4))),
  black(
    leaf(5),
    leaf(4)))</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we match for <code>black</code> nodes with <code>leaf(4)</code> as second argument:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;for(/black(_,leaf(4)) := T)
&gt;&gt;&gt;&gt;&gt;&gt;&gt;    println("Match!");
Match!
Match!
list[void]: []</code></pre>
</div>
</div>
<div class="paragraph">
<p>We use an <em>anonymous variable</em> <code>_</code> at a position where we don&#8217;t care about the actual value that is matched.
In order to print the actual values of the matches, we would need an [Abstract/Labelled] pattern.</p>
</div>
<div class="paragraph">
<p>Here we match all leaves that occur as second argument of <code>black</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;for(/black(_,leaf(int N)) := T)
&gt;&gt;&gt;&gt;&gt;&gt;&gt;    println("Match &lt;N&gt;");
Match 2
Match 4
Match 4
list[void]: []</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we list all integers that occur in any leaf:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;for(/int N := T)
&gt;&gt;&gt;&gt;&gt;&gt;&gt;    println("Match &lt;N&gt;");
Match 1
Match 2
Match 3
Match 4
Match 5
Match 4
list[void]: []</code></pre>
</div>
</div>
<div class="paragraph">
<p>Rather than printing, we can also collect them in a list using [$Statements/Append]:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;for(/int N := T)
&gt;&gt;&gt;&gt;&gt;&gt;&gt;    append N;
list[int]: [1,2,3,4,5,4]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Abstract-Labelled">5.1.2. Labelled Pattern</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Labelled abstract pattern.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>A labelled pattern matches the same values as <em>Pat</em>, but has as side-effect that the matched value is assigned to <em>Var</em>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import IO;
ok
rascal&gt;data ColoredTree = leaf(int N)
&gt;&gt;&gt;&gt;&gt;&gt;&gt;                 | red(ColoredTree left, ColoredTree right)
&gt;&gt;&gt;&gt;&gt;&gt;&gt;                 | black(ColoredTree left, ColoredTree right);
ok
rascal&gt;T = red(red(black(leaf(1), leaf(2)), black(leaf(3), leaf(4))), black(leaf(5), leaf(4)));
ColoredTree: red(
  red(
    black(
      leaf(1),
      leaf(2)),
    black(
      leaf(3),
      leaf(4))),
  black(
    leaf(5),
    leaf(4)))
rascal&gt;for(/M:black(_,leaf(4)) := T)
&gt;&gt;&gt;&gt;&gt;&gt;&gt;    println("Match &lt;M&gt;");
Match black(leaf(3),leaf(4))
Match black(leaf(5),leaf(4))
list[void]: []</code></pre>
</div>
</div>
<div class="paragraph">
<p>We use an <strong>anonymous variable</strong> <code>_</code> at a position where we don&#8217;t care about the actual value that is matched.</p>
</div>
</div>
<div class="sect3">
<h4 id="Abstract-List">5.1.3. List Pattern</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>List in abstract pattern.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>A list pattern matches a list value (the subject), provided that <em>Pat</em><sub>1</sub>, <em>Pat</em><sub>2</sub>, &#8230;&#8203;, <em>Pat</em><sub>n</sub> match the elements of that list in order.
Special cases exist when one of the patterns <em>Pat</em><sub>i</sub> is</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a <a href="#Abstract-Variable">Variable Pattern</a> with a type that is identical to the element type of the subject list: the variable is matched with the value at the corresponding position in the subject list.</p>
</li>
<li>
<p>a <a href="#Abstract-MultiVariable">MultiVariable Pattern</a>, with an optional element type that is identical to the element type of the subject list: list matching is applied and the variable can match an arbitrary number of elements of the subject list.</p>
</li>
<li>
<p>a <a href="#Abstract-Variable">Variable Pattern</a>, where the variable has been declared with a list type, but not initialized, outside the pattern: list matching is applied and the variable can match an arbitrary number of elements of the subject list.</p>
</li>
<li>
<p>a <a href="#Variable] Pattern">[Variable] Pattern]</a>, where the variable has been declared with a type equal to the element type of the subject, but not initialized, outside the pattern: the variable is matched with the value at the corresponding position in the subject list.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import IO;
ok</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>A single variable</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>rascal&gt;if([10, int N, 30, 40, 50] := [10, 20, 30, 40, 50])
&gt;&gt;&gt;&gt;&gt;&gt;&gt;   println("Match succeeded, N = &lt;N&gt;");
Match succeeded, N = 20
ok</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>An untyped multi-variable:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>rascal&gt;if([10, *L, 50] := [10, 20, 30, 40, 50])
&gt;&gt;&gt;&gt;&gt;&gt;&gt;   println("Match succeeded, L = &lt;L&gt;");
Match succeeded, L = [20,30,40]
ok</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>A typed multi-variable:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>rascal&gt;if([10, *int L, 50] := [10, 20, 30, 40, 50])
&gt;&gt;&gt;&gt;&gt;&gt;&gt;   println("Match succeeded, L = &lt;L&gt;");
Match succeeded, L = [20,30,40]
ok</pre>
</div>
</div>
<div class="paragraph">
<p>A list pattern may also be <em>non-linear</em>, i.e., it may contain uses of variables that were bound earlier in the pattern
(here, the second occurence of <code>L</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;if([10, *L, 40, *L, 50] := [10, 20, 30, 40, 20, 30, 50])
&gt;&gt;&gt;&gt;&gt;&gt;&gt;   println("Match succeeded, L = &lt;L&gt;");
Match succeeded, L = [20,30]
ok</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we see an example, where all pairs of equal elements in a list are printed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;for([*L1, int N, *L2, N, *L3] := [ 5, 10, 20, 30, 40, 30, 15, 20, 10])
&gt;&gt;&gt;&gt;&gt;&gt;&gt;    println("N = &lt;N&gt;");
N = 10
N = 20
N = 30
list[void]: []</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we print all ways in which a given list can be partitioned in two lists:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;for([*L1, *L2] := [10, 20, 30, 40, 50])
&gt;&gt;&gt;&gt;&gt;&gt;&gt;    println("&lt;L1&gt; and &lt;L2&gt;");
[] and [10,20,30,40,50]
[10] and [20,30,40,50]
[10,20] and [30,40,50]
[10,20,30] and [40,50]
[10,20,30,40] and [50]
[10,20,30,40,50] and []
list[void]: []</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Already declared list variable:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>rascal&gt;list[int] L;
ok
rascal&gt;if([10, L, 50] := [10, 20, 30, 40, 50])
&gt;&gt;&gt;&gt;&gt;&gt;&gt;   println("Match succeeded, L = &lt;L&gt;");
int: 666</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Already declared element variable:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>rascal&gt;int N;
ok
rascal&gt;if([10, N, 30, 40, 50] := [10, 20, 30, 40, 50])
&gt;&gt;&gt;&gt;&gt;&gt;&gt;   println("Match succeeded, N = &lt;N&gt;");
Match succeeded, N = 20
ok</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Abstract-Literal">5.1.4. Literal Pattern</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Literal in abstract pattern.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>A literal of one of the basic types <a href="#Values-Boolean">Boolean</a>, <a href="#Values-Integer">Integer</a>, <a href="#Values-Real">Real</a>, <a href="#Values-Number">Number</a>, <a href="#Values-String">String</a>, <a href="#Values-Location">Location</a>, or <a href="#Values-DateTime">DateTime</a>
can be used as abstract pattern.
A literal pattern matches with a value that is identical to the literal.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>A literal pattern matches with a value that is equal to it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;123 := 123
bool: true
rascal&gt;"abc" := "abc"
bool: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>A literal pattern does not match with a value that is not equal to it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;123 := 456
bool: false
rascal&gt;"abc" := "def"
bool: false</code></pre>
</div>
</div>
<div class="paragraph">
<p>A literal pattern should be of the same type as the subject it is matched with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;123 := "abc";
[error] Cannot match an expression of type: type(str(),()) against a pattern of type type(int(),())</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Abstract-MultiVariable">5.1.5. MultiVariable Pattern</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Multi-variable (also known as Splice-variable) in abstract pattern.</p>
</div>
<div class="ulist">
<div class="title">Syntax</div>
<ul>
<li>
<p><code>*<em>Var</em></code></p>
</li>
<li>
<p><code>*<em>Type</em> <em>Var</em></code></p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>A multi-variable is an abbreviation for a variable declaration pattern.
It can occur in a list pattern or set pattern and can match zero or more list or set elements.
Optionally the <strong>element type</strong> of the multi-variable may be specified.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import IO;
ok</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using lists:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;if([10, *N, 50] := [10, 20, 30, 40, 50])
&gt;&gt;&gt;&gt;&gt;&gt;&gt;   println("Match succeeds, N == &lt;N&gt;");
Match succeeds, N == [20,30,40]
ok</code></pre>
</div>
</div>
<div class="paragraph">
<p>the above is equivalent with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;if([10, *int N, 50] := [10, 20, 30, 40, 50])
&gt;&gt;&gt;&gt;&gt;&gt;&gt;   println("Match succeeds, N == &lt;N&gt;");
Match succeeds, N == [20,30,40]
ok</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using sets:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;if({10, *S, 50} := {50, 40, 30, 30, 10})
&gt;&gt;&gt;&gt;&gt;&gt;&gt;   println("Match succeeds, S == &lt;S&gt;");
Match succeeds, S == {40,30}
ok</code></pre>
</div>
</div>
<div class="paragraph">
<p>the above is equivalent with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;if({10, *int S, 50} := {50, 40, 30, 30, 10})
&gt;&gt;&gt;&gt;&gt;&gt;&gt;   println("Match succeeds, S == &lt;S&gt;");
Match succeeds, S == {40,30}
ok</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Pitfalls</div>
<p>In older versions of Rascal the type of a multi-variable had to be a list or set type.</p>
</div>
</div>
<div class="sect3">
<h4 id="Abstract-Node">5.1.6. Node pattern</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Node in abstract pattern.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>A node pattern matches a node value or a datatype value, provided that <em>Name</em> matches with the constructor symbol of that value
and <em>Pat</em><sub>1</sub>, <em>Pat</em><sub>2</sub>, &#8230;&#8203;, <em>Pat</em><sub>n</sub>  match the children of that value in order.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell"></code></pre>
</div>
</div>
<div class="paragraph">
<p>Match on node values (recall that the function symbol of a node has to be quoted, see [Values/Node]):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import IO;
ok
rascal&gt;if("f"(A,13,B) := "f"("abc", 13, false))
&gt;&gt;&gt;&gt;&gt;&gt;&gt;   println("A = &lt;A&gt;, B = &lt;B&gt;");
A = abc, B = false
ok</code></pre>
</div>
</div>
<div class="paragraph">
<p>Define a data type and use it to match:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;data Color = red(int N) | black(int N);
ok
rascal&gt;if(red(K) := red(13))
&gt;&gt;&gt;&gt;&gt;&gt;&gt;   println("K = &lt;K&gt;");
K = 13
ok</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Abstract-Set">5.1.7. Set Pattern</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Set in abstract pattern.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>A set pattern matches a set value (the subject), provided that <em>Pat</em><sub>1</sub>, <em>Pat</em><sub>2</sub>, &#8230;&#8203;, <em>Pat</em><sub>n</sub> match the elements of that set in <strong>any</strong> order
(recall that the elements of a set are unordered and do not contain duplicates).
Completely analogous to list patterns, there are special cases when one of the patterns <em>Pat</em><sub>i</sub> is</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a <a href="#Abstract-VariableDeclaration">Variable Declaration Pattern</a> with a type that is identical to the element type of the subject set: the variable is matched with one value  in the subject set.</p>
</li>
<li>
<p>a <a href="#Abstract-MultiVariable">MultiVariable Pattern</a>, with an optional element type that is identical to the element type of the subject set: set matching is applied and the variable can match an arbitrary number (in arbitrary order) of elements of the subject set.</p>
</li>
<li>
<p>a <a href="#Abstract-Variable">Variable Pattern</a>, where the variable has been declared with a set type, but not initialized, outside the pattern: set matching is applied and the variable can match an arbitrary number (in arbitrary order) of elements of the subject set.</p>
</li>
<li>
<p>a <a href="#Abstract-Variable">Variable Pattern</a>, where the variable has been declared with a type equal to the element type of the subject, but not initialized, outside the pattern: the variable is matched with one value in the subject set.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import IO;
ok</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>A single variable</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>rascal&gt;if({10, 30, 40, 50, int N} := {10, 20, 30, 40, 50})
&gt;&gt;&gt;&gt;&gt;&gt;&gt;   println("Match succeeded, N = &lt;N&gt;");
Match succeeded, N = 20
ok</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>An untyped multi-variable:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>rascal&gt;if({10, *S, 50} := {50, 40, 30, 20, 10})
&gt;&gt;&gt;&gt;&gt;&gt;&gt;   println("Match succeeded, S = &lt;S&gt;");
Match succeeded, S = {40,20,30}
ok</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>A typed multi-variable:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>rascal&gt;if({10, *int S, 50} := {50, 40, 30, 20, 10})
&gt;&gt;&gt;&gt;&gt;&gt;&gt;   println("Match succeeded, S = &lt;S&gt;");
Match succeeded, S = {40,20,30}
ok</pre>
</div>
</div>
<div class="paragraph">
<p>Here we see an example, where all possible splits of a set in two subsets are printed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;for({*S1, *S2} :={30, 20, 10})
&gt;&gt;&gt;&gt;&gt;&gt;&gt;    println("&lt;S1&gt; and &lt;S2&gt;");
{10,20,30} and {}
{20,30} and {10}
{10,30} and {20}
{30} and {10,20}
{10,20} and {30}
{20} and {10,30}
{10} and {20,30}
{} and {10,20,30}
list[void]: []</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Already declared set variable:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>rascal&gt;set[int] S;
ok
rascal&gt;if({10, *S, 50} := {10, 20, 30, 40, 50})
&gt;&gt;&gt;&gt;&gt;&gt;&gt;   println("Match succeeded, S = &lt;S&gt;");
Match succeeded, S = {40,20,30}
ok</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Already declared element variable:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>rascal&gt;int N;
ok
rascal&gt;if({10, N, 30, 40, 50} := {50, 40, 30, 20, 10})
&gt;&gt;&gt;&gt;&gt;&gt;&gt;   println("Match succeeded, N = &lt;N&gt;");
Match succeeded, N = 20
ok</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Abstract-Tuple">5.1.8. Tuple Pattern</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Tuple in abstract pattern.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>A tuple pattern matches a tuple value, provided that <em>Pat</em><sub>1</sub>, <em>Pat</em><sub>2</sub>, &#8230;&#8203;, <em>Pat</em><sub>n</sub>  match the elements of that tuple in order.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import IO;
ok
rascal&gt;if(&lt;A, B, C&gt; := &lt;13, false, "abc"&gt;)
&gt;&gt;&gt;&gt;&gt;&gt;&gt;   println("A = &lt;A&gt;, B = &lt;B&gt;, C = &lt;C&gt;");
A = 13, B = false, C = abc
ok</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Abstract-TypeConstrained">5.1.9. Type Constrained Pattern</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Type constrained abstract pattern.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>A type constrained pattern matches provided that the subject has type <em>Type</em> and <em>Pat</em> matches. This can be handy in case of ambiguity (say more than one constructor with the same name), or in case the pattern is completely general. See an example below:</p>
</div>
<div class="paragraph">
<p>Warning: This does not seem to work properly. There is a bug.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import IO;
ok</code></pre>
</div>
</div>
<div class="paragraph">
<p>Some example data type which contains generic values as well as specific expressions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;data Exp = val(value v) | add(Exp l, Exp r) | sub(Exp l, Exp r);
ok
rascal&gt;ex = add(add(val("hello"(1,2)),val("bye")), sub(val(1),val(2)));
Exp: add(
  add(
    val("hello"(1,2)),
    val("bye")),
  sub(
    val(1),
    val(2)))</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we constrain the match to find only Exps:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;visit (ex) {
&gt;&gt;&gt;&gt;&gt;&gt;&gt;  case [Exp] str name(_,_) : println("node name is &lt;name&gt;");
&gt;&gt;&gt;&gt;&gt;&gt;&gt;}
node name is add
node name is sub
node name is add
Exp: add(
  add(
    val("hello"(1,2)),
    val("bye")),
  sub(
    val(1),
    val(2)))</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we do not constrain the same pattern:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;visit (ex) {
&gt;&gt;&gt;&gt;&gt;&gt;&gt;  case str name(_,_) : println("node name is &lt;name&gt;");
&gt;&gt;&gt;&gt;&gt;&gt;&gt;}
node name is hello
node name is add
node name is sub
node name is add
Exp: add(
  add(
    val("hello"(1,2)),
    val("bye")),
  sub(
    val(1),
    val(2)))</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Abstract-TypedLabelled">5.1.10. Typed and Labelled Pattern</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Typed, labelled, abstract pattern.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>A typed, labelled, pattern matches when the subject value has type <em>Type</em> and <em>Pat</em> matches.
The matched value is assigned to <em>Var</em>.</p>
</div>
<div class="paragraph">
<p>This construct is used for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>binding the <em>whole pattern</em> to a variable while also matching some stuff out of it: <code>MyType t : someComplexPattern(f(int a), int b))</code>.
This is similar to <a href="#Abstract-Labelled">Labelled Pattern</a>s but with an extra type</p>
</li>
<li>
<p>to assert that the pattern has a certain type. This can be useful in disambiguating a constructor name, as in the example below.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import IO;
ok
rascal&gt;data Lang = add(Lang l, Lang r) | number(int i);
ok
rascal&gt;data Exp = id(str n) | add(Exp l, Exp r) | subtract(Exp l, Exp r) | otherLang(Lang a);
ok
rascal&gt;ex = add(id("x"), add(id("y"), otherLang(add(number(1),number(2)))));
Exp: add(
  id("x"),
  add(
    id("y"),
    otherLang(add(
        number(1),
        number(2)))))
rascal&gt;visit (ex) {
&gt;&gt;&gt;&gt;&gt;&gt;&gt;  case Lang l:add(_,_) : println("I found a Lang &lt;l&gt;");
&gt;&gt;&gt;&gt;&gt;&gt;&gt;  case Exp e:add(_,_)  : println("And I found an Exp &lt;e&gt;");
&gt;&gt;&gt;&gt;&gt;&gt;&gt;}
I found a Lang add(number(1),number(2))
And I found an Exp add(id("y"),otherLang(add(number(1),number(2))))
And I found an Exp add(id("x"),add(id("y"),otherLang(add(number(1),number(2)))))
Exp: add(
  id("x"),
  add(
    id("y"),
    otherLang(add(
        number(1),
        number(2)))))</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Abstract-Variable">5.1.11. Variable Pattern</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Variable in abstract pattern.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><em>Var</em></p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>A variable pattern can act in two roles:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If <em>Var</em> has already a defined value then it matches with that value.</p>
</li>
<li>
<p>If <em>Var</em> has not been defined before (or it has been declared but not initialized) then it matches any value.
    That value is assigned to <em>Var</em>. The scope of this variable is the outermost expression in which the pattern occurs
or the enclosing <a href="#Statements-If">If</a>, <a href="#Statements-While">While</a>, or <a href="#Statements-Do">Do</a> if the pattern occurs in the test expression of those statements.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Initialize variable <code>N</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;N = 10;
int: 10</code></pre>
</div>
</div>
<div class="paragraph">
<p>and use <code>N</code> in a pattern; its value is used as value to match with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;N := 10;
ok
rascal&gt;N := 20;
ok</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use a non-existing variable in a pattern, it is bound when the match succeeds:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import IO;
ok
rascal&gt;if(M := 10)
&gt;&gt;&gt;&gt;&gt;&gt;&gt;   println("Match succeeded, M == &lt;M&gt;");
Match succeeded, M == 10
ok</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Abstract-VariableDeclaration">5.1.12. Variable Declaration Pattern</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Variable declaration in abstract pattern.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>A variable declaration</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal"><em>Type</em> <em>Var</em></code></pre>
</div>
</div>
<div class="paragraph">
<p>can be used as abstract pattern.
A variable declaration introduces a new variable <em>Var</em> that matches any value of the given type <em>Type</em>.
That value is assigned to <em>Var</em> when the whole match succeeds.</p>
</div>
<div class="paragraph">
<p>The scope of this variable is the outermost expression in which the pattern occurs
or the enclosing <a href="#Statements-If">If</a>, <a href="#Statements-While">While</a>, or <a href="#Statements-Do">Do</a> if the pattern occurs in the test expression of those statements.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Let&#8217;s first perform a match that succeeds:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;str S := "abc";
bool: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>and now we attempt to inspect the value of <code>S</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;S;
[error] Name S is not in scope</code></pre>
</div>
</div>
<div class="paragraph">
<p>As mentioned above: <code>S</code> is only bound in the scope of the match expression!
Let&#8217;s explore how bindings work in an if statement:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import IO;
ok
rascal&gt;if(str S := "abc")
&gt;&gt;&gt;&gt;&gt;&gt;&gt;   println("Match succeeds, S == \"&lt;S&gt;\"");
Match succeeds, S == "abc"
ok</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Patterns-Concrete">5.2. Concrete Patterns</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Concrete patterns.</p>
</div>
<div class="listingblock">
<div class="title">Syntax</div>
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">` <em>Token<sub>1</sub></em> <em>Token<sub>2</sub></em> ... <em>Token<sub>n</sub></em> `</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">(<em>Symbol</em>) ` <em>Token<sub>1</sub></em> <em>Token<sub>2</sub></em> ... <em>Token<sub>n</sub></em> `</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal"><<em>Type</em> <em>Var</em>></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal"><<em>Var</em>></code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Suppose we want to manipulate text written in some hypothetical language LANG.
Then first the concrete syntax of LANG has to be defined by importing a module that declares the non-terminals and syntax rules for LANG.
Next LANG programs have to be parsed. LANG programs made come from text files or they may be included in the Rascal program as literals.
In both cases the text is parsed according to the defined syntax and the result is a parse tree in the form of a value of type Tree.
Concrete patterns operate on these trees.</p>
</div>
<div class="paragraph">
<p>A <em>concrete pattern</em> is a quoted concrete syntax fragment that may contain variables. The syntax that is used to parse the concrete pattern may come from any module that has been imported in the module in which the concrete pattern occurs.</p>
</div>
<div class="paragraph">
<p>A concrete pattern may have the following forms:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Quoted pattern</em></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>` _Token~1~_ _Token~2~_ ... _Token~n~_ `</pre>
</div>
</div>
<div class="paragraph">
<p>Inside a quoted pattern arbitrary lexical tokens may occur. Quoted patterns may contain variable declaration patterns and variable patterns (see below).</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <em>typed quoted pattern</em></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>(_Symbol_) ` _Token~1~_ _Token~2~_ ... _Token~n~_ `</pre>
</div>
</div>
<div class="paragraph">
<p>is a quoted pattern that is preceded by a nonterminal symbol to define its desired syntactic type.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <em>typed variable pattern</em></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;_Type_ _Var_&gt;</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>A <em>variable pattern</em></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;_Var_&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Inside concrete syntax patterns, layout is ignored.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Examples (in a context where an appropriate concrete syntax has been defined):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Quoted syntax pattern with two pattern variable declarations:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>` while &lt;EXP Exp&gt; do &lt;{STATEMENT ";"}* Stats&gt; od `</pre>
</div>
</div>
<div class="paragraph">
<p>Two observations can be made about this example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The non-terminals <code>EXP</code> and <code>{STATEMENT ";"}*</code> are declared in the imported module and can be used
as types in the Rascal program.</p>
</li>
<li>
<p>When this pattern is matched successfully against a subject, the variables <code>Exp</code> and <code>Stats</code> will be bound.</p>
<div class="ulist">
<ul>
<li>
<p>Quoted syntax pattern with two pattern variable uses (<code>Exp</code> and <code>Stats</code> should already have a value):</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>` while &lt;Exp&gt; do &lt;Stats&gt; od `</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Identical to the previous example, but with a declaration of the desired syntactic type:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>STATEMENT ` while &lt;Exp&gt; do &lt;Stats&gt; od `</pre>
</div>
</div>
<div class="paragraph">
<p>A full example of concrete patterns can be found in <a href="../Recipes/Recipes.html#Concrete-WithLayout">WithLayout</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Patterns-PatternWithAction">5.3. Pattern With Action</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>A pattern with an associated action that is executed on a successful match.</p>
</div>
<div class="ulist">
<div class="title">Syntax</div>
<ul>
<li>
<p><code><em>Pattern</em> &#8658; <em>Exp</em></code></p>
</li>
<li>
<p><code><em>Pattern</em>: <em>Statement</em></code></p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Patterns can be used in various contexts, but a common context is a PatternWithAction,
which in its turn, may be used in various statements such <a href="#Statements-Switch">Switch</a> and <a href="#Expressions-Visit">Visit</a>.</p>
</div>
<div class="paragraph">
<p>There are two variants as listed above:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When the subject matches <em>Pattern</em>, the expression <em>Exp</em> is evaluated and the subject is replaced with the result.</p>
</li>
<li>
<p>When the subject matches Pat, the Statement is executed. More statements can be executed by including them in a <a href="#Statements-Block">Block</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In <a href="#Statements-Switch">Switch</a> statements, only the form <code><em>Pattern</em> : <em>Statement</em></code> is allowed.
When the subject matches <em>Pattern</em>, the <em>Statement</em> is executed and the execution of the switch statement is complete.
However, when a fail statement is executed in <em>Statement</em> all its side effects are undone and further alternatives of
<em>Pattern</em> are tried. If no alternatives remain, PatternWithAction as a whole fails and subsequent cases of
the switch statement are tried.</p>
</div>
<div class="paragraph">
<p>In <a href="#Expressions-Visit">Visit</a> expressions, the form <code><em>Pattern</em> &#8658; <em>Exp</em></code> describes subtree replacement:
the current subtree of the subject of the visit expression is replaced by the value of <em>Exp</em>.
The form <code><em>Pattern</em> : <em>Statement</em></code> is as described for switch statements, with the addition that execution of an
<a href="#Statements-Insert">Insert</a> statement will replace the current subtree. After both success or failure of the PatternWithAction,
the traversal of the subject continues.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Two examples of variant 1 (replacement):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">case red(CTree l, CTree r) =&gt; red(r,l)
case red(l, r) =&gt; green(l, r)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Three examples of variant 2 (Statement):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">case /Leila/: println("The topic is Starwars");
case red(_, _):    println("A red root node");
case red(_,_): c = c + 1;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The action may also be a <a href="#Statements-Block">Block</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">case red(_,_): { c = c + 1; println("c = &lt;c&gt;"); }</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Patterns-Regular">5.4. Regular Expression Pattern</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Regular expression patterns.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Regular expressions are used to match a string value and to decompose it in parts and also to compose new strings. Regular expression patterns bind variables of type <code>str</code> when the match succeeds, otherwise they do not bind anything.
They can occur in cases of visit and switch statements,
on the left-hand side of the match operator (<code>:=</code> or <code>!:=</code>) and as declarator in enumerators.</p>
</div>
<div class="paragraph">
<p>We use a regular expression language that slightly extends/modifies the Java Regex language:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Regular expression are delimited by <code>/</code> and <code>/</code> optionally followed by modifiers (see below).</p>
</li>
<li>
<p>We allow <em>variable introductions</em>, syntax <code>&lt;_Name_:_Regex_&gt;</code>, which introduce a variable of type <code>str</code> named <em>Name</em>.
A variable introduction corresponds to a group in a Java regexp. Each variable that is introduced should be unique, but may be referenced more than once later in the regular expression.</p>
</li>
<li>
<p>Regular expressions may also contain <em>references to variables</em>, syntax <code>&lt;_Name_&gt;</code>,
the string value of variable <code><em>Name</em></code> is used at the position of the variable reference.
This can be used to define so-called <em>non-linear</em> patterns.</p>
</li>
<li>
<p>Java regular expressions allow optional groups, which may introduce null bindings. Since uninitialized variables are not allowed in Rascal, we limit the kinds of expressions one can write here by not allowing nesting of variable introductions.</p>
</li>
<li>
<p>We allow variable references in a regular expression of the form: <code>&lt;_Name_&gt;</code> which inserts the string value of <em>Name</em> in the pattern. $Name$ should have been introduced in the regular expression itself or in the context in which the regular expression occurs.</p>
</li>
<li>
<p>In Perl matching options <em>follow</em> the regular expression, but Java uses the notation <code>(?Option)</code>
at the <em>beginning</em> of the regular expression to set matching options. We support both styles.
The following modifiers are supported:</p>
<div class="ulist">
<ul>
<li>
<p><em>multi-line matching</em>: <code>(?m)</code> at the start of the regular expression or the modifier <code>m</code> at the end of the regular expression. The anchors <code>^</code> and <code>$</code> usually only match at the beginning and end of the subject string.
When this option is set they also match any begin or end of line that is embedded in the subject string. Examples:</p>
</li>
<li>
<p><em>case-insensitive matching</em>: <code>(?i)</code> or modifier <code>i</code>. Match characters irrespective of their case.</p>
</li>
<li>
<p><em>single-line mode</em>: <code>(?s)</code> or modifier <code>s</code>. The <code>.</code> expression does usually not match line terminators. When single-line mode is set, it will match any character including line terminators.</p>
</li>
<li>
<p><em>unix lines</em>: <code>(?d)</code> or modifier <code>d</code>. Usually newlines (<code>\n</code>), carriage return (<code>\r</code>) and new line carriage return (<code>\n\r</code>) sequences are all considered line terminators. When this option is set, only newline is considered to be a line terminator.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For convenience, we summarize the most frequently used constructs in regular expressions in the following table.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Frequently used elements of Regular Expression Syntax</caption>
<colgroup>
<col style="width: 10%;">
<col style="width: 90%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Operator</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>x</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The single character <code>x</code> as long as it is not a punctuation character with a
                                                        special meaning in the regular expression syntax</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\p</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The punctuation character <code>p</code>, this includes <code>!</code>, <code>"</code>, <code>#</code>, <code>$</code>, <code>%</code>, <code>&amp;</code>, <code>'</code>, <code>(</code>, <code>)</code>, <code>*</code>, <code>+</code>, <code>,</code>, <code>-</code>, <code>.</code>, <code>/</code>, <code>:</code>, <code>;</code>, <code>&lt;</code>, <code>=</code>, <code>&gt;</code>, <code>?</code>, <code>@</code>, <code>[</code>, <code>\</code>, <code>]</code>, <code>^</code>, <code>_</code>, <code>{</code>, <code>|</code>, <code>}</code>, and <code>~</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\\</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The backslash character</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\n</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Newline character</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\t</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tab character</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[&#8230;&#8203;]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One of the characters between the brackets (also known as <em>character class</em>).
                                                         Character ranges and set operations on character classes may be used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[^&#8230;&#8203;]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any one character not between the brackets.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[a-z0-9]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Character range: character between <code>a</code> and <code>z</code> or <code>0</code> and <code>9</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>.</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any character except a line terminator. If single-line mode is set (using <code>(?s)</code> or modifier <code>s</code>), then it matches any character including line terminators.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\d</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Digit: <code>[0-9]</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\D</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non-digit:` [^0-9]`</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\s</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whitespace</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\S</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Anything but whitespace.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\w</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A word: <code>[a-zA-Z0-9_]</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\W</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A non-word:` [^\w]`</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>xy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Match <code>x</code> followed by <code>y</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">`x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">y`</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Match <code>x</code> or <code>y</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>x?</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional occurrence of <code>x</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>x*</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zero or more occurrences of <code>x</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>x+</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">One or more occurrences of <code>x</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>x{n}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exactly <code>n</code> occurrences of <code>x</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>x{n,}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>n</code> or more occurrences of <code>x</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>x{n,m}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">At least <code>n</code>, at most <code>m</code> occurrences of <code>x</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>^</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">The beginning of the subject string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">The end of the input string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\b</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Word boundary: position between a word and a non-word character</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\B</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Examples</div>
<p>Here are some examples of regular expression patterns.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">/\brascal\b/i</code></pre>
</div>
</div>
<div class="paragraph">
<p>does a case-insensitive match (<code>i</code>) of the word <code>rascal</code> between word boundaries (<code>\b</code>). And</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">/^.*?&lt;word:\w+&gt;&lt;rest:.*$&gt;/m</code></pre>
</div>
</div>
<div class="paragraph">
<p>does a multi-line match (<code>m</code>), matches the first consecutive word characters (<code>\w</code>) and assigns them to the variable <code>word</code>. The remainder of the string is assigned to the variable <code>rest</code>.</p>
</div>
<div class="paragraph">
<p>A variable reference used to make a non-linear pattern:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">/&lt;x:[a-z]+&gt;---&lt;x&gt;/</code></pre>
</div>
</div>
<div class="paragraph">
<p>matches strings like <code>abc---abc</code> that consist of two identical sequences of letters separated
by three dashes. Variables that are referenced in a regular expression may also come from
the context in which the regular expression occurs. For instance,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">/&lt;x&gt;&lt;n&gt;/</code></pre>
</div>
</div>
<div class="paragraph">
<p>will use the current values of <code>x</code> and <code>n</code> as regular expression. For values <code>"abc"</code>, respectively, <code>3</code> this would be equivalent to the regular expression:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">/abc3/</code></pre>
</div>
</div>
<div class="paragraph">
<p>Observe that context variables may be of arbitrary type and that their value is first converted to
a string before it is inserted in the regular expression. This can be used in many ways.
For instance, regular expressions may contain restrictions on the number of repetitions
of an element: <code>/a{3}/</code> will match exactly three letters a. Also minimum and maximum
number of occurrences can be defined.
Here is how the repetition count can be inserted by a variable reference
(where <code>n</code> is assumed to have an integer value):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">/a{&lt;n&gt;}/</code></pre>
</div>
</div>
<div class="paragraph">
<p>Taking this example one step further, we can even write</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">/&lt;x:a{&lt;n&gt;}&gt;/</code></pre>
</div>
</div>
<div class="paragraph">
<p>in other words, we introduce variable <code>x</code> and its defining regular expression contains a
reference to a context variable.</p>
</div>
<div class="paragraph">
<p>Multi-line matching:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;/XX$/ := "lineoneXX\nlinetwo";
bool: false
rascal&gt;/XX$/m := "lineoneXX\nlinetwo";
bool: true
rascal&gt;/(?m)XX$/ := "lineoneXX\nlinetwo";
bool: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Case-insensitive matching:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;/XX/ := "some xx";
bool: false
rascal&gt;/XX/i := "some xx";
bool: true
rascal&gt;/(?i)XX/ := "some xx";
bool: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Single-line mode:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;/a.c/ := "abc";
bool: true
rascal&gt;/a.c/ := "a\nc";
bool: false
rascal&gt;/a.c/s := "a\nc";
bool: true
rascal&gt;/(?s)a.c/ := "a\nc";
bool: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here are examples, how to escape punctuation characters in regular expressions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;/a\/b/ := "a/b";
bool: true
rascal&gt;/a\+b/ := "a+b";
bool: true</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Rascal-Expressions">6. Expressions</h2>
<div class="sectionbody">
<div class="paragraph">
<div class="title">Synopsis</div>
<p>The expressions available in Rascal.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>The expression is the basic unit of evaluation and may consist of the ingredients shown in the figure.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An elementary <em>literal value</em>, e.g. constants of the types <a href="#Values-Boolean">Boolean</a>, <a href="#Values-Integer">Integer</a>, <a href="#Values-Real">Real</a>,
<a href="#Values-Number">Number</a>, <a href="#Values-String">String</a>, <a href="#Values-Location">Location</a> or <a href="#Values-DateTime">DateTime</a>.</p>
</li>
<li>
<p>A <em>structured value</em> for <a href="#Values-List">List</a>, <a href="#Values-Set">Set</a>, <a href="#Values-Map">Map</a>, <a href="#Values-Tuple">Tuple</a> or <a href="#Values-Relation">Relation</a>.
The elements are first evaluated before the structured value is built.</p>
</li>
<li>
<p>A <em>variable</em> that evaluates to its current value.</p>
</li>
<li>
<p>A call to a function or constructor:</p>
<div class="ulist">
<ul>
<li>
<p>A <em>function call</em>. First the arguments are evaluated and the corresponding function is called.
The value returned by the function is used as value of the function call. See <a href="#Expressions-Call">Call</a>.</p>
</li>
<li>
<p>A <em>constructor</em>. First the arguments are evaluated and then a data value is constructed for the
corresponding type. This data value is used as value of the constructor.
Constructors are functions that can be used in all contexts where functions can be used. See <a href="#Values-Constructor">Constructor</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>An operator expression. The operator is applied to the arguments; the evaluation order of the arguments depends
on the operator. The result returned by the operator is used as value of the operator expression.  See <a href="#Expressions-Operators">Operators</a>.</p>
</li>
<li>
<p><a href="#Concepts-Comprehensions">Comprehensions</a>.</p>
</li>
<li>
<p>A <a href="#Expressions-Visit">Visit</a> expression.</p>
</li>
<li>
<p>A <a href="#Boolean-Any">Boolean Any</a> expression.</p>
</li>
<li>
<p>An <a href="#Boolean-All">Boolean All</a> expression.</p>
</li>
<li>
<p>Some statements like <a href="#Statements-If">If</a>, <a href="#Statements-For">For</a>, <a href="#Statements-While">While</a> and <a href="#Statements-Do">Do</a> can also be used in expressions, see <a href="#Expressions-StatementAsExpression">Statement as Expression</a>.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="Expressions-Values">6.1. Values</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>The different types of values.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Rscal provides the following values:</p>
</div>
<div class="sect3">
<h4 id="Values-Boolean">6.1.1. Boolean</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Boolean values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>true</code>, <code>false</code></p>
</div>
<div class="paragraph">
<div class="title">Types</div>
<p><code>bool</code></p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>The Booleans are represented by the type <code>bool</code> which has two values: <code>true</code> and <code>false</code>.</p>
</div>
<div class="paragraph">
<p>The Boolean operators (to be more precise: operators with a value of type Boolean as result) have <em>short-circuit</em> semantics.
This means that the operands are evaluated until the outcome of the operator is known.</p>
</div>
<div class="paragraph">
<p>Most operators are self-explanatory except the match (:=) and no match (!:=) operators that are also the main reason to treat Boolean operator expressions separately. Although we describe patterns in full detail in <a href="#Rascal-Patterns">Patterns</a>, a preview is useful here. A pattern can</p>
</div>
<div class="ulist">
<ul>
<li>
<p>match (or not match) any arbitrary value (that we will call the <em>subject value</em>);</p>
</li>
<li>
<p>during the match variables may be bound to subvalues of the subject value.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <em>match</em> operator</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal"><em>Pat</em> := <em>Exp</em></code></pre>
</div>
</div>
<div class="paragraph">
<p>is evaluated as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Exp</em> is evaluated, the result is a subject value;</p>
</li>
<li>
<p>the subject value is matched against the pattern <em>Pat</em>;</p>
</li>
<li>
<p>if the match succeeds, any variables in the pattern are bound to subvalues of the subject value and the match expression yields <code>true</code>;</p>
</li>
<li>
<p>if the match fails, no variables are bound and the match expression yields <code>false</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This looks and <em>is</em> nice and dandy, so why all this fuss about Boolean operators?
The catch is that&#8212;&#8203;as we will see in <a href="#Rascal-Patterns">Patterns</a>--a match need not be unique. This means that there may be more than one way of matching the subject value resulting in different variable bindings.</p>
</div>
<div class="paragraph">
<p>This behaviour is applicable in the context of all Rascal constructs where a pattern match determines the flow of control of the program, in particular:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Boolean expressions: when a pattern match fails that is part of a Boolean expression, further solutions are tried in order to try to make the Boolean expression true.</p>
</li>
<li>
<p>Tests in <a href="#Statements-For">For</a>, <a href="#Statements-While">While</a>, <a href="#Statements-Do">Do</a> statements.</p>
</li>
<li>
<p>Tests in <a href="#Boolean-Any">Boolean Any</a> and <a href="#Boolean-All">Boolean All</a> expressions.</p>
</li>
<li>
<p>Tests and <a href="#Comprehensions-Enumerator">Enumerator</a>s in comprehensions.</p>
</li>
<li>
<p>Pattern matches in cases of a <a href="#Expressions-Visit">Visit</a>.</p>
</li>
<li>
<p>Pattern matches in cases of a <a href="#Statements-Switch">Switch</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following operators are provided for Boolean:</p>
</div>
<div class="paragraph">
<p>There are also <a href="../Libraries/Libraries.html#Prelude-Boolean">library functions</a> available for Booleans.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Consider the following match of a list</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[1, *int L, 2, *int M] := [1,2,3,2,4]
bool: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>By definition <code>list[int] L</code> and <code>list[int] M</code> match list elements that are part of the enclosing list in which they occur. If they should match a nested list each should be enclosed in list brackets.</p>
</div>
<div class="paragraph">
<p>There are two solutions for the above match:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>L</code> = <code>[]</code> and <code>M</code> =` [2, 3, 2, 4]`; and</p>
</li>
<li>
<p><code>L</code> = <code>[2,3]</code> and <code>M</code> =` [4]`.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import IO;
ok
rascal&gt;for ([1, *int L, 2, *int M] := [1,2,3,2,4])
&gt;&gt;&gt;&gt;&gt;&gt;&gt;  println("L: &lt;L&gt;, M: &lt;M&gt;");
L: [], M: [3,2,4]
L: [2,3], M: [4]
list[void]: []</code></pre>
</div>
</div>
<div class="paragraph">
<p>Depending on the context, only the first solution of a match expression is used, respectively all solutions are used.
If a match expression occurs in a larger Boolean expression, a subsequent subexpression may yield false and&#8201;&#8212;&#8201;depending on the actual operator&#8201;&#8212;&#8201;evaluation backtracks to a previously evaluated match operator to try a next solution. Let&#8217;s illustrate this by extending the above example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">[1, *int L, 2, *int M] := [1,2,3,2,4] &amp;&amp; size(L) &gt; 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>where we are looking for a solution in which L has a non-empty list as value. Evaluation proceeds as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The left argument of the <code>&amp;&amp;</code> operator is evaluated: the match expression is evaluated resulting in the bindings <code>L = []</code> and <code>M = [2, 3, 2, 4]</code>;</p>
</li>
<li>
<p>The right argument of the <code>&amp;&amp;</code> operator is evaluated: <code>size(L) &gt; 0</code> yields <code>false</code>;</p>
</li>
<li>
<p>Backtrack to the left argument of the <code>&amp;&amp;</code> operator to check for more solutions: indeed there are more solutions resulting in the bindings <code>L = [2,3]</code> and <code>M = [4]</code>;</p>
</li>
<li>
<p>Proceed to the right operator of <code>&amp;&amp;</code>: this time <code>size(L) &gt; 0</code> yields <code>true</code>;</p>
</li>
<li>
<p>The result of evaluating the complete expression is <code>true</code>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import IO;
ok
rascal&gt;import List;
ok</code></pre>
</div>
</div>
<div class="paragraph">
<p>for prints them all:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;for ([1, *int L, 2, *int M] := [1,2,3,2,4] &amp;&amp; size(L) &gt; 0)
&gt;&gt;&gt;&gt;&gt;&gt;&gt;  println("L: &lt;L&gt;, M: &lt;M&gt;");
L: [2,3], M: [4]
list[void]: []</code></pre>
</div>
</div>
<div class="paragraph">
<p>if prints the first</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;if ([1, *int L, 2, *int M] := [1,2,3,2,4] &amp;&amp; size(L) &gt; 0)
&gt;&gt;&gt;&gt;&gt;&gt;&gt;  println("L: &lt;L&gt;, M: &lt;M&gt;");
L: [2,3], M: [4]
ok</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="Boolean-All">Boolean All</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>All argument expressions are true.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>all ( <em>Exp</em><sub>1</sub>, <em>Exp</em><sub>2</sub>, &#8230;&#8203; )</code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top">&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top"><code>all ( <em>Exp<sub>1</sub></em>, <em>Exp<sub>2</sub></em>, &#8230;&#8203; )</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> when all combinations of values of <em>Exp</em><sub>i</sub> are true.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Are all integers 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 even?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;all(int n &lt;- [1 .. 10], n % 2 == 0);
bool: false</code></pre>
</div>
</div>
<div class="paragraph">
<p>Are all integers 0, 2, 4, 6, 8, 10 even?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;all(int n &lt;- [0, 2 .. 10], n % 2 == 0);
bool: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>When one of the <em>Exp</em><sub>i</sub> enumerates the elements of an empty list, <code>all</code> always returns <code>true</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;all(int n &lt;- [], n &gt; 0);
bool: true</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="title">Pitfalls</div>
The Rascal interpreter and compiler give different results on an empty list.
The interpreter returns <code>fals</code> for the abo eexample.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="Boolean-And">Boolean And</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Boolean <em>and</em> operator.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &amp;&amp; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &amp;&amp; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>The <em>and</em> operator on Boolean values defined as follows:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &amp;&amp; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Boolean operators have <em>short circuit</em> semantics:  only those operands are evaluated that are needed to compute the result. In the case of the <code>&amp;&amp;</code> operator, the result is <code>false</code> if <code><em>Exp</em><sub>1</sub></code> evaluates to <code>false</code>, otherwise <code><em>Exp</em><sub>2</sub></code> is evaluated to determine the result.</p>
</div>
<div class="paragraph">
<p>Note that <code>&amp;&amp;</code> backtracks over its argument expressions until it can find an evaluation that yields <code>true</code> unless there is none. This may happen if the left or right expression is a non-deterministic pattern match or a value generator.</p>
</div>
<div class="paragraph">
<p>Variable assignments as a result of matching or generator expressions under a <code>&amp;&amp;</code> are visible outside the context of the operator, but only if the context is conditional, such as an if-then-else or a for loop. Note that if one of the argument expressions evaluates to false, then no binding is done either.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;true &amp;&amp; false;
bool: false
rascal&gt;i &lt;- [1,2,3] &amp;&amp; (i % 2 == 0)
bool: true
rascal&gt;import IO;
ok
rascal&gt;if (i &lt;- [1,2,3] &amp;&amp; (i % 2 == 0))
&gt;&gt;&gt;&gt;&gt;&gt;&gt;  println("&lt;i&gt; % 2 == 0");
2 % 2 == 0
ok
rascal&gt;for (i &lt;- [1,2,3,4] &amp;&amp; (i % 2 == 0))
&gt;&gt;&gt;&gt;&gt;&gt;&gt;  println("&lt;i&gt; % 2 == 0");
2 % 2 == 0
4 % 2 == 0
list[void]: []</code></pre>
</div>
</div>
<div class="ulist">
<div class="title">Benefits</div>
<ul>
<li>
<p>The backtracking <code>&amp;&amp;</code> allows one to express searching for a computational solution in concise manner.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Pitfalls</div>
<ul>
<li>
<p>Side effects to global variables or IO in the context of a backtracking <code>&amp;&amp;</code> can lead to more effects than you bargained for.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import IO;
ok
rascal&gt;int i = 0;
int: 0
rascal&gt;bool incr() { i += 1; return true; }
ok
rascal&gt;for (int j &lt;- [1,2,3] &amp;&amp; incr() &amp;&amp; (i % 2 == 0))
&gt;&gt;&gt;&gt;&gt;&gt;&gt;  println("once true for &lt;j&gt;");
once true for 2
list[void]: []
rascal&gt;i;
int: 0</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Boolean-Any">Boolean Any</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Any combination of argument values is true.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>any ( <em>Exp</em><sub>1</sub>, <em>Exp</em><sub>2</sub>, &#8230;&#8203; )</code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top">&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top"><code>any ( <em>Exp<sub>1</sub></em>, <em>Exp<sub>2</sub></em>, &#8230;&#8203; )</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> when at least one combination of values of <em>Exp</em><sub>i</sub> is true.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;any(int n &lt;- [1 .. 10], n % 2 == 0);
bool: true</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Boolean-Equivalence">Boolean Equivalence</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>The <em>equivalence</em> operator on Boolean values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &#8656;&#8658; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &#8656;&#8658; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>The <em>equivalence</em> operator on Boolean values defined as follows:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &#8656;&#8658; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Boolean operators have <em>short circuit</em> semantics:  only those operands are evaluated that are needed to compute the result. However, in the case of the <code>&#8656;&#8658;</code> operator both operands have to be evaluated to determine the result.</p>
</div>
<div class="paragraph">
<p>Note that the <code>&#8656;&#8658;</code> operator backtracks over its arguments until it finds an evaluation that is <code>true</code>, unless there is none. Variable bindings that are the effect of matching  operators in its arguments are not visible outside the scope of the <code>&#8656;&#8658;</code>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import IO;
ok
rascal&gt;false &lt;==&gt; false;
bool: true
rascal&gt;false &lt;==&gt; true;
bool: false</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
We should add a more meaningful example of backtracking over &#8656;&#8658; than this old one:
(i &#8592; [1,2]) &#8656;&#8658; (j &#8592; [1,2,3]);
for i &#8592; [1,2]) &#8656;&#8658; (j &#8592; [1,2,3]
  println("true!");
(i &#8592; [1,2] &amp;&amp; (i % 2 == 0)) &#8656;&#8658; (j &#8592; [1,2,3] &amp;&amp; (j % 3 == 0))
for i &#8592; [1,2] &amp;&amp; (i % 2 == 0 &#8656;&#8658; (j &#8592; [1,2,3] &amp;&amp; (j % 3 == 0)))
  println("true!");
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="Boolean-IfDefinedElse">Boolean IfDefinedElse</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Test whether expression has a defined value, otherwise provide alternative.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> ? <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> ? <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>1</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>2</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>2</sub></em> &lt;: <em>T<sub>1</sub></em></code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>If no exception is generated during the evaluation of <em>Exp</em><sub>1</sub>, the result of <code><em>Exp</em><sub>1</sub> ? <em>Exp</em><sub>2</sub></code> is the value of <em>Exp</em><sub>1</sub>.
Otherwise, it is the value of <em>Exp</em><sub>2</sub>.</p>
</div>
<div class="paragraph">
<p>Also see <a href="#Boolean isDefined">[Boolean isDefined]</a> and <a href="#Statements-Assignment">Assignment</a>.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>This test can, for instance, be used to handle the case that a certain key value is not in a map:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;T = ("a" : 1, "b" : 2);
map[str, int]: ("a":1,"b":2)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Trying to access the key <code>"c"</code> will result in an error:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;T["c"];
NoSuchKey("c") at |test-modules:///ConsoleInput.rsc|(53,6,&lt;4,15&gt;,&lt;4,21&gt;)
Call stack (most recent first):
	main([]) at |test-modules:///ConsoleInput.rsc|(53,6,&lt;4,15&gt;,&lt;4,21&gt;)

ok</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the <code>?</code> operator, we can write:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;T["c"] ? 0;
int: 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is very useful, if we want to modify the associated value, but are not sure whether it exists:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;T["c"] ? 0 += 1;
map[str, int]: ("a":1,"b":2,"c":1)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Another example using a list:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;L = [10, 20, 30];
list[int]: [10,20,30]
rascal&gt;L[4] ? 0;
int: 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is, however, not possible to assign to index positions outside the list.</p>
</div>
</div>
<div class="sect4">
<h5 id="Boolean-Implication">Boolean Implication</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>The <em>implication</em> operator on Boolean values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> =&#8658; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> =&#8658; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>The <em>implication</em> operator on Boolean values defined as follows:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> =&#8658; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Boolean operators have <em>short circuit</em> semantics:  only those operands are evaluated that are needed to compute the result. In the case of the <code>=&#8658;</code> operator, the result is <code>true</code> if <code><em>Exp</em><sub>1</sub></code> evaluates to <code>false</code>, otherwise <code><em>Exp</em><sub>2</sub></code> is evaluated to determine the result.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;false ==&gt; true;
bool: true</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Boolean-IsDefined">Boolean IsDefined</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Test whether the value of an expression is defined.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em> ?</code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp</em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp</em> ?</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>If no exception is generated during the evaluation of <em>Exp</em>,
the result is <code>true</code>. Otherwise, it is <code>false</code>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;T = ("a" : 1, "b" : 2);
map[str, int]: ("a":1,"b":2)
rascal&gt;T["b"]?
bool: true
rascal&gt;T["c"]?
bool: false
rascal&gt;L = [10, 20, 30];
list[int]: [10,20,30]
rascal&gt;L[1]?
bool: true
rascal&gt;L[5]?
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Boolean-Match">Boolean Match</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Match a pattern against an expression.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Pat</em> := <em>Exp</em></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Pat</em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp</em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Pat</em> := <em>Exp</em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Rascal-Patterns">Patterns</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>See <a href="#Concepts-PatternMatching">Pattern Matching</a> for an introduction to pattern matching and <a href="#Rascal-Patterns">Patterns</a> for a complete description.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;123 := 456;
bool: false
rascal&gt;[10, *n, 50] := [10, 20, 30, 40, 50];
bool: true
rascal&gt;{10, *int n, 50} := {50, 40, 30, 30, 10};
bool: true</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Boolean-Negation">Boolean Negation</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>The <em>not</em> operator on Boolean values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>! <em>Exp</em></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp</em></code></th>
<th class="tableblock halign-left valign-top"><code>! <em>Exp</em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>The <em>not</em> operator on Boolean values defined as follows:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp</em></code></th>
<th class="tableblock halign-left valign-top"><code>! <em>Exp</em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;!true;
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Boolean-NoMatch">Boolean NoMatch</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Negated [Boolean Match] operator.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Pat</em> !:= <em>Exp</em></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Pat</em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp</em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Pat</em> !:= <em>Exp</em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[Patterns]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>See <a href="#Concepts-PatternMatching">Pattern Matching</a> for an introduction to pattern matching and <a href="#Rascal-Patterns">Patterns</a> for a complete description.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;123 !:= 456;
bool: true
rascal&gt;[10, *n, 50] !:= [10, 20, 30, 40];
bool: true
rascal&gt;{10, *n, 50} !:= {40, 30, 30, 10};
bool: true</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Boolean-Or">Boolean Or</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>The <em>or</em> operator on Boolean values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> || <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> || <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>The <em>or</em> operator on Boolean values defined as follows:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> || <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Boolean operators have <em>short circuit</em> semantics:  only those operands are evaluated that are needed to compute the result. In the case of the <code>||</code> operator, the result is <code>true</code> if <code><em>Exp</em><sub>1</sub></code> evaluates to <code>true</code>, otherwise <code><em>Exp</em><sub>2</sub></code> is evaluated to determine the result.</p>
</div>
<div class="paragraph">
<p>Note that <code>||</code> will backtrack over its argument expressions until it can find an evaluation that is <code>true</code>, unless there is none.</p>
</div>
<div class="paragraph">
<p>Variable assignments as a result of matching or generator expressions under a <code>||</code> are visible outside the context of the operator, but only if the context is conditional, such as an if-then-else or a for loop. Note that it is statically required that both sides of an <code>||</code> introduce the same variable names of the same type.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import IO;
ok
rascal&gt;false || true;
bool: true
rascal&gt;(i &lt;- [1,2,3,4] &amp;&amp; i % 2 == 0) || false
bool: true
rascal&gt;for ((i &lt;- [1,2,3,4] &amp;&amp; i % 2 == 0) || false)
&gt;&gt;&gt;&gt;&gt;&gt;&gt;  println("true for &lt;i&gt;");
[error] Name i is not in scope</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Values-Constructor">6.1.2. Constructor</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Constructors create values for user-defined datatypes (Algebraic Datatypes).</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Name</em> ( <em>Exp</em><sub>1</sub>, <em>Exp</em><sub>2</sub>, &#8230;&#8203; )</code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top">&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top"><code><em>Name</em> ( <em>Exp<sub>1</sub></em>, <em>Exp<sub>2</sub></em>, &#8230;&#8203; )</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>1</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>2</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Depends on ADT declaration</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>In ordinary programming languages record types or classes exist to introduce a new type name for a collection of related,
named, values and to provide access to the elements of such a collection through their name.</p>
</div>
<div class="paragraph">
<p>In Rascal, algebraic data types provide this facility. They have to be declared, see <a href="#Declarations-AlgebraicDataType">Algebraic Data Type</a>, and
then values can be created using calls to the declared constructor functions.
The constructor <em>Name</em> should correspond (regarding name, arity and argument types) to one of the alternatives
in the ADT declaration.</p>
</div>
<div class="paragraph">
<p>First, the actual parameter expressions <em>Exp</em><sub>i</sub> are evaluated resulting in values <em>V</em><sub>i</sub>.
Next, a data value is constructed in accordance with the declared data type
using the values <em>V</em><sub>i</sub> as arguments for the constructor. This data value is used as value of the constructor.
Constructors are functions that can be used in all contexts where functions can be used.</p>
</div>
<div class="paragraph">
<p>Observe that the syntax of a constructor is identical to the syntax of an function <a href="#Expressions-Call">Call</a>.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>First, define a datatype <code>WF</code> for word frequencies:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;data WF = wf(str word, int freq);
ok</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then construct a new <code>WF</code> value by calling the constructor <code>wf</code> with appropriate arguments:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;wf("Rascal", 10000);
WF: wf("Rascal",10000)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Values-DateTime">6.1.3. DateTime</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Date and time values.</p>
</div>
<div class="ulist">
<div class="title">Syntax</div>
<ul>
<li>
<p><code>$</code> <code><em>Date</em></code> <code>$</code></p>
</li>
<li>
<p><code>$</code> <code><em>Time</em></code> <code>$</code></p>
</li>
<li>
<p><code>$</code> <code><em>DateTime</em></code> <code>$</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Types</div>
<p><code>datetime</code></p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Date, time, and datetime values are represented by the <code>datetime</code> type.
<code>datetime</code> literals start with a <code>$</code> and are made up of either a date, given in year, month, day of month order;
a time, preceded by <code>T</code> and given in hour, minute, second, millisecond, (optional) timezone offset order;
or a datetime, which is a date and a time, in the orders given above, and separated by a <code>T</code>.</p>
</div>
<div class="paragraph">
<p>The following fields provide access to information about the value, but cannot be set:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>isDate</code>: returns <code>true</code> if the value is a date value, <code>false</code> if the value is a
datetime or time value.</p>
</li>
<li>
<p><code>isTime</code>: returns <code>true</code> if the value is a time value, <code>false</code> if the value is a
date or datetime value.</p>
</li>
<li>
<p><code>isDateTime</code>: returns <code>true</code> if the value is a datetime value, <code>false</code> if the value is a
date or time value.</p>
</li>
<li>
<p><code>justTime</code>: returns the date component of a date or datetime value.</p>
</li>
<li>
<p><code>justDate</code>: returns the time component of a time or datetime value.</p>
</li>
<li>
<p><code>century</code>: returns the century component of a year for date or datetime values.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following fields provide access to the individual components of date, time and datetime values,
and can be accessed using <a href="#DateTime-FieldSelection">DateTime Field Selection</a> and be assigned using <a href="#DateTime-FieldSelection">DateTime Field Selection</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>year</code></p>
</li>
<li>
<p><code>month</code></p>
</li>
<li>
<p><code>day</code></p>
</li>
<li>
<p><code>hour</code></p>
</li>
<li>
<p><code>minute</code></p>
</li>
<li>
<p><code>second</code></p>
</li>
<li>
<p><code>millisecond</code></p>
</li>
<li>
<p><code>timezoneOffsetHours</code></p>
</li>
<li>
<p><code>timezoneOffsetMinutes</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Not all fields are available on all values as indicated by the following table:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top"><code>date</code></th>
<th class="tableblock halign-left valign-top"><code>datetime</code></th>
<th class="tableblock halign-left valign-top"><code>time</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>year</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>month</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>day</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hour</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>minute</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>second</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>millisecond</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timezoneOffsetHours</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timezoneOffsetMinutes</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The <code>isDate</code>, <code>isTime</code>, and <code>isDateTime</code> fields can be checked in advance to determine what
kind of value is stored in a variable of type <code>datetime</code>.</p>
</div>
<div class="paragraph">
<p>The following operators are defined for DateTime:</p>
</div>
<div class="paragraph">
<p>The following functions are defined for DateTime:
subtoc[Rascal/Libraries/Prelude/DateTime,1]</p>
</div>
<div class="paragraph">
<p>There are also <a href="../Libraries/Libraries.html#Prelude-DateTime">library functions</a> available for DateTime.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Examples of <code>datetime</code> values are:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;$2010-07-15$;
datetime: $2010-07-15$
rascal&gt;$T07:15:23.123+0100$;
datetime: $T07:15:23.123+01:00$</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now introduce a <code>datetime</code> value and assign it to <code>DT</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;DT = $2010-07-15T09:15:23.123+03:00$;
datetime: $2010-07-15T09:15:23.123+03:00$</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here are examples of some <code>datatime</code> fields:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;DT.isDateTime;
bool: true
rascal&gt;DT.justDate;
datetime: $2010-07-15$
rascal&gt;DT.justTime;
datetime: $T09:15:23.123+03:00$
rascal&gt;DT.century;
int: 20</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Pitfalls</div>
<p>In normal parlance, the year 2010 is in the 21th century.
The <code>century</code> field, however, just returns the century component of a given year, e.g., for 2010 this is 20.</p>
</div>
<div class="sect4">
<h5 id="DateTime-Equal">DateTime Equal</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Equality on datetime values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> == <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> == <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>datetime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>datetime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if both arguments are identical <code>datetime</code> values and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;$2010-07-15$ == $2010-07-15$;
bool: true
rascal&gt;$2010-07-15$ == $2010-07-14$;
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="DateTime-FieldSelection">DateTime Field Selection</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Select a field from a datetime value.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em> . <em>Name</em></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp</em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Name</em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp</em> . <em>Name</em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>datetime</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">depends on field</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Field selection applies to <code>datetime</code> values.
<em>Name</em> should be one of the supported fields listed in <a href="#Values-DateTime">DateTime</a> and returns the value of that field.
Name stands for itself and is not evaluated.</p>
</div>
</div>
<div class="sect4">
<h5 id="DateTime-GreaterThan">DateTime GreaterThan</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Greater than operator on datetime values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &gt; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &gt; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>datetime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>datetime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the <code>datetime</code> value of <em>Exp</em><sub>1</sub> is later in time than the <code>datetime</code> value
of <em>Exp</em><sub>2</sub>, and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;$2010-07-15$ &gt; $2010-07-14$;
bool: true
rascal&gt;$2011-07-15$ &gt; $2010-07-15$;
bool: true</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="DateTime-GreaterThanOrEqual">DateTime GreaterThanOrEqual</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Greater than or equal operator on datetime values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &gt;= <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &gt;= <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>datetime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>datetime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the <code>datetime</code> value of <em>Exp</em><sub>1</sub> is later in time than the <code>datetime</code> value
of <em>Exp</em><sub>2</sub> or if both values are equal, and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;$2011-07-15$ &gt;= $2010-07-15$;
bool: true
rascal&gt;$2010-07-15$ &gt;= $2010-07-14$;
bool: true</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="DateTime-LessThan">DateTime LessThan</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Less than operator on datetime values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &lt; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &lt; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>datetime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>datetime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the <code>datetime</code> value of <em>Exp</em><sub>1</sub> is earlier in time than the <code>datetime</code> value
of <em>Exp<sub>2</sub></em>, and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;$2010-07-14$ &lt; $2010-07-15$;
bool: true
rascal&gt;$2011-07-15$ &lt; $2010-07-14$;
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="DateTime-LessThanOrEqual">DateTime LessThanOrEqual</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Less than or equal operator on datetime values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &#8656; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &#8656; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>datetime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>datetime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the <code>datetime</code> value of <em>Exp</em><sub>1</sub> is earlier in time than the <code>datetime</code> value
of <em>Exp</em><sub>2</sub> or if the values of <em>Exp</em><sub>1</sub> and <em>Exp</em><sub>2</sub> are equal, and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;$2010-07-15$ &lt;= $2010-07-15$;
bool: true
rascal&gt;$2011-07-15$ &lt;= $2010-07-14$;
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="DateTime-NotEqual">DateTime NotEqual</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Not equal operator on datetime values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> != <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> != <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>datetime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>datetime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if both arguments are different <code>datetime</code> values and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;$2010-07-15$ != $2010-07-14$;
bool: true
rascal&gt;$2010-07-15$ != $2010-07-15$;
bool: false</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Values-Integer">6.1.4. Integer</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Integer values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p>sequence of digits of arbitrary length.</p>
</div>
<div class="paragraph">
<div class="title">Types</div>
<p><code>int</code></p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>The integer values are represented by the type <code>int</code> and are written as usual. They can be <em>arbitrarily large</em>.</p>
</div>
<div class="paragraph">
<p>See <a href="#Values-Number">Number</a> for all operations and functions on integers, reals and numbers.</p>
</div>
<div class="ulist">
<div class="title">Examples</div>
<ul>
<li>
<p><code>12</code></p>
</li>
<li>
<p><code>0</code></p>
</li>
<li>
<p><code>-123456789</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Values-List">6.1.5. List</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>List values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>[ <em>Exp</em><sub>1</sub>, <em>Exp</em><sub>2</sub>, &#8230;&#8203; ]</code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top">&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top"><code>[ <em>Exp<sub>1</sub></em>, <em>Exp<sub>2</sub></em>, &#8230;&#8203; ]</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>1</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>2</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[lub(<em>T<sub>1</sub></em>, <em>T<sub>2</sub></em>, &#8230;&#8203; )]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>A list is an ordered sequence of values and has the following properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>All elements have the same static type.</p>
</li>
<li>
<p>The order of the elements matters.</p>
</li>
<li>
<p>A list may contain an element more than once.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The type of a list has the form <code>list[<em>T</em>]</code>,
where <code><em>T</em></code> is an arbitrary type.</p>
</div>
<div class="paragraph">
<p>When a value or variable of type list occurs inside a list, that list value is inserted as list element.
To achieve <em>splicing</em> of these elements, i.e., the insertion of the elements of the list value rather than the whole list,
it has to be prefixed by the splice operator <code>*</code>.</p>
</div>
<div class="paragraph">
<p>The following operators are provided on list:</p>
</div>
<div class="paragraph">
<p>There are also <a href="../Libraries/Libraries.html#Prelude-List">library functions</a> available for List.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[1, 2, 3];
list[int]: [1,2,3]
rascal&gt;[&lt;1,10&gt;, &lt;2,20&gt;, &lt;3,30&gt;];
lrel[int,int]: [
  &lt;1,10&gt;,
  &lt;2,20&gt;,
  &lt;3,30&gt;
]
rascal&gt;[1, "b", 3];
list[value]: [1,"b",3]
rascal&gt;[&lt;"a",10&gt;, &lt;"b",20&gt;, &lt;"c",30&gt;];
lrel[str,int]: [
  &lt;"a",10&gt;,
  &lt;"b",20&gt;,
  &lt;"c",30&gt;
]
rascal&gt;[["a", "b"], ["c", "d", "e"]];
list[list[str]]: [
  ["a","b"],
  ["c","d","e"]
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>List splicing works as follows: by prefixing <code>L</code> by the splice operator, its elements are included as elements in the enclosing list:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;L = [1, 2, 3];
list[int]: [1,2,3]
rascal&gt;[10, L, 20];
list[value]: [
  10,
  [1,2,3],
  20
]
rascal&gt;[10, *L, 20];
list[int]: [10,1,2,3,20]</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="List-Append">List Append</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Append an element at the end of a list</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> + <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[<em>T<sub>1</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>2</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[lub(<em>T<sub>1</sub></em>,<em>T<sub>2</sub></em>)]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>The operator <code>+</code> appends an element at the end of a list. The <code>+</code> is one of those <a href="#Expressions-Operators">Operators</a> which are overloaded. It can also mean <a href="#List-Insert">List Insert</a> or <a href="#List-Concatenation">List Concatenation</a> for example.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[] + 1;
list[int]: [1]
rascal&gt;[1] + 2;
list[int]: [1,2]</code></pre>
</div>
</div>
<div class="ulist">
<div class="title">Pitfalls:</div>
<ul>
<li>
<p>If both operands of <code>+</code> are a list, then it acts as <a href="#List-Concatenation">List Concatenation</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This is concatenation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[1] + [2]
list[int]: [1,2]</code></pre>
</div>
</div>
<div class="paragraph">
<p>To append a list to a list, use extra brackets:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[1] + [[2]]
list[value]: [
  1,
  [2]
]</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="List-Comprehension">List Comprehension</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>A list comprehension generates a list value.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>[ <em>Exp</em><sub>1</sub>, <em>Exp</em><sub>2</sub>, &#8230;&#8203; | <em>Gen</em><sub>1</sub>, <em>Gen</em><sub>2</sub>, &#8230;&#8203; ]</code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top">&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top"><code>[ <em>Exp<sub>1</sub></em>, <em>Exp<sub>2</sub></em>, &#8230;&#8203; | <em>Gen<sub>1</sub></em>, <em>Gen<sub>2</sub></em>, &#8230;&#8203; ]</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>1</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>2</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[ lub( <em>T<sub>1</sub></em>, <em>T<sub>2</sub></em>, &#8230;&#8203; ) ]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>A list comprehension consists of a number of contributing expressions <em>Exp</em><sub>1</sub>, <em>Exp</em><sub>2</sub>, &#8230;&#8203; and a number of
generators <em>Gen</em><sub>1</sub>, <em>Gen</em><sub>2</sub>, <em>Gen</em><sub>3</sub>, &#8230;&#8203; that are evaluated as described in <a href="#Expressions-Comprehensions">Comprehensions</a>.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Computing a list of squares of the numbers from 0 to 10 that are divisible by 3:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[n * n | int n &lt;- [0 .. 10], n % 3 == 0];
list[int]: [0,9,36,81]</code></pre>
</div>
</div>
<div class="paragraph">
<p>But we can also include the relevant <code>n</code> in the resulting list:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[n, n * n | int n &lt;- [0 .. 10], n % 3 == 0];
list[int]: [0,0,3,9,6,36,9,81]</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="List-Concatenation">List Concatenation</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Concatenate two lists.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> + <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> + <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[<em>T<sub>1</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[<em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[lub(<em>T<sub>1</sub></em>,<em>T<sub>2</sub></em>)]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>The <code>+</code> operator concatenates the elements of the two lists in order of appearance.</p>
</div>
<div class="paragraph">
<p>Note that the same operator is overloaded for <a href="#List-Insert">List Insert</a> and <a href="#List-Append">List Append</a>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[1, 2, 3] + [4, 5, 6];
list[int]: [1,2,3,4,5,6]
rascal&gt;[] + [1]
list[int]: [1]
rascal&gt;[1] + []
list[int]: [1]
rascal&gt;[1] + [2] + [3]
list[int]: [1,2,3]</code></pre>
</div>
</div>
<div class="paragraph">
<p>And overloaded usage for insert and append looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;1 + []
list[int]: [1]
rascal&gt;[] + 1
list[int]: [1]</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="List-Difference">List Difference</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>The difference between two lists.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> - <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> - <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[<em>T<sub>1</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[<em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[lub(<em>T<sub>1</sub></em>,<em>T<sub>2</sub></em>)]</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[<em>T<sub>1</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>2</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[lub(<em>T<sub>1</sub></em>,<em>T<sub>2</sub></em>)]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>If both <em>Exp</em><sub>1</sub> and <em>Exp</em><sub>2</sub> have a list as value, the result is the difference of these two list values.
If <em>Exp</em><sub>2</sub> does not have a list as value, it is first converted to a list before the difference is computed.
The difference is computed by taking the successive elements of the second list and
removing the first occurrence of that element in the first list.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[1, 2, 3, 4] - [1, 2, 3];
list[int]: [4]
rascal&gt;[1, 2, 3, 4] - [3];
list[int]: [1,2,4]
rascal&gt;[1, 2, 3, 4] - 3;
list[int]: [1,2,4]
rascal&gt;[1, 2, 3, 4] - [5, 6, 7];
list[int]: [1,2,3,4]
rascal&gt;[1, 2, 3, 1, 2, 3] - [1];
list[int]: [2,3,1,2,3]
rascal&gt;[1, 2, 3, 1, 2, 3] - [1, 2];
list[int]: [3,1,2,3]</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="List-Equal">List Equal</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Equality on lists.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> == <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> == <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[<em>T<sub>1</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[<em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if both arguments are equal lists and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[1, 2, 3] == [1, 2, 3];
bool: true
rascal&gt;[1, 2, 3] == [3, 2, 1];
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="List-Insert">List Insert</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>add an element in front of a list</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> + <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>1</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[<em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[lub(<em>T<sub>1</sub></em>,<em>T<sub>2</sub></em>)]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>The <code>+</code> operator can insert an element in front of a list. Note that <code>+</code> is one of the <a href="#Expressions-Operators">Operators</a> that is overloaded, it is also <a href="#List-Concatenation">List Concatenation</a> and <a href="#List-Append">List Append</a> for example.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;1 + []
list[int]: [1]
rascal&gt;1 + [2]
list[int]: [1,2]
rascal&gt;1 + [2,3]
list[int]: [1,2,3]</code></pre>
</div>
</div>
<div class="ulist">
<div class="title">Pitfalls</div>
<ul>
<li>
<p>If the first operand before the <code>+</code> is a list, <code>+</code> acts as <a href="#List-Concatenation">List Concatenation</a> and not as <a href="#List-Insert">List Insert</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This is concatenation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[1] + [2]
list[int]: [1,2]</code></pre>
</div>
</div>
<div class="paragraph">
<p>To insert a list as an element, use extra brackets:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[[1]] + [2]
list[value]: [
  [1],
  2
]</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="List-Intersection">List Intersection</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Intersection of two lists.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &amp; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &amp; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[<em>T<sub>1</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[<em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[lub(<em>T<sub>1</sub></em>,<em>T<sub>2</sub></em>)]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Returns the intersection of the two list values of  <em>Exp</em><sub>1</sub> and <em>Exp</em><sub>2</sub>, i.e.,
the list value of <em>Exp</em><sub>1</sub> with all elements removed that do not occur in the list value of <em>Exp</em><sub>2</sub>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[1, 2, 3, 4, 5] &amp; [4, 5, 6];
list[int]: [4,5]</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="List-NotEqual">List NotEqual</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Not equal operator on lists.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> != <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> != <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[<em>T<sub>1</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[<em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if both arguments are unequal lists and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[1, 2, 3] != [3, 2, 1];
bool: true
rascal&gt;[1, 2, 3] != [1, 2, 3];
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="List-Product">List Product</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Compute the product of two lists.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> * <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> * <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[<em>T<sub>1</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[<em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[tuple[<em>T<sub>1</sub></em>,<em>T<sub>2</sub></em>]]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields a list of tuples resulting from the product of the values of <em>Exp</em><sub>1</sub> and <em>Exp</em><sub>2</sub>.
It contains a tuple for each combination of values from both arguments.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[1, 2, 3] * [4, 5, 6];
lrel[int,int]: [
  &lt;1,4&gt;,
  &lt;1,5&gt;,
  &lt;1,6&gt;,
  &lt;2,4&gt;,
  &lt;2,5&gt;,
  &lt;2,6&gt;,
  &lt;3,4&gt;,
  &lt;3,5&gt;,
  &lt;3,6&gt;
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is a concise way to create a deck of cards:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;["clubs", "hearts", "diamonds", "spades"] * [1 .. 13];
lrel[str,int]: [
  &lt;"clubs",1&gt;,
  &lt;"clubs",2&gt;,
  &lt;"clubs",3&gt;,
  &lt;"clubs",4&gt;,
  &lt;"clubs",5&gt;,
  &lt;"clubs",6&gt;,
  &lt;"clubs",7&gt;,
  &lt;"clubs",8&gt;,
  &lt;"clubs",9&gt;,
  &lt;"clubs",10&gt;,
  &lt;"clubs",11&gt;,
  &lt;"clubs",12&gt;,
  &lt;"hearts",1&gt;,
  &lt;"hearts",2&gt;,
  &lt;"hearts",3&gt;,
  &lt;"hearts",4&gt;,
  &lt;"hearts",5&gt;,
  &lt;"hearts",6&gt;,
  &lt;"hearts",7&gt;,
  &lt;"hearts",8&gt;,
  &lt;"hearts",9&gt;,
  &lt;"hearts",10&gt;,
  &lt;"hearts",11&gt;,
  &lt;"hearts",12&gt;,
  &lt;"diamonds",1&gt;,
  &lt;"diamonds",2&gt;,
  &lt;"diamonds",3&gt;,
  &lt;"diamonds",4&gt;,
  &lt;"diamonds",5&gt;,
  &lt;"diamonds",6&gt;,
  &lt;"diamonds",7&gt;,
  &lt;"diamonds",8&gt;,
  &lt;"diamonds",9&gt;,
  &lt;"diamonds",10&gt;,
  &lt;"diamonds",11&gt;,
  &lt;"diamonds",12&gt;,
  &lt;"spades",1&gt;,
  &lt;"spades",2&gt;,
  &lt;"spades",3&gt;,
  &lt;"spades",4&gt;,
  &lt;"spades",5&gt;,
  &lt;"spades",6&gt;,
  &lt;"spades",7&gt;,
  &lt;"spades",8&gt;,
  &lt;"spades",9&gt;,
  &lt;"spades",10&gt;,
  &lt;"spades",11&gt;,
  &lt;"spades",12&gt;
]</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="List-Slice">List Slice</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Retrieve a slice of a list.</p>
</div>
<div class="ulist">
<div class="title">Syntax</div>
<ul>
<li>
<p><code><em>Exp<sub>1</sub></em> [ <em>Exp<sub>2</sub></em> .. <em>Exp<sub>4</sub></em>]</code></p>
</li>
<li>
<p><code><em>Exp<sub>1</sub></em> [ <em>Exp<sub>2</sub></em> , <em>Exp<sub>3</sub></em> .. <em>Exp<sub>4</sub></em>]</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>where <em>Exp</em><sub>2</sub> and <em>Exp</em><sub>4</sub> are optional.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 70%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>3</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>4</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp<sub>1</sub></em> [ <em>Exp<sub>2</sub></em> .. <em>Exp<sub>4</sub></em> ]</code>   or  <code><em>Exp<sub>1</sub></em> [ <em>Exp<sub>2</sub></em> , <em>Exp<sub>3</sub></em> .. <em>Exp<sub>4</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[<em>T<sub>1</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>List slicing uses the integer values of <em>Exp</em><sub>2</sub> and <em>Exp</em><sub>4</sub> to determine the <code>begin</code> (<strong>inclusive</strong>) and <code>end</code> (<strong>exclusive</strong>)
of a slice from the list value <em>L</em> of <em>Exp</em><sub>1</sub>. Negative indices count from the end of the list backwards.
Using the second form, an extra index <em>Exp</em><sub>3</sub> is given that determines the
index of the second element in the slice and establishes the <code>step</code> between
successive elements in the slice. The default <code>step</code> is 1.
If <code>end</code> is smaller than <code>begin</code>, the slice is constructed backwards.</p>
</div>
<div class="paragraph">
<p>Let <code>Len</code> be the length of <em>L</em> and let <em>N</em><sub>2</sub>, <em>N</em><sub>3</sub> and <em>N</em><sub>4</sub> be the respective values of the expressions
 <em>Exp</em><sub>2</sub>, <em>Exp</em><sub>2</sub> and <em>Exp</em><sub>2</sub> when they are present.</p>
</div>
<div class="paragraph">
<p>The slice parameters <code>begin</code>, <code>end</code>, and <code>step</code> are determined as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Exp<sub>2</sub></em>:</p>
<div class="ulist">
<ul>
<li>
<p>If <em>Exp<sub>2</sub></em> is absent, then <code>begin = 0</code>.</p>
</li>
<li>
<p>Otherwise, if <em>N<sub>2</sub></em> &gt;= 0 then <code>begin = <em>N<sub>2</sub></em></code> else <code>begin = <em>N<sub>2</sub></em> + <em>Len</em></code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>Exp<sub>4</sub></em>:</p>
<div class="ulist">
<ul>
<li>
<p>If <em>Exp<sub>4</sub></em> is absent, then <code>end = <em>Len</em></code>.</p>
</li>
<li>
<p>Otherwise, if <em>N<sub>4</sub></em> &gt;= 0, then <code>end = <em>N<sub>4</sub></em></code> else <code>end = <em>N<sub>4</sub></em> + <em>Len</em></code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>Exp<sub>3</sub></em>:</p>
<div class="ulist">
<ul>
<li>
<p>If <em>Exp<sub>3</sub></em> is absent, then if <code>begin &lt; end</code> then <code>step = 1</code> else <code>step = -1</code>.</p>
</li>
<li>
<p>Otherwise, if <code>begin &lt; end</code>, then <code>step = <em>N<sub>3</sub></em> - begin</code> else <code>step = begin - <em>N<sub>3</sub></em></code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now, the constraints <code>0 &#8656; begin &lt; Len</code> and <code>0 &lt; end &lt; Len</code> should hold,
otherwise the exception <code>IndexOutOfBounds</code> is thrown.</p>
</div>
<div class="paragraph">
<p>The slice consists of the elements <code>L[begin]</code>, <code>L[begin+step]</code>, <code>L[end - step]</code>.
When <code>begin &gt;= end</code>, the elements are listed in reverse order.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Consider the list <code>L = [0, 10, 20, 30, 40, 50, 60, 70, 80];</code> as running example.</p>
</div>
<div class="paragraph">
<p>Here is a view on <em>L</em> that will help to correlate positive and negative indices:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>i</em></code></th>
<th class="tableblock halign-left valign-top">0</th>
<th class="tableblock halign-left valign-top">1</th>
<th class="tableblock halign-left valign-top">2</th>
<th class="tableblock halign-left valign-top">3</th>
<th class="tableblock halign-left valign-top">4</th>
<th class="tableblock halign-left valign-top">5</th>
<th class="tableblock halign-left valign-top">6</th>
<th class="tableblock halign-left valign-top">7</th>
<th class="tableblock halign-left valign-top">8</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>L[<em>i</em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">40</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">70</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">80</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-<em>i</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-1</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Some common use cases (with <code>begin</code> &#8656; <code>end</code>):</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Slice</th>
<th class="tableblock halign-left valign-top">Means:</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>L[begin..end]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">elements with indices <code>begin</code> through <code>end-1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>L[begin..]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">elements with indices <code>begin</code> through the rest of the list</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>L[..end]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">elements with indices from the beginning through <code>end-1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>L[..]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the whole list</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>L[-1]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">last element of the list</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>L[-2..]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the last two elements of the list</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>L[..-2]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">all elements except the last two.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Let&#8217;s put this into practice now.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;L = [0, 10, 20, 30, 40, 50, 60, 70, 80];
list[int]: [0,10,20,30,40,50,60,70,80]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Slices with begin &lt; end</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;L[1..3];
list[int]: [10,20]
rascal&gt;L[1..];       // empty end =&gt; end of list
list[int]: [10,20,30,40,50,60,70,80]
rascal&gt;L[..3];       // empty begin =&gt; first element of list
list[int]: [0,10,20]
rascal&gt;L[..];        // both empty =&gt; whole list
list[int]: [0,10,20,30,40,50,60,70,80]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Slices with  begin &gt;= end</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;L[3..1];      // slice contains elements with indices 3 and 2 (in that order)
list[int]: [30,20]
rascal&gt;L[3..3];      // empty slice when begin == end
list[void]: []</code></pre>
</div>
</div>
<div class="paragraph">
<p>Slices with negative begin or end:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;L[2..-2];     // equivalent to L[2..7]
list[int]: [20,30,40,50,60]
rascal&gt;L[2..7];
list[int]: [20,30,40,50,60]
rascal&gt;L[-4..-2];    // equivalent to L[5..7]
list[int]: [50,60]
rascal&gt;L[5..7];
list[int]: [50,60]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Slices with an explicit second index:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;L[1,3..6];
list[int]: [10,30,50]
rascal&gt;L[5,3..];
list[int]: [50,30,10]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Explore error cases:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;L[..10];
list[int]: [0,10,20,30,40,50,60,70,80]
rascal&gt;L[1..20];
list[int]: [10,20,30,40,50,60,70,80]</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="List-Splice">List Splice</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Splice the elements of a list in an enclosing list.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp</em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>n</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code>[<em>Exp<sub>1</sub></em>, &#8230;&#8203;, <em>Exp</em>, &#8230;&#8203;, <em>Exp<sub>n</sub></em>]</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>1</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>n</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[lub(<em>T<sub>1</sub></em>, &#8230;&#8203;, <em>T</em>, &#8230;&#8203;,<em>T<sub>n</sub></em>)]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>The operator <code>*</code> splices the elements of a list in an enclosing list.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell"></code></pre>
</div>
</div>
<div class="paragraph">
<p>Consider the following list in which the list <code>[10, 20, 30]</code> occurs as list element. It has as type <code>list[value]</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[1, 2, [10, 20, 30], 3, 4];
list[value]: [
  1,
  2,
  [10,20,30],
  3,
  4
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>The effect of splicing the same list element in the enclosing list gives a flat list of type <code>list[int]</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[1, 2, *[10, 20, 30], 3, 4];
list[int]: [1,2,10,20,30,3,4]</code></pre>
</div>
</div>
<div class="paragraph">
<p>The same example can be written as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;L = [10, 20, 30];
list[int]: [10,20,30]
rascal&gt;[1, 2, *L, 3, 4];
list[int]: [1,2,10,20,30,3,4]</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Benefits</div>
<p>in which nested lists are handled.</p>
</div>
</div>
<div class="sect4">
<h5 id="List-StrictSubList">List StrictSubList</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>The strict sublist operator on lists.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &lt; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &lt; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[<em>T<sub>1</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[<em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the value of <em>Exp</em><sub>1</sub> is a strict sublist of the value of <em>Exp</em><sub>2</sub>,  and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[1, 2, 3] &lt; [1, 2, 3, 4];
bool: true
rascal&gt;[1, 2, 3, 4] &lt; [1, 2, 3, 4];
bool: false
rascal&gt;[1, 3, 5] &lt; [1, 2, 3, 4, 5]
bool: true</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="List-StrictSuperList">List StrictSuperList</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>The strict super list operator on lists.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &gt; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &gt; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[<em>T<sub>1</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[<em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the value of <em>Exp</em><sub>2</sub> is a strict sublist of the value of <em>Exp</em><sub>1</sub>,  and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[1, 2, 3, 4] &gt; [1, 2, 3];
bool: true
rascal&gt;[1, 2, 3, 4] &gt; [1, 2, 3, 4];
bool: false
rascal&gt;[1, 2, 3, 4] &gt; [1, 2, 3];
bool: true
rascal&gt;[1, 2, 3, 4, 5] &gt; [1, 3, 5]
bool: true</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="List-SubList">List SubList</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>The sublist operator on lists.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &#8656; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &#8656; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[<em>T<sub>1</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[<em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the value of <em>Exp</em><sub>1</sub> is equal to or a sublist of the value of <em>Exp</em><sub>2</sub>,  and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[1, 2, 3] &lt;= [1, 2, 3, 4];
bool: true
rascal&gt;[1, 2, 3] &lt;= [1, 2, 3];
bool: true
rascal&gt;[1, 3, 5] &lt;= [1, 2, 3, 4, 5];
bool: true</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="List-Subscription">List Subscription</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Retrieve a list element via its index.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> [ <em>Exp</em><sub>2</sub> ]</code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> [ <em>Exp<sub>2</sub></em> ]</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[<em>T<sub>1</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>1</sub></em></code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>List subscription uses the integer value of <em>Exp</em><sub>2</sub> as index in the list value of <em>Exp</em><sub>1</sub>.
The value of <em>Exp</em><sub>2</sub> should be greater or equal 0 and less than the number of elements in the list.
If this is not the case, the exception <code>IndexOutOfBounds</code> is thrown.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Introduce a list, assign it to L and retrieve the element with index 1:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;L = [10, 20, 30];
list[int]: [10,20,30]
rascal&gt;L[1];
int: 20</code></pre>
</div>
</div>
<div class="paragraph">
<p>Explore an error case:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;L[5];
IndexOutOfBounds(5) at |test-modules:///ConsoleInput.rsc|(49,4,&lt;4,15&gt;,&lt;4,19&gt;)
Call stack (most recent first):
	main([]) at |test-modules:///ConsoleInput.rsc|(49,4,&lt;4,15&gt;,&lt;4,19&gt;)

ok</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="List-SuperList">List SuperList</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>The super list operator on lists.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &gt;= <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &gt;= <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[<em>T<sub>1</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[<em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the value of <em>Exp</em><sub>2</sub> is equal to or a sublist of the value of <em>Exp</em><sub>1</sub>,  and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[1, 2, 3, 4] &gt;= [1, 2, 3];
bool: true
rascal&gt;[1, 2, 3, 4] &gt;= [1, 2, 3, 4];
bool: true
rascal&gt;[1, 2, 3, 4] &gt;= [1, 2, 3];
bool: true
rascal&gt;[1, 2, 3, 4, 5] &gt;= [1, 3, 5]
bool: true</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="List-in">List in</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Membership test on list elements.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> in <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> in <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>1</sub></em></code>  &lt;: <code><em>T<sub>2</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[<em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the value of <em>Exp</em><sub>1</sub> occurs as element in the value of <em>Exp</em><sub>2</sub> and <code>false</code> otherwise.
The type of <em>Exp</em><sub>1</sub> should be compatible with the element type of <em>Exp</em><sub>2</sub>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;2 in [1, 2, 3];
bool: true
rascal&gt;4 in [1, 2, 3];
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="List-notin">List notin</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Negated membership test on lists.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> notin <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> notin <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>1</sub></em></code>  &lt;: <code><em>T<sub>2</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[<em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the value of <em>Exp</em><sub>1</sub> does not occur as element in the value of <em>Exp</em><sub>2</sub> and <code>false</code> otherwise.
The type of <em>Exp</em><sub>1</sub> should be compatible with the element type of <em>Exp</em><sub>2</sub>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;4 notin [1, 2, 3];
bool: true
rascal&gt;2 notin [1, 2, 3];
bool: false</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Pitfalls</div>
<p>Unresolved directive in Expressions/Values/List/List.adoc - include::CartesianProduct/CartesianProduct.adoc[CartesianProduct]</p>
</div>
<div class="paragraph">
<p>Unresolved directive in Expressions/Values/List/List.adoc - include::Composition/Composition.adoc[Composition]</p>
</div>
<div class="paragraph">
<p>Unresolved directive in Expressions/Values/List/List.adoc - include::FieldSelection/FieldSelection.adoc[FieldSelection]</p>
</div>
<div class="paragraph">
<p>Unresolved directive in Expressions/Values/List/List.adoc - include::Join/Join.adoc[Join]</p>
</div>
<div class="paragraph">
<p>Unresolved directive in Expressions/Values/List/List.adoc - include::ReflexiveTransitiveClosure/ReflexiveTransitiveClosure.adoc[ReflexiveTransitiveClosure]</p>
</div>
</div>
<div class="sect4">
<h5 id="List-Subscription">List Subscription</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Retrieve a list element via its index.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> [ <em>Exp</em><sub>2</sub> ]</code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> [ <em>Exp<sub>2</sub></em> ]</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[<em>T<sub>1</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>1</sub></em></code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>List subscription uses the integer value of <em>Exp</em><sub>2</sub> as index in the list value of <em>Exp</em><sub>1</sub>.
The value of <em>Exp</em><sub>2</sub> should be greater or equal 0 and less than the number of elements in the list.
If this is not the case, the exception <code>IndexOutOfBounds</code> is thrown.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Introduce a list, assign it to L and retrieve the element with index 1:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;L = [10, 20, 30];
list[int]: [10,20,30]
rascal&gt;L[1];
int: 20</code></pre>
</div>
</div>
<div class="paragraph">
<p>Explore an error case:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;L[5];
IndexOutOfBounds(5) at |test-modules:///ConsoleInput.rsc|(49,4,&lt;4,15&gt;,&lt;4,19&gt;)
Call stack (most recent first):
	main([]) at |test-modules:///ConsoleInput.rsc|(49,4,&lt;4,15&gt;,&lt;4,19&gt;)

ok</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Pitfalls</div>
<p>Unresolved directive in Expressions/Values/List/List.adoc - include::TransitiveClosure/TransitiveClosure.adoc[TransitiveClosure]</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Values-ListRelation">6.1.6. ListRelation</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>ListRelation values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>[ &lt; <em>Exp</em><sub>11</sub>, <em>Exp</em><sub>12</sub>, &#8230;&#8203; &gt; , &lt; <em>Exp</em><sub>21</sub>, <em>Exp</em><sub>22</sub>, &#8230;&#8203; &gt; , &#8230;&#8203; ]</code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>11</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>12</sub></em></code></th>
<th class="tableblock halign-left valign-top">&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top"><code>{ &lt; <em>Exp<sub>11</sub></em>, <em>Exp<sub>12</sub></em>, &#8230;&#8203; &gt; , &#8230;&#8203; }</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>1</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>2</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lrel[<em>T<sub>1</sub></em>, <em>T<sub>2</sub></em>, &#8230;&#8203; ]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>A list relation is a list of elements with the following property:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>All elements have the same static tuple type.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>ListRelations are thus nothing more than lists of tuples, but since they are used so often we provide a shorthand notation for them.
ListRelations are represented by the type <code>lrel[<em>T</em><sub>1</sub> <em>L</em><sub>1</sub>, <em>T</em><sub>2</sub> <em>L</em><sub>2</sub>, &#8230;&#8203; ]</code>, where <em>T</em><sub>1</sub>, <em>T</em><sub>2</sub>, &#8230;&#8203; are arbitrary types and
<em>L</em><sub>1</sub>, <em>L</em><sub>2</sub>, &#8230;&#8203; are optional labels. It is a shorthand for <code>list[tuple[<em>T</em><sub>1</sub> <em>L</em><sub>1</sub>, <em>T</em><sub>2</sub> <em>L</em><sub>2</sub>, &#8230;&#8203; ]]</code>.</p>
</div>
<div class="paragraph">
<p>An n-ary list relation with m tuples is denoted by
 <code>[&lt; <em>E</em><sub>11</sub>, <em>E</em><sub>12</sub>, &#8230;&#8203;, <em>E</em><sub>1n</sub>&gt;,&lt; <em>E</em><sub>21</sub>, <em>E</em><sub>22</sub>, &#8230;&#8203;, <em>E</em><sub>2n</sub>&gt;, &#8230;&#8203;, &lt; <em>E</em><sub>m1</sub>, <em>E</em><sub>m2</sub>, &#8230;&#8203;, <em>E</em><sub>mn</sub>&gt;]</code>,
where the <em>E</em><sub>ij</sub> are expressions that yield the desired element type <em>T</em><sub>i</sub>.</p>
</div>
<div class="paragraph">
<p>Since list relations are a form of list all operations (see <a href="#Values-List">List</a>) and functions
(see <a href="#Prelude-List">[Prelude-List]</a>) are also applicable to relations.</p>
</div>
<div class="paragraph">
<p>The following additional operators are provided for list relations:</p>
</div>
<div class="paragraph">
<p>There are also <a href="../Libraries/Libraries.html#Prelude-ListRelation">library functions</a> available for ListRelation.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[&lt;1,10&gt;, &lt;2,20&gt;, &lt;3,30&gt;]
lrel[int,int]: [
  &lt;1,10&gt;,
  &lt;2,20&gt;,
  &lt;3,30&gt;
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>instead of lrel[int,int] we can also give <code>list[tuple[int,int]]</code> as type of the above expression
remember that these types are interchangeable.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[&lt;"a",10&gt;, &lt;"b",20&gt;, &lt;"c",30&gt;]
lrel[str,int]: [
  &lt;"a",10&gt;,
  &lt;"b",20&gt;,
  &lt;"c",30&gt;
]
rascal&gt;[&lt;"a", 1, "b"&gt;, &lt;"c", 2, "d"&gt;]
lrel[str,int,str]: [
  &lt;"a",1,"b"&gt;,
  &lt;"c",2,"d"&gt;
]</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="ListRelation-CartesianProduct">ListRelation CartesianProduct</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Cartesian product of two list relation values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> * <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> * <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[<em>T<sub>1</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[<em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lrel[<em>T<sub>1</sub></em>, <em>T<sub>2</sub></em>]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Returns a binary relation that is the <a href="http://en.wikipedia.org/wiki/Cartesian_product">Cartesian product</a> of two lists.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[1, 2, 3] * [9];
lrel[int,int]: [
  &lt;1,9&gt;,
  &lt;2,9&gt;,
  &lt;3,9&gt;
]
rascal&gt;[1, 2, 3] * [10, 11];
lrel[int,int]: [
  &lt;1,10&gt;,
  &lt;1,11&gt;,
  &lt;2,10&gt;,
  &lt;2,11&gt;,
  &lt;3,10&gt;,
  &lt;3,11&gt;
]</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ListRelation-Composition">ListRelation Composition</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Composition of two list relation values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> o <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> o <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lrel[<em>T<sub>1</sub></em>, <em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lrel[<em>T<sub>2</sub></em>, <em>T<sub>3</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lrel[<em>T<sub>1</sub></em>, <em>T<sub>3</sub></em>]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Returns the composition of two binary list relations.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[&lt;1,10&gt;, &lt;2,20&gt;, &lt;3,15&gt;] o [&lt;10,100&gt;, &lt;20,200&gt;];
lrel[int,int]: [
  &lt;1,100&gt;,
  &lt;2,200&gt;
]</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Pitfalls</div>
<p>We use the letter <code>o</code> as operator and this may conflict other defined names.</p>
</div>
</div>
<div class="sect4">
<h5 id="ListRelation-FieldSelection">ListRelation FieldSelection</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Select a field (column) from a list relation value.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em> . <em>Name</em></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em> . <em>Name</em></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lrel[<em>T<sub>1</sub></em> <em>L<sub>1</sub></em>, <em>T<sub>2</sub></em> <em>L<sub>2</sub></em>, &#8230;&#8203; ]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p><em>Exp</em> should evaluate to a list relation that has an <em>i</em>-th field label <em>L</em><sub>i</sub> that is identical to <em>Name</em>.
Return a list with all values of that field.
<em>Name</em> stands for itself and is not evaluated.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;lrel[str street, int nm] R = [&lt;"abc", 1&gt;, &lt;"abc", 2&gt;, &lt;"def", 4&gt;, &lt;"def", 5&gt;];
lrel[str,int]: [
  &lt;"abc",1&gt;,
  &lt;"abc",2&gt;,
  &lt;"def",4&gt;,
  &lt;"def",5&gt;
]
rascal&gt;R.street;
list[str]: ["abc","abc","def","def"]</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ListRelation-Join">ListRelation Join</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Join two list relation values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> join <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> join <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lrel[ <em>T<sub>11</sub></em>, <em>T<sub>12</sub></em>, <em>T<sub>13</sub></em>, &#8230;&#8203; ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lrel[ <em>T<sub>21</sub></em>, <em>T<sub>22</sub></em>, <em>T<sub>23</sub></em>, &#8230;&#8203; ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lrel[ <em>T<sub>11</sub></em>, <em>T<sub>12</sub></em>, <em>T<sub>13</sub></em>, &#8230;&#8203;, <em>T<sub>21</sub></em>, <em>T<sub>22</sub></em>, <em>T<sub>23</sub></em>, &#8230;&#8203; ]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>ListRelation resulting from the natural join of the list relation values of the two arguments.
This list relation contains tuples that are the result from concatenating the elements from both arguments.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[&lt;1,2&gt;, &lt;10,20&gt;] join [&lt;2,3&gt;];
lrel[int,int,int,int]: [
  &lt;1,2,2,3&gt;,
  &lt;10,20,2,3&gt;
]
rascal&gt;[&lt;1,2&gt;] join [3, 4];
lrel[int,int,int]: [
  &lt;1,2,3&gt;,
  &lt;1,2,4&gt;
]
rascal&gt;[&lt;1,2&gt;, &lt;10,20&gt;] join [&lt;2,3&gt;, &lt;20,30&gt;];
lrel[int,int,int,int]: [
  &lt;1,2,2,3&gt;,
  &lt;1,2,20,30&gt;,
  &lt;10,20,2,3&gt;,
  &lt;10,20,20,30&gt;
]</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ListRelation-ReflexiveTransitiveClosure">ListRelation Reflexive Transitive Closure</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>The reflexive transitive closure of a binary list relation.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em> *</code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp</em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp</em> *</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lrel[<em>T<sub>1</sub></em>, <em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lrel[<em>T<sub>1</sub></em>, <em>T<sub>2</sub></em>]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Reflexive transitive closure is defined by repeated composition of a list relation.
If we define for a given list relation R:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>R<sup>0</sup> = identity relation = <code>[&lt;a, a&gt;, &lt;b, b&gt; | &lt;a, b&gt; &#8592; R]</code></p>
</li>
<li>
<p>R<sup>1</sup> = R</p>
</li>
<li>
<p>R<sup>2</sup> = R o R</p>
</li>
<li>
<p>R<sup>3</sup> = R o R<sup>2</sup></p>
</li>
<li>
<p>&#8230;&#8203;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>then the reflexive transitive closure R* can be defined in two ways:
(also see <a href="#ListRelation-TransitiveClosure">ListRelation Transitive Closure</a>):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>R* = R<sup>0</sup> + R<sup>1</sup> + R<sup>2</sup> + R<sup>3</sup> + &#8230;&#8203;</p>
</li>
<li>
<p>R* = R<sup>0</sup> + R+</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[&lt;1,2&gt;, &lt;2,3&gt;, &lt;3,4&gt;]*;
lrel[int,int]: [
  &lt;1,2&gt;,
  &lt;2,3&gt;,
  &lt;3,4&gt;,
  &lt;1,3&gt;,
  &lt;2,4&gt;,
  &lt;1,4&gt;,
  &lt;4,4&gt;,
  &lt;3,3&gt;,
  &lt;2,2&gt;,
  &lt;1,1&gt;
]</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ListRelation-Subscription">ListRelation Subscription</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Indexing of a list relation via tuple values.</p>
</div>
<div class="ulist">
<div class="title">Syntax</div>
<ul>
<li>
<p><code><em>Exp<sub>0</sub></em> [ <em>Exp<sub>1</sub></em>, <em>Exp<sub>2</sub></em>, &#8230;&#8203; <em>Exp<sub>n</sub></em>]</code></p>
</li>
<li>
<p><code><em>Exp<sub>0</sub></em> [ <em>Exp<sub>1</sub></em>]</code></p>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="_variant_1_2">Variant 1</h6>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 15%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>0</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top">&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>0</sub></em> [ <em>Exp<sub>1</sub></em>, <em>Exp<sub>2</sub></em>, &#8230;&#8203; ]</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lrel[<em>T<sub>1</sub></em>, <em>T<sub>2</sub></em>, &#8230;&#8203; <em>T<sub>m</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lrel[<em>T<sub>n</sub></em>, <em>T<sub>n+1</sub></em>, &#8230;&#8203; <em>T<sub>m</sub></em>]</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="_variant_2_2">Variant 2</h6>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp<sub>0</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp<sub>1</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp<sub>0</sub></em> [ <em>Exp<sub>1</sub></em> ]</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lrel[<em>T<sub>1</sub></em>, <em>T<sub>2</sub></em>, &#8230;&#8203; <em>T<sub>m</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[<em>T<sub>1</sub></em>]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>ListRelation resulting from subscription of a ListRelation <em>Exp</em><sub>0</sub>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_variant_1_3">Variant 1</h6>
<div class="paragraph">
<p>Subscription with the index values of <em>Exp</em><sub>1</sub>, <em>Exp</em><sub>2</sub>, &#8230;&#8203;.
The result is a ListRelation with all tuples that have these index values as first elements
with the index values removed from the tuple.
If the resulting tuple has only a single element, a list is returned instead of a relation.
A wildcard <code>_</code> as index value matches all possible values at that index position.</p>
</div>
</div>
<div class="sect5">
<h6 id="_variant_2_3">Variant 2</h6>
<div class="paragraph">
<p>Subscription with a set of the index values of <em>Exp</em><sub>1</sub>.
The result is a ListRelation with all tuples that have these index values as first element
with the index values removed from the tuple.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;R = [&lt;1,10&gt;, &lt;2,20&gt;, &lt;1,11&gt;, &lt;3,30&gt;, &lt;2,21&gt;];
lrel[int,int]: [
  &lt;1,10&gt;,
  &lt;2,20&gt;,
  &lt;1,11&gt;,
  &lt;3,30&gt;,
  &lt;2,21&gt;
]
rascal&gt;R[1];
tuple[int,int]: &lt;2,20&gt;
rascal&gt;R[{1}];
list[int]: [10,11]
rascal&gt;R[{1, 2}];
list[int]: [10,20,11,21]
rascal&gt;RR = [&lt;1,10,100&gt;,&lt;1,11,101&gt;,&lt;2,20,200&gt;,&lt;2,22,202&gt;,
&gt;&gt;&gt;&gt;&gt;&gt;&gt;              &lt;3,30,300&gt;];
lrel[int,int,int]: [
  &lt;1,10,100&gt;,
  &lt;1,11,101&gt;,
  &lt;2,20,200&gt;,
  &lt;2,22,202&gt;,
  &lt;3,30,300&gt;
]
rascal&gt;RR[1];
tuple[int,int,int]: &lt;1,11,101&gt;
rascal&gt;RR[1,_];
list[int]: [100,101]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Introduce a relation with economic data and assign it to <code>GDP</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;lrel[str country, int year, int amount] GDP =
&gt;&gt;&gt;&gt;&gt;&gt;&gt;[&lt;"US", 2008, 14264600&gt;, &lt;"EU", 2008, 18394115&gt;,
&gt;&gt;&gt;&gt;&gt;&gt;&gt; &lt;"Japan", 2008, 4923761&gt;, &lt;"US", 2007, 13811200&gt;,
&gt;&gt;&gt;&gt;&gt;&gt;&gt; &lt;"EU", 2007, 13811200&gt;, &lt;"Japan", 2007, 4376705&gt;];
lrel[str,int,int]: [
  &lt;"US",2008,14264600&gt;,
  &lt;"EU",2008,18394115&gt;,
  &lt;"Japan",2008,4923761&gt;,
  &lt;"US",2007,13811200&gt;,
  &lt;"EU",2007,13811200&gt;,
  &lt;"Japan",2007,4376705&gt;
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>and then retrieve the information for the index <code>"Japan"</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;GDP["Japan"];
lrel[int,int]: [
  &lt;2008,4923761&gt;,
  &lt;2007,4376705&gt;
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>or rather for the indices <code>"Japan"</code> and <code>2008</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;GDP["Japan", 2008];
list[int]: [4923761]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ListRelation-TransitiveClosure">ListRelation Transitive Closure</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Transitive closure on binary list relation values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em> +</code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp</em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp</em> +</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lrel[<em>T<sub>1</sub></em>, <em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lrel[<em>T<sub>1</sub></em>, <em>T<sub>2</sub></em>]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Returns the transitive closure of a binary listrelation.
Transitive closure is defined by repeated composition of a relation.
If we define for a given relation R:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>R<sup>1</sup> = R</p>
</li>
<li>
<p>R<sup>2</sup> = R o R</p>
</li>
<li>
<p>R<sup>3</sup> = R o R<sup>2</sup></p>
</li>
<li>
<p>&#8230;&#8203;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>then the transitive closure R+ can be defined as</p>
</div>
<div class="ulist">
<ul>
<li>
<p>R+ = R<sup>1</sup> + R<sup>2</sup> + R<sup>3</sup> + &#8230;&#8203;</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[&lt;1,2&gt;, &lt;2,3&gt;, &lt;3,4&gt;]+;
lrel[int,int]: [
  &lt;1,2&gt;,
  &lt;2,3&gt;,
  &lt;3,4&gt;,
  &lt;1,3&gt;,
  &lt;2,4&gt;,
  &lt;1,4&gt;
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can also simply (but not necessarily efficiently) define transitive closure ourselves:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;lrel[int,int] tclosure(lrel[int,int] R) {
&gt;&gt;&gt;&gt;&gt;&gt;&gt;   tc = R;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;   while(true){
&gt;&gt;&gt;&gt;&gt;&gt;&gt;      tc1 = tc;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;      tc += tc o R;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;      if(tc1 == tc)
&gt;&gt;&gt;&gt;&gt;&gt;&gt;         return tc;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;   }
&gt;&gt;&gt;&gt;&gt;&gt;&gt;}
ok
rascal&gt;//tclosure([&lt;1,2&gt;, &lt;2,3&gt;, &lt;3,4&gt;]);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Values-Location">6.1.7. Location</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>(Source code) location values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>| <em>Uri</em> | ( <em>O</em>, <em>L</em>, &lt; <em>BL</em>, <em>BC</em> &gt; , &lt; <em>EL</em>,<em>EC</em> &gt; )</code>
where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Uri</em> is an arbitrary Uniform Resource Identifier (URI).</p>
</li>
<li>
<p><em>O</em> and <em>L</em> are integer expressions giving the offset of this location to the begin of file, respectively, its length.</p>
</li>
<li>
<p><em>BL</em> and <em>BC</em> are integers expressions giving the begin line and begin column.</p>
</li>
<li>
<p><em>EL</em> and <em>EC</em> are integers expressions giving the end line and end column.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The part following the second pipe symbol (<code>|</code>) is optional.</p>
</div>
<div class="paragraph">
<div class="title">Types</div>
<p><code>loc</code></p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Location values are represented by the type <code>loc</code> and serve the following purposes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Providing a uniform mechanism for accessing local or remote files. This is used in all IO-related library functions.</p>
</li>
<li>
<p>If the optional part is present they serve as text coordinates in a specific local or remote source file.
This is very handy to associate a source code location which extracted facts.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>URIs are explained in <a href="http://en.wikipedia.org/wiki/Uniform_Resource_Identifier">Uniform Resource Identifier</a>. From their original definition in RFC3986 we cite the following useful overview of an URI:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">         foo://example.com:8042/over/there?name=ferret#nose
         \_/   \______________/\_________/ \_________/ \__/
          |           |            |            |        |
       scheme     authority       path        query   fragment
          |   _____________________|__
         / \ /                        \
         urn:example:animal:ferret:nose</code></pre>
</div>
</div>
<div class="paragraph">
<p>The elements of a location value can be accessed and modified using the standard mechanism of field selection and field assignment. The corresponding field names are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>top</code>: the URI of the location without precise positioning information (offset, length, begin, end).</p>
</li>
<li>
<p><code>uri</code>: the URI of the location as a string. Also subfields of the URI can be accessed:</p>
<div class="ulist">
<ul>
<li>
<p><code>scheme</code>: the scheme (or protocol) to be used;</p>
</li>
<li>
<p><code>authority</code>: the domain where the data are located, as a <code>str</code>;</p>
</li>
<li>
<p><code>host</code>: the host where the URI is hosted (part of authority), as a <code>str</code>;</p>
</li>
<li>
<p><code>port</code>: port on host (part of authority), as a <code>int</code>;</p>
</li>
<li>
<p><code>path</code>: path name of file on host, as a <code>str</code>;</p>
</li>
<li>
<p><code>extension</code>: file name extension, as a <code>str</code>;</p>
</li>
<li>
<p><code>query</code>: query data, as a <code>str</code>;</p>
</li>
<li>
<p><code>fragment</code>: the fragment name following the path name and query data, as a <code>str</code>;</p>
</li>
<li>
<p><code>user</code>: user info (only present in schemes like mailto), as a <code>str</code>;</p>
</li>
<li>
<p><code>parent</code> : removes the last segment from the path component, if any, as a <code>loc</code>;</p>
</li>
<li>
<p><code>file</code> : the last segment of the path, as a <code>str</code>;</p>
</li>
<li>
<p><code>ls</code> : the contents of a directory, if the loc is a directory, as a <code>list[loc]</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>offset</code>: start of text area.</p>
</li>
<li>
<p><code>length</code>: length of text area.</p>
</li>
<li>
<p><code>begin.line</code>, <code>begin.column</code>: begin line and column of text area.</p>
</li>
<li>
<p><code>end.line</code>, <code>end.column</code> end line and column of text area.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Supported protocols are:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Scheme name and pattern</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>http://<em>host</em>:_port_/<em>path</em>?<em>query</em>#<em>fragment</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">access a remote file via the web.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="file:///" class="bare">file:///</a><em>path</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">access a local file on the file system.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cwd:///<em>path</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">access the current working directory (the directory from which Rascal was started).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>home:///<em>path</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">access the home directory of the user.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>std:///<em>path</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">access the Rascal standard library.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tmp:///<em>path</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">access the temporay file directory.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jar:_url_!/[<em>entry</em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">access any entry in a zip file (or a jar)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rascal://<em>qualifiedModulename</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">access the source code of a Rascal module name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>project://<em>projectName</em>/<em>projectRelativePath</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">access a project in the current instance of Eclipse.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bundleresource://<em>bundleId</em>/<em>bundleRelativePath</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">access OSGI bundles. Only active in Eclipse context</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Examples</div>
<p>Locations with specific position information should always be generated automatically but for the curious here is an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;|file:///home/paulk/pico.trm|(0,1,&lt;2,3&gt;,&lt;4,5&gt;)
loc: |file:///home/paulk/pico.trm|(0,1,&lt;2,3&gt;,&lt;4,5&gt;)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that this is equivalent to using the <code>home</code> scheme:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;|home://pico.trm|(0,1,&lt;2,3&gt;,&lt;4,5&gt;)
loc: |home://pico.trm|(0,1,&lt;2,3&gt;,&lt;4,5&gt;)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Accessing a file <code>src/HelloWorld.java</code> in a project with the name <code>example-project</code> in the currently running Eclipse is done as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;|project://example-project/src/HelloWorld.java|
loc: |project://example-project/src/HelloWorld.java|</code></pre>
</div>
</div>
<div class="paragraph">
<p>You could read a webpage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import IO;
ok
rascal&gt;println(readFile(|http://www.example.org|))
&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Example Domain&lt;/title&gt;

    &lt;meta charset="utf-8" /&gt;
    &lt;meta http-equiv="Content-type" content="text/html; charset=utf-8" /&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1" /&gt;
    &lt;style type="text/css"&gt;
    body {
        background-color: #f0f0f2;
        margin: 0;
        padding: 0;
        font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;

    }
    div {
        width: 600px;
        margin: 5em auto;
        padding: 50px;
        background-color: #fff;
        border-radius: 1em;
    }
    a:link, a:visited {
        color: #38488f;
        text-decoration: none;
    }
    @media (max-width: 700px) {
        body {
            background-color: #fff;
        }
        div {
            width: auto;
            margin: 0 auto;
            border-radius: 0;
            padding: 1em;
        }
    }
    &lt;/style&gt;
&lt;/head&gt;

&lt;body&gt;
&lt;div&gt;
    &lt;h1&gt;Example Domain&lt;/h1&gt;
    &lt;p&gt;This domain is established to be used for illustrative examples in documents. You may use this
    domain in examples without prior coordination or asking for permission.&lt;/p&gt;
    &lt;p&gt;&lt;a href="http://www.iana.org/domains/example"&gt;More information...&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;

ok</code></pre>
</div>
</div>
<div class="paragraph">
<p>Addition on locations creates longer paths:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;x = |tmp://myTempDirectory|;
loc: |tmp://myTempDirectory|
rascal&gt;x += "myTempFile.txt";
loc: |tmp://myTempDirectory/myTempFile.txt|</code></pre>
</div>
</div>
<div class="paragraph">
<p>Check the contents of a folder:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;|project://example-project/src|.ls
IO("Unsupported scheme project") at |test-modules:///ConsoleInput.rsc|(36,34,&lt;3,15&gt;,&lt;3,49&gt;)
Call stack (most recent first):
	main([]) at |test-modules:///ConsoleInput.rsc|(36,34,&lt;3,15&gt;,&lt;3,49&gt;)

ok</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="Location-AddSegment">Location AddSegment</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Locations can be concatenated with strings to add segments to the path component</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Loc</em> + <em>Str</em></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Loc</em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Str</em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Loc</em> + <em>Str</em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>loc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>str</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>loc</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Adds a segment to the path component of a location.
This concatenation introduces a path separator (<code>/</code>) automatically.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;|tmp:///myDir| + "myFile";
loc: |tmp:///myDir/myFile|</code></pre>
</div>
</div>
<div class="paragraph">
<p>To get the original back, you can use the <code>parent</code> field:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;(|tmp:///myDir| + "myFile").parent
loc: |tmp:///myDir|</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Location-Equal">Location Equal</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Equality operator on locations.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> == <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> == <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>loc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>loc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if both arguments are identical and <code>false</code> otherwise.</p>
</div>
</div>
<div class="sect4">
<h5 id="Location-FieldSelection">Location FieldSelection</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Field selection on locations.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em> . <em>Name</em></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp</em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Name</em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp</em> . <em>Name</em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>loc</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Depends on field</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Field selection applies to locations.
<em>Name</em> should be one of the supported fields listed in <a href="#Values-Location">Location</a> and returns the value of that field.
Name stands for itself and is not evaluated.</p>
</div>
</div>
<div class="sect4">
<h5 id="Location-GreaterThan">Location GreaterThan</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>The greater than operator on location values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &gt; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &gt; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>loc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>loc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the location value of <em>Exp</em><sub>1</sub> strictly textually encloses
the location value of <em>Exp</em><sub>2</sub>, and <code>false</code> otherwise.</p>
</div>
</div>
<div class="sect4">
<h5 id="Location-GreaterThanOrEqual">Location GreaterThanOrEqual</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>The greater than or equal operator on location values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &gt;= <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &gt;= <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>loc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>loc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the location value of <em>Exp</em><sub>1</sub> textually encloses
the location value of <em>Exp</em><sub>2</sub>, and <code>false</code> otherwise.</p>
</div>
</div>
<div class="sect4">
<h5 id="Location-LessThan">Location LessThan</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>The less than operator on location values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &lt; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &lt; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>loc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>loc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the location value of <em>Exp</em><sub>1</sub> is strictly textually contained
in the location value of <em>Exp</em><sub>2</sub>, and <code>false</code> otherwise.</p>
</div>
</div>
<div class="sect4">
<h5 id="Location-LessThanOrEqual">Location LessThanOrEqual</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>The less than or equal operator on location values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &#8656; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &#8656; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>loc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>loc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the location value of <em>Exp</em><sub>1</sub> is textually contained
in the location value of <em>Exp</em><sub>2</sub>, and <code>false</code> otherwise.</p>
</div>
</div>
<div class="sect4">
<h5 id="Location-NotEqual">NotEqual</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>The not equal operator on location values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> != <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> != <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>loc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>loc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if both arguments are not identical and <code>false</code> otherwise.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Values-Map">6.1.8. Map</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Map values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>( <em>KeyExp</em><sub>1</sub> : <em>ValExp</em><sub>1</sub>, <em>KeyExp</em><sub>2</sub> : <em>ValExp</em><sub>2</sub>, &#8230;&#8203; )</code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>KeyExp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>ValExp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>KeyExp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>ValExp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top">&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top"><code>( <em>KeyExp<sub>1</sub></em> : <em>ValExp<sub>1</sub></em>, <em>KeyExp<sub>2</sub></em> : <em>ValExp<sub>2</sub></em>, &#8230;&#8203; )</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>TK<sub>1</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>TV<sub>1</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>TK<sub>2</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>TV<sub>2</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>map[lub(<em>TK<sub>1</sub></em>, <em>TK<sub>2</sub></em>, &#8230;&#8203; ) , lub(<em>TV<sub>1</sub></em>, <em>TV<sub>2</sub></em>, &#8230;&#8203; )]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>A map is a set of key/value pairs and has the following properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Key and value may have different static types.</p>
</li>
<li>
<p>A key can only occur once.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Maps resemble functions rather than relations in the sense that only a single value can be associated with each key.</p>
</div>
<div class="paragraph">
<p>The following functions are provided for maps:</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;("pear" : 1, "apple" : 3, "banana" : 0);
map[str, int]: ("banana":0,"pear":1,"apple":3)</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="Map-Composition">Map Composition</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Composition of two map values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> o <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> o <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>map[<em>T<sub>1</sub></em>, <em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>map[<em>T<sub>2</sub></em>, <em>T<sub>3</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>map[<em>T<sub>1</sub></em>, <em>T<sub>3</sub></em>]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Returns the composition of two maps.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import Map;
ok
rascal&gt;("one" : 1, "two" : 2) o (1 : 10, 2 : 20);
map[str, int]: ("one":10,"two":20)</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Pitfalls</div>
<p>We use the letter <code>o</code> as operator and this may conflict other defined names.</p>
</div>
</div>
<div class="sect4">
<h5 id="Map-Comprehension">Map Comprehension</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>A map comprehension generates a map value.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>( <em>Exp</em><sub>1</sub> : <em>Exp</em><sub>2</sub> | <em>Gen</em><sub>1</sub>, <em>Gen</em><sub>2</sub>, &#8230;&#8203; )</code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code>( <em>Exp<sub>1</sub></em> : <em>Exp<sub>2</sub></em> | <em>Gen<sub>1</sub></em>, <em>Gen<sub>2</sub></em>, &#8230;&#8203; )</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>1</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>2</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>map[<em>T<sub>1</sub></em>, <em>T<sub>2</sub></em>]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>A map comprehension consists of a number of two contributing expressions <em>Exp</em><sub>1</sub> (for key values),
and <em>Exp</em><sub>2</sub> (the values associated with those key values) and a number of
generators <em>Gen</em><sub>1</sub>, <em>Gen</em><sub>2</sub>, <em>Gen</em><sub>3</sub>, &#8230;&#8203; that are evaluated as described in <a href="#Expressions-Comprehensions">Comprehensions</a>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell"></code></pre>
</div>
</div>
<div class="paragraph">
<p>Introduce a map of <code>fruits</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;fruits = ("pear" : 1, "apple" : 3, "banana" : 0, "berry" : 25, "orange": 35);
map[str, int]: ("banana":0,"pear":1,"orange":35,"berry":25,"apple":3)
rascal&gt;import String;
ok</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use a map comprehension to filter fruits with a name of at most 5 characters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;(fruit : fruits[fruit] | fruit &lt;- fruits, size(fruit) &lt;= 5);
map[str, int]: ("pear":1,"berry":25,"apple":3)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use a map comprehension to filter fruits with an associated value larger than 10:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;(fruit : fruits[fruit] | fruit &lt;- fruits, fruits[fruit] &gt; 10);
map[str, int]: ("orange":35,"berry":25)</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Map-Difference">Map Difference</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>The difference between two maps.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> - <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> - <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>map[<em>TK<sub>1</sub></em>, <em>TV<sub>1</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>map[<em>TK<sub>2</sub></em>, <em>TV<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>map[lub(<em>TK<sub>1</sub></em>,<em>TK<sub>2</sub></em>),lub(<em>TK<sub>1</sub></em>,<em>TK<sub>2</sub></em>)]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>The result is the difference of the two map values of <em>Exp</em><sub>1</sub> and <em>Exp</em><sub>2</sub>,
i.e. a map with all pairs in <em>Exp</em><sub>1</sub> that do have a key that does not occur in <em>Exp</em><sub>2</sub>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;("apple": 1, "pear": 2) - ("banana": 3, "apple": 4);
map[str, int]: ("pear":2)</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Map-Equal">Map Equal</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Equality operator on maps.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> == <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> == <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>map[<em>TK<sub>1</sub></em>,<em>TV<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>map[<em>TK<sub>2</sub></em>, <em>TV<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if both arguments contain the same key/value pairs, and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;("apple": 1, "pear": 2) == ("pear": 2, "apple": 1);
bool: true
rascal&gt;("apple": 1, "pear": 2) == ("apple": 1, "banana": 3)
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Map-Intersection">Map Intersection</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Intersection of two maps.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &amp; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &amp; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>map[<em>T<sub>1</sub>1</em>, <em>T12</em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[<em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[lub(<em>T<sub>1</sub></em>,<em>T<sub>2</sub></em>)]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Returns the intersection of the two map values of <em>Exp</em><sub>1</sub> and <em>Exp</em><sub>2</sub>, i.e., a map that contains the key/value pairs that
occur in both maps.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;("apple": 1, "pear": 2) &amp; ("banana": 3, "apple": 1);
map[str, int]: ("apple":1)
rascal&gt;("apple": 1, "pear": 2) &amp; ("banana": 3, "apple": 4);
map[void, void]: ()</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Map-NotEqual">Map NotEqual</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Not equal operator on map values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> != <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> != <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>map[<em>TK<sub>1</sub></em>,<em>TV<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>map[<em>TK<sub>2</sub></em>, <em>TV<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if both arguments contain different key/value pairs, and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;("apple": 1, "pear": 2) != ("apple": 1, "banana": 3);
bool: true
rascal&gt;("apple": 1, "pear": 2) != ("pear": 2, "apple": 1);
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Map-StrictSubMap">Map StrictSubMap</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Strict submap operator on map values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &lt; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &lt; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>map[<em>TK<sub>1</sub></em>,<em>TV<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>map[<em>TK<sub>2</sub></em>, <em>TV<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if all key/value pairs in the map value of <em>Exp</em><sub>1</sub> occur in the map value <em>Exp</em><sub>2</sub>
and the values of <em>Exp</em><sub>1</sub> and <em>EXp</em><sub>2</sub> are not equal, and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;("apple": 1, "pear": 2) &lt; ("pear": 2, "apple": 1, "banana" : 3);
bool: true
rascal&gt;("apple": 1, "pear": 2) &lt; ("apple": 1, "banana" : 3);
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Map-StrictSuperMap">Map StrictSuperMap</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Strict supermap operator on map values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &gt; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &gt; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>map[<em>TK<sub>1</sub></em>,<em>TV<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>map[<em>TK<sub>2</sub></em>, <em>TV<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if all key/value pairs in the map value of <em>Exp</em><sub>2</sub> occur in the map value <em>Exp</em><sub>1</sub>
and the values of <em>Exp</em><sub>1</sub> and <em>EXp</em><sub>2</sub> are not equal, and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;("pear": 2, "apple": 1, "banana" : 3) &gt; ("apple": 1, "pear": 2);
bool: true
rascal&gt;("apple": 1, "banana" : 3) &gt; ("apple": 1, "pear": 2);
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Map-SubMap">Map SubMap</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Submap operator on map values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &#8656; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &#8656; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>map[<em>TK<sub>1</sub></em>,<em>TV<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>map[<em>TK<sub>2</sub></em>, <em>TV<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if all key/value pairs in the map value of <em>Exp</em><sub>1</sub> occur in the map value <em>Exp</em><sub>2</sub>
or the values of <em>Exp</em><sub>1</sub> and <em>Exp</em><sub>2</sub> are equal, and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;("apple": 1, "pear": 2) &lt;= ("pear": 2, "apple": 1);
bool: true
rascal&gt;("apple": 1, "pear": 2) &lt;= ("pear": 2, "apple": 1, "banana" : 3);
bool: true
rascal&gt;("apple": 1, "pear": 2) &lt;= ("apple": 1, "banana" : 3);
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Map-Subscription">Map Subscription</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Retrieve a value by its key in map.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> [ <em>Exp</em><sub>2</sub> ]</code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> [ <em>Exp<sub>2</sub></em> ]</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>map[<em>T<sub>1</sub></em>, <em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>1</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>2</sub></em></code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Map subscription uses the value of <em>Exp</em><sub>2</sub> as key in the map value of <em>Exp</em><sub>1</sub> and returns the associated value.
If this key does not occur in the map, the exception <code>NoSuchKey</code> is thrown.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error"></code></pre>
</div>
</div>
<div class="paragraph">
<p>Introduce a map, assign it to <code>colors</code>, and retrieve the element with index <code>"trumps"</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;colors = ("hearts":"red", "clover":"black",
&gt;&gt;&gt;&gt;&gt;&gt;&gt;          "trumps":"black", "clubs":"red");
map[str, str]: ("hearts":"red","trumps":"black","clover":"black","clubs":"red")
rascal&gt;colors["trumps"];
str: "black"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Explore some erroneous subscription expressions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;colors[0];
[error] Expected subscript of type str, not int IN 'colors[0]'
rascal&gt;colors["square"];
NoSuchKey("square") at |test-modules:///ConsoleInput.rsc|(58,16,&lt;4,15&gt;,&lt;4,31&gt;)
Call stack (most recent first):
	main([]) at |test-modules:///ConsoleInput.rsc|(58,16,&lt;4,15&gt;,&lt;4,31&gt;)

ok</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Map-SuperMap">Map SuperMap</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Supermap operator on map values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &gt;= <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &gt;= <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>map[<em>TK<sub>1</sub></em>,<em>TV<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>map[<em>TK<sub>2</sub></em>, <em>TV<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if all key/value pairs in the map value of <em>Exp</em><sub>2</sub> occur in the map value <em>Exp</em><sub>1</sub>
or the values of <em>Exp</em><sub>1</sub> and <em>Exp</em><sub>2</sub> are equal, and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;("pear": 2, "apple": 1) &gt;= ("apple": 1, "pear": 2);
bool: true
rascal&gt;("pear": 2, "apple": 1, "banana" : 3) &gt;= ("apple": 1, "pear": 2);
bool: true
rascal&gt;("apple": 1, "banana" : 3) &gt;= ("apple": 1, "pear": 2);
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Map-Union">Map Union</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Union of two maps.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> + <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> + <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>map[<em>TK<sub>1</sub></em>, <em>TV<sub>1</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>map[<em>TK<sub>2</sub></em>, <em>TV<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>map[lub(<em>TK<sub>1</sub></em>,<em>TK<sub>2</sub></em>),lub(<em>TK<sub>1</sub></em>,<em>TK<sub>2</sub></em>) ]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>The result is the union of the two map values of <em>Exp</em><sub>1</sub> and <em>Exp</em><sub>2</sub>.
If they have a pair with the same key in common, that key will be associated
in the union with the value associated with that key in <em>Exp</em><sub>2</sub>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;("apple": 1, "pear": 2) + ("banana": 3, "kiwi": 4);
map[str, int]: ("banana":3,"pear":2,"kiwi":4,"apple":1)
rascal&gt;("apple": 1, "pear": 2) + ("banana": 3, "apple": 4);
map[str, int]: ("banana":3,"pear":2,"apple":4)</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Benefits</div>
<p>Map union is very suited for representing environment composition in interpreters.</p>
</div>
</div>
<div class="sect4">
<h5 id="Map-in">Map in</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Membership test on the keys of a map.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> in <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> in <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>1</sub></em></code>  &lt;: <code><em>TK</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>map[<em>TK</em>, <em>TV</em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the value of <em>Exp</em><sub>1</sub> occurs as key in the map value of <em>Exp</em><sub>2</sub> and <code>false</code> otherwise.
The type of <em>Exp</em><sub>1</sub> should be compatible with the key type <em>TK</em> of <em>Exp</em><sub>2</sub>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;"pear" in ("apple": 1, "pear": 2);
bool: true
rascal&gt;"pineapple" in ("apple": 1, "pear": 2);
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Map-notin">Map notin</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Negated membership test on the keys of a map.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> notin <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> notin <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>1</sub></em></code>  &lt;: <code><em>TK</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>map[<em>TK</em>, <em>TV</em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the value of <em>Exp</em><sub>1</sub> does not occur as key in the map value of <em>Exp</em><sub>2</sub> and <code>false</code> otherwise.
The type of <em>Exp</em><sub>1</sub> should be compatible with the key type <em>TK</em> of <em>Exp</em><sub>2</sub>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;"pineapple" notin ("apple": 1, "pear": 2);
bool: true
rascal&gt;"pear" notin ("apple": 1, "pear": 2);
bool: false</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Values-Node">6.1.9. Node</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Node values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>0</sub> ( <em>Exp</em><sub>1</sub>, <em>Exp</em><sub>2</sub>, &#8230;&#8203; )</code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>0</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top">&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>0</sub></em> ( <em>Exp<sub>1</sub></em>, <em>Exp<sub>2</sub></em>, &#8230;&#8203; )</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>str</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>node</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Values of type <code>node</code> represent untyped trees and are constructed as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the string value of <em>Exp<sub>0</sub></em> is the node name;</p>
</li>
<li>
<p>zero or more expressions of type <code>value</code> are the node's children.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Nodes can have <a href="#Declarations-Annotation">Annotation Declaration</a>s.</p>
</div>
<div class="paragraph">
<p>The following are provided for nodes:</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>A node with name "my_node" and three arguments</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;"my_node"(1, true, "abc");
node: "my_node"(1,true,"abc")</code></pre>
</div>
</div>
<div class="paragraph">
<p>A nested node structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;"my_node1"(1, "my_node2"(3.5, ["a", "b", "c"]), true);
node: "my_node1"(
  1,
  "my_node2"(
    3.5,
    ["a","b","c"]),
  true)</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="Node-Equal">Node Equal</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Equal operator on node values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> == <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> == <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>node</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>node</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the node names of the values of <em>Exp</em><sub>1</sub> and <em>Exp</em><sub>2</sub> are equal and
the children of each node are pairwise equal, otherwise <code>false</code>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;"f"(1, "abc", true) == "f"(1, "abc", true);
bool: true
rascal&gt;"f"(1, "abc", true) == "f"(1, "def", true);
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Node-GreaterThan">Node GreaterThan</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Greater than operator on node values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &gt; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &gt; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>node</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>node</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Comparison on nodes is defined by a lexicographic ordering. Node <code><em>N</em> = <em>F</em>(<em>N</em><sub>1</sub>, &#8230;&#8203;, <em>N</em><sub>n</sub>)</code> is greater than node
<code><em>N</em> = <em>G</em>(<em>M</em><sub>1</sub>, &#8230;&#8203;, <em>M</em><sub>m</sub>)</code> when:
*  <em>N</em> is not equal to <em>M</em>, and
*  <em>F</em> is lexicographically greater than <em>G</em>, or <em>F</em> is equal to <em>G</em> and <code><em>n</em> &gt; <em>m</em></code>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;"g"(3) &gt; "f"(10, "abc");
bool: true
rascal&gt;"f"(10, "abc") &gt; "f"(10);
bool: true</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Node-GreaterThanOrEqual">Node GreaterThanOrEqual</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Greater than or equal operator on node values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &gt;= <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &gt;= <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>node</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>node</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Comparison on nodes is defined by a lexicographic ordering. Node <code><em>N</em> = <em>F</em>(<em>N</em><sub>1</sub>, &#8230;&#8203;, <em>N</em><sub>n</sub>)</code> is greater than or equal node
<code><em>N</em> = <em>G</em>(<em>M</em><sub>1</sub>, &#8230;&#8203;, <em>M</em><sub>m</sub>)</code> when:
*  <em>N</em> is equal to <em>M</em>, or
*  <em>F</em> is lexicographically greater than <em>G</em>, or <em>F</em> is equal to <em>G</em> and <code><em>n</em> &gt; <em>m</em></code>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;"g"(3) &gt;= "f"(10, "abc");
bool: true
rascal&gt;"f"(10, "abc") &gt;= "f"(10);
bool: false
rascal&gt;"f"(10, "abc") &gt;= "f"(10, "abc");
bool: true</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Node-LessThan">Node LessThan</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Less than operator on node values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &lt; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &lt; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>node</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>node</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Comparison on nodes is defined by a lexicographic ordering. Node <code><em>N</em> = <em>F</em>(<em>N</em><sub>1</sub>, &#8230;&#8203;, <em>N</em><sub>n</sub>)</code> is less than node
<code><em>N</em> = <em>G</em>(<em>M</em><sub>1</sub>, &#8230;&#8203;, <em>M</em><sub>m</sub>)</code> when:
*  <em>N</em> is not equal to <em>M</em>, and
*  <em>F</em> is lexicographically less than <em>G</em>, or <em>F</em> is equal to <em>G</em> and <code><em>n</em> &lt; <em>m</em></code>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;"f"(10, "abc") &lt; "g"(3);
bool: true
rascal&gt;"f"(10) &lt; "f"(10, "abc");
bool: true</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Node-LessThanOrEqual">Node LessThanOrEqual</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Less than or equal operator on node values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &#8656; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &#8656; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>node</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>node</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Comparison on nodes is defined by a lexicographic ordering. Node <code><em>N</em> = <em>F</em>(<em>N</em><sub>1</sub>, &#8230;&#8203;, <em>N</em><sub>n</sub>)</code> is less than or equal node
<code><em>N</em> = <em>G</em>(<em>M</em><sub>1</sub>, &#8230;&#8203;, <em>M</em><sub>m</sub>)</code> when:
*  <em>N</em> is equal to <em>M</em>, or
*  <em>F</em> is lexicographically less than <em>G</em>, or <em>F</em> is equal to <em>G</em> and <code><em>n</em> &lt; <em>m</em></code>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;"f"(10, "abc") &lt;= "f"(10, "abc");
bool: true
rascal&gt;"f"(10) &lt;= "f"(10, "abc");
bool: true</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Node-NotEqual">Node NotEqual</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Not equal operator on node values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> != <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> != <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>node</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>node</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the node names of the values of <em>Exp</em><sub>1</sub> and <em>Exp</em><sub>2</sub> are unequal or
any of the children of each node is pairwise unequal, otherwise <code>true</code>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;"f"(1, "abc", true) != "g"(1, "abc", true);
bool: true
rascal&gt;"f"(1, "abc", true) != "f"(1, "abc", true);
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Node-Slice">Node Slice</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Retrieve a slice of a node&#8217;s argument list.</p>
</div>
<div class="ulist">
<div class="title">Syntax</div>
<ul>
<li>
<p><code><em>Exp<sub>1</sub></em> [ <em>Exp<sub>2</sub></em> .. <em>Exp<sub>4</sub></em>]</code></p>
</li>
<li>
<p><code><em>Exp<sub>1</sub></em> [ <em>Exp<sub>2</sub></em> , <em>Exp3</em> .. <em>Exp<sub>4</sub></em>]</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>where <em>Exp</em><sub>2</sub> and <em>Exp</em><sub>4</sub> are optional.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>3</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>4</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> [ <em>Exp<sub>2</sub></em> .. <em>Exp<sub>4</sub></em> ]</code>   or  <code><em>Exp<sub>1</sub></em> [ <em>Exp<sub>2</sub></em> , <em>Exp<sub>3</sub></em> .. <em>Exp<sub>4</sub></em>]</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>node</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>list[value]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>A Node slice is similar to a list <a href="#List-Slice">List Slice</a> and uses the integer values of <em>Exp</em><sub>2</sub> and <em>Exp</em><sub>4</sub> to determine the <code>begin</code> (<strong>inclusive</strong>) and <code>end</code> (<strong>exclusive</strong>)
of a slice from the children of the node value <em>ND</em> of <em>Exp</em><sub>1</sub>. Negative indices count from the end of the list of children backwards.
Using the second form, an extra index <em>Exp</em><sub>3</sub> is given that determines the
index of the second element in the slice and establishes the <code>step</code> between
successive elements in the slice. The default <code>step</code> is 1.
If <code>end</code> is smaller than <code>begin</code>, the slice is constructed backwards.</p>
</div>
<div class="paragraph">
<p>Let <code>Len</code> be the number of children of <em>ND</em> and let <em>N</em><sub>2</sub>, <em>N</em><sub>3</sub> and <em>N</em><sub>4</sub> be the respective values of the expressions
 <em>Exp</em><sub>2</sub>, <em>Exp</em><sub>2</sub> and <em>Exp</em><sub>2</sub> when they are present.</p>
</div>
<div class="paragraph">
<p>The slice parameters <code>begin</code>, <code>end</code>, and <code>step</code> are determined as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Exp<sub>2</sub></em>:</p>
<div class="ulist">
<ul>
<li>
<p>If <em>Exp<sub>2</sub></em> is absent, then <code>begin = 0</code>.</p>
</li>
<li>
<p>Otherwise, if <em>N<sub>2</sub></em> &gt;= 0 then <code>begin = <em>N<sub>2</sub></em></code> else <code>begin = <em>N<sub>2</sub></em> + <em>Len</em></code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>Exp<sub>4</sub></em>:</p>
<div class="ulist">
<ul>
<li>
<p>If <em>Exp<sub>4</sub></em> is absent, then <code>end = <em>Len</em></code>.</p>
</li>
<li>
<p>Otherwise, if <em>N<sub>4</sub></em> &gt;= 0, then <code>end = <em>N<sub>4</sub></em></code> else <code>end = <em>N<sub>4</sub></em> + <em>Len</em></code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>Exp<sub>3</sub></em>:</p>
<div class="ulist">
<ul>
<li>
<p>If <em>Exp<sub>3</sub></em> is absent, then if <code>begin &lt; end</code> then <code>step = 1</code> else <code>step = -1</code>.</p>
</li>
<li>
<p>Otherwise, if <code>begin &lt; end</code>, then <code>step = <em>N<sub>3</sub></em> - begin</code> else <code>step = begin - <em>N<sub>3</sub></em></code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now, the constraints <code>0 &#8656; begin &lt; Len</code> and <code>0 &lt; end &lt; Len</code> should hold,
otherwise the exception <code>IndexOutOfBounds</code> is thrown.</p>
</div>
<div class="paragraph">
<p>The slice consists of the children <code>ND[begin]</code>, <code>ND[begin+step]</code>, <code>ND[end - step]</code>.
When <code>begin &gt;= end</code>, the elements are listed in reverse order.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Consider the list <code>ND = "f"(0, "abc", 20, false, 40, [3,4,5], 60, {"a", "b"}, 80);</code> as running example.</p>
</div>
<div class="paragraph">
<p>Here is a view on the children of <em>ND</em> that will help to correlate positive and negative indices:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>i</em></code></th>
<th class="tableblock halign-left valign-top">0</th>
<th class="tableblock halign-left valign-top">1</th>
<th class="tableblock halign-left valign-top">2</th>
<th class="tableblock halign-left valign-top">3</th>
<th class="tableblock halign-left valign-top">4</th>
<th class="tableblock halign-left valign-top">5</th>
<th class="tableblock halign-left valign-top">6</th>
<th class="tableblock halign-left valign-top">7</th>
<th class="tableblock halign-left valign-top">8</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ND[<em>i</em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"abc"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>20</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>40</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[3,4,5]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>60</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{"a", "b"}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>80</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-<em>i</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-1</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Some common use cases (with <code>begin</code> &#8656; <code>end</code>):</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Slice</th>
<th class="tableblock halign-left valign-top">Means:</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ND[begin..end]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">children with indices <code>begin</code> through <code>end-1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ND[begin..]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">children with indices <code>begin</code> through the rest of the list of children</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ND[..end]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">children with indices from the beginning through <code>end-1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ND[..]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the whole list of children</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ND[-1]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">last child of the list of children</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ND[-2..]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the last two children of the list of children</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ND[..-2]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">all children except the last two.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Let&#8217;s put this into practice now.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;ND = "f"(0, "abc", 20, false, 40, [3,4,5], 60, {"a", "b"}, 80);
node: "f"(
  0,
  "abc",
  20,
  false,
  40,
  [3,4,5],
  60,
  {"a","b"},
  80)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Slices with begin &lt; end</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;ND[1..3];
list[value]: ["abc",20]
rascal&gt;ND[1..];       // empty end =&gt; end of list of children
list[value]: [
  "abc",
  20,
  false,
  40,
  [3,4,5],
  60,
  {"a","b"},
  80
]
rascal&gt;ND[..3];       // empty begin =&gt; first child of list
list[value]: [0,"abc",20]
rascal&gt;ND[..];        // both empty =&gt; whole list of children
list[value]: [
  0,
  "abc",
  20,
  false,
  40,
  [3,4,5],
  60,
  {"a","b"},
  80
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Slices with  begin &gt;= end</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;ND[3..1];      // slice contains children with indices 3 and 2 (in that order)
list[value]: [false,20]
rascal&gt;ND[3..3];      // empty slice when begin == end
list[void]: []</code></pre>
</div>
</div>
<div class="paragraph">
<p>Slices with negative begin or end:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;ND[2..-2];     // equivalent to ND[2..7]
list[value]: [
  20,
  false,
  40,
  [3,4,5],
  60
]
rascal&gt;ND[2..7];
list[value]: [
  20,
  false,
  40,
  [3,4,5],
  60
]
rascal&gt;ND[-4..-2];    // equivalent to ND[5..7]
list[value]: [
  [3,4,5],
  60
]
rascal&gt;ND[5..7];
list[value]: [
  [3,4,5],
  60
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Slices with an explicit second index:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;ND[1,3..6];
list[value]: [
  "abc",
  false,
  [3,4,5]
]
rascal&gt;ND[5,3..];
list[value]: [
  [3,4,5],
  false,
  "abc"
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Explore error cases:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;ND[..10];
list[value]: [
  0,
  "abc",
  20,
  false,
  40,
  [3,4,5],
  60,
  {"a","b"},
  80
]
rascal&gt;ND[1..20];
list[value]: [
  "abc",
  20,
  false,
  40,
  [3,4,5],
  60,
  {"a","b"},
  80
]</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Node-Subscription">Node Subscription</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Retrieve an argument of a node via its index.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> [ <em>Exp</em><sub>2</sub> ]</code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> [ <em>Exp<sub>2</sub></em> ]</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>node</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>value</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Node subscription uses the integer value of <em>Exp</em><sub>2</sub> as index in the argument list of the node value of <em>Exp</em><sub>1</sub>.
The value of <em>Exp</em><sub>2</sub> should be greater or equal 0 and less than the number of arguments of the node.
If this is not the case, the exception <code>IndexOutOfBounds</code> is thrown.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error"></code></pre>
</div>
</div>
<div class="paragraph">
<p>Introduce a node, assign it to F and retrieve the various arguments:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;F = "f"(1, "abc", false);
node: "f"(1,"abc",false)
rascal&gt;F[0]
int: 1
rascal&gt;F[1]
str: "abc"
rascal&gt;F[2]
bool: false</code></pre>
</div>
</div>
<div class="paragraph">
<p>Explore an error case:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;F[3];
IndexOutOfBounds(3) at |test-modules:///ConsoleInput.rsc|(44,4,&lt;4,15&gt;,&lt;4,19&gt;)
Call stack (most recent first):
	main([]) at |test-modules:///ConsoleInput.rsc|(44,4,&lt;4,15&gt;,&lt;4,19&gt;)

ok</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Values-Number">6.1.10. Number</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Numeric values.</p>
</div>
<div class="paragraph">
<div class="title">Types</div>
<p><code>int</code>, <code>real</code>, <code>num</code></p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Numbers include integers (values of type <code>int</code>) and reals (values of type <code>real</code>).
If both operands have the same type (<code>int</code> or <code>real</code>) then the operator is the corresponding operator on integers or reals. Otherwise, integer arguments are first converted to real and the real operator is applied.</p>
</div>
<div class="paragraph">
<p>The following operations are provided on numbers:</p>
</div>
<div class="sect4">
<h5 id="Number-Addition">Number Addition</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Addition on numeric values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp<sub>1</sub></em> + <em>Exp<sub>2</sub></em></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> + <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields the numerical sum of the values of <em>Exp</em><sub>1</sub> and <em>Exp</em><sub>2</sub>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;12 + 13
int: 25
rascal&gt;12 + 13.5
real: 25.5</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Number-Conditional">Number Conditional</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Conditional expression for numeric values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> ? <em>Exp</em><sub>2</sub> : <em>Exp</em><sub>3</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>3</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> ? <em>Exp<sub>2</sub></em> : <em>Exp<sub>3</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>If the value of <em>Exp</em> is <code>true</code> then the value of <em>Exp</em><sub>1</sub> else the value of <em>Exp</em><sub>2</sub>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;(3 &gt; 2) ? 10 : 20
int: 10
rascal&gt;(3 &gt; 20) ? 10 : 20
int: 20</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Number-Division">Number Division</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Division on numeric values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> / <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> / <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields the result of dividing the value of <em>Exp<sub>1</sub></em> by the value of <em>Exp<sub>2</sub></em>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;12 / 3
int: 4
rascal&gt;10 / 3
int: 3
rascal&gt;12 / 3.0
real: 4.
rascal&gt;10 / 3.0
real: 3.333333333
rascal&gt;12 / 0
ArithmeticException("/ by zero") at |test-modules:///ConsoleInput.rsc|(36,6,&lt;3,15&gt;,&lt;3,21&gt;)
Call stack (most recent first):
	main([]) at |test-modules:///ConsoleInput.rsc|(36,6,&lt;3,15&gt;,&lt;3,21&gt;)

ok</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Number-Equal">Number Equal</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Equality operator on numeric values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> == <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> == <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the value of both arguments is numerically equal, and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;12 == 12
bool: true
rascal&gt;12 == 12.0
bool: true
rascal&gt;12 == 13
bool: false
rascal&gt;12 == 13.0
bool: false
rascal&gt;3.14 == 3.14
bool: true
rascal&gt;3.14 == 3
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Number-GreaterThan">Number GreaterThan</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Greater than operator on numeric values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &gt; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &gt; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the value of <em>Exp<sub>1</sub></em> is numerically greater than the value of <em>Exp<sub>2</sub></em>, and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;13 &gt; 12
bool: true
rascal&gt;12 &gt; 13
bool: false
rascal&gt;13.5 &gt; 12
bool: true
rascal&gt;12.5 &gt; 13
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Number-GreaterThanOrEqual">Number GreaterThanOrEqual</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Greater than or equal operator on numeric values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &gt;= <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &gt;= <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the value of <em>Exp<sub>1</sub></em> is numerically greater than or equal to the value of <em>Exp<sub>2</sub></em>, and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;13 &gt;= 12
bool: true
rascal&gt;12 &gt;= 13
bool: false
rascal&gt;13.5 &gt;= 12
bool: true
rascal&gt;12.5 &gt;= 13
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Number-LessThan">Number LessThan</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Less than operator on numeric values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &lt; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &lt; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the value of <em>Exp<sub>1</sub></em> is numerically less than the value of <em>Exp<sub>2</sub></em>, and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;13 &lt; 12
bool: false
rascal&gt;12 &lt; 13
bool: true
rascal&gt;13.5 &lt; 12
bool: false
rascal&gt;12.5 &lt; 13
bool: true</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Number-LessThanOrEqual">Number LessThanOrEqual</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Less than or equal operator on numeric values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &#8656; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &#8656; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the value of <em>Exp<sub>1</sub></em> is numerically less than or equal to the value of <em>Exp<sub>2</sub></em>, and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;13 &lt;= 12
bool: false
rascal&gt;12 &lt;= 13
bool: true
rascal&gt;13.5 &lt;= 12
bool: false
rascal&gt;12.5 &lt;= 13
bool: true</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Number-Multiplication">Number Multiplication</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Multiply two numeric values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> * <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> * <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields the result of multiplying the values of <em>Exp<sub>1</sub></em> and <em>Exp<sub>2</sub></em>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;12 * 13
int: 156
rascal&gt;12 * 13.5
real: 162.0
rascal&gt;-12*13
int: -156</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Number-Negation">Number Negation</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Negate a numeric value.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>- <em>Exp</em></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp</em></code></th>
<th class="tableblock halign-left valign-top"><code>- <em>Exp</em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields the negated values of <em>Exp</em>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;-12
int: -12
rascal&gt;-13.5
real: -13.5
rascal&gt;- -12
int: 12</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Number-NotEqual">Number NotEqual</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Not equal operator on numeric values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> != <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> != <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the value of both arguments is numerically unequal, and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;12 != 13
bool: true
rascal&gt;12 != 12
bool: false
rascal&gt;12 != 13.0
bool: true
rascal&gt;12.0 != 13
bool: true
rascal&gt;3.14 != 3
bool: true
rascal&gt;3.14 != 3.14
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Number-Remainder">Number Remainder</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Remainder of two integer values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> % <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> % <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields the remainder when dividing the of <em>Exp</em><sub>1</sub> by the value of <em>Exp</em><sub>2</sub>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;12 % 5
int: 2
rascal&gt;12 % 6
int: 0</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Pitfalls</div>
<p>Remainder is only defined on integers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;13.5 % 6
[error] Remainder not defined on real and int IN '13.5 % 6'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Number-Subtraction">Number Subtraction</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Subtract two numeric values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> - <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> - <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields the numerical result of subtracting the value of <em>Exp</em><sub>2</sub> from the value of <em>Exp</em><sub>1</sub>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;13 - 12
int: 1
rascal&gt;13.5 - 12
real: 1.5
rascal&gt;12 - 13
int: -1
rascal&gt;12 - 13.5
real: -1.5</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Values-Range">6.1.11. Range</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Numeric range of values.</p>
</div>
<div class="ulist">
<div class="title">Syntax</div>
<ul>
<li>
<p><code>[ <em>Exp<sub>1</sub></em> .. <em>Exp<sub>3</sub></em> ]</code></p>
</li>
<li>
<p><code>[ <em>Exp<sub>1</sub></em>, <em>Exp<sub>2</sub></em> .. <em>Exp<sub>3</sub></em> ]</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Ranges are a shorthand for describing lists of integers from
<em>Exp</em><sub>1</sub> up to (exclusive) <em>Exp</em><sub>3</sub> with increments of 1.
When <em>Exp</em><sub>2</sub> is present it is taken as the second element of the list
and <em>Exp</em><sub>2</sub> - <em>Exp</em><sub>1</sub> is used as increment for the subsequent list elements.</p>
</div>
<div class="paragraph">
<p>A range with integer expressions is identical to a list <a href="#List-Slice">List Slice</a>.
However, a range may also contain numeric expressions that are not integers.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[1 .. 10];
list[int]: [1,2,3,4,5,6,7,8,9]
rascal&gt;[1, 3 .. 10];
list[int]: [1,3,5,7,9]
rascal&gt;[0.5, 3.2 .. 10];
list[real]: [0.5,3.2,5.9,8.6]
rascal&gt;[1, -2 .. -10];
list[int]: [1,-2,-5,-8]</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Benefits</div>
<p>Ranges are mostly used to loop over ranges of integers.</p>
</div>
<div class="paragraph">
<div class="title">Pitfalls</div>
<p>In some cases ranges are empty where one could have expected at least one element:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[1, 3 .. -10];
list[void]: []</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Values-Real">6.1.12. Real</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Real values.</p>
</div>
<div class="paragraph">
<div class="title">Types</div>
<p><code>real</code></p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>The real values are represented by the type <code>real</code> and are written as usual in most programming languages.
They can have <em>arbitrary size and precision</em>.</p>
</div>
<div class="paragraph">
<p>See <a href="#Values-Number">Number</a> for all operations on integers, reals and numbers.</p>
</div>
<div class="ulist">
<div class="title">Examples</div>
<ul>
<li>
<p>1.5</p>
</li>
<li>
<p>3.14e-123</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Values-ReifiedTypes">6.1.13. ReifiedTypes</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Types can be represented by values</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>The type reify expression operator has two functions in one go:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>it transforms type literals into values that represent them (an isomorphic relation)</p>
</li>
<li>
<p>it reifies the declarations necessary to build values of the types as well</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As a result a reified type can be used to reconstruct a type and the abstract (<a href="#Declarations-AlgebraicDataType">Algebraic Data Type</a>) or concrete (<a href="#Declarations-SyntaxDefinition">Syntax Definition</a>) grammar that produced it.</p>
</div>
<div class="paragraph">
<p>Type literals have a nice interaction with <a href="#StaticTyping-TypeParameters">Type Parameters</a>, since they can be used to bind a type parameter without having to provide a value of the type. An example is the <a href="#parse">[parse]</a> function in <a href="#ParseTree">[ParseTree]</a> (see below for an example usage).</p>
</div>
<div class="paragraph">
<p>The values that are used to represent types are declared in the <a href="#Libraries-Prelude-Type">[Libraries-Prelude-Type]</a> module and <a href="#Libraries-Prelude-ParseTree">[Libraries-Prelude-ParseTree]</a> modules, namely <code>Symbol</code> is the data-type to represent types symbolically and <code>Production</code> is the data-type for representing grammatical constructs.</p>
</div>
<div class="paragraph">
<p>A type literal wraps a <code>Symbol</code> and a map of `Production`s.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>First import the module <code>Type</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import Type;
ok</code></pre>
</div>
</div>
<div class="paragraph">
<p>Builtin types can be constructed without definitions, so the reified type representation is simple:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;#int
type[int]: type(
  int(),
  ())
rascal&gt;#list[int]
type[list[int]]: type(
  list(int()),
  ())
rascal&gt;#rel[int from, int to]
type[rel[int from,int to]]: type(
  rel([
      label(
        "from",
        int()),
      label(
        "to",
        int())
    ]),
  ())</code></pre>
</div>
</div>
<div class="paragraph">
<p>to get the symbol from the reified type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;#int.symbol
Symbol: int()</code></pre>
</div>
</div>
<div class="paragraph">
<p>or we can use some definitions and reify the defined type to see a different behavior:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;data Nat = zero() | succ(Nat prev) | add(Nat l, Nat r) | mul(Nat l, Nat r);
ok
rascal&gt;#Nat
type[Nat]: type(
  adt(
    "Nat",
    []),
  (adt(
      "Nat",
      []):choice(
      adt(
        "Nat",
        []),
      {
        cons(
          label(
            "add",
            adt(
              "Nat",
              [])),
          [
            label(
              "l",
              adt(
                "Nat",
                [])),
            label(
              "r",
              adt(
                "Nat",
                []))
          ],
          [],
          {}),
        cons(
          label(
            "mul",
            adt(
              "Nat",
              [])),
          [
            label(
              "l",
              adt(
                "Nat",
                [])),
            label(
              "r",
              adt(
                "Nat",
                []))
          ],
          [],
          {}),
        cons(
          label(
            "zero",
            adt(
              "Nat",
              [])),
          [],
          [],
          {}),
        cons(
          label(
            "succ",
            adt(
              "Nat",
              [])),
          [label(
              "prev",
              adt(
                "Nat",
                []))],
          [],
          {})
      })))</code></pre>
</div>
</div>
<div class="paragraph">
<p>and we can get an abstract definition of the constructors of the [AlgebraicDataType]:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import Type;
ok
rascal&gt;#Nat.definitions[adt("Nat",[])]
Production: choice(
  adt(
    "Nat",
    []),
  {
    cons(
      label(
        "add",
        adt(
          "Nat",
          [])),
      [
        label(
          "l",
          adt(
            "Nat",
            [])),
        label(
          "r",
          adt(
            "Nat",
            []))
      ],
      [],
      {}),
    cons(
      label(
        "mul",
        adt(
          "Nat",
          [])),
      [
        label(
          "l",
          adt(
            "Nat",
            [])),
        label(
          "r",
          adt(
            "Nat",
            []))
      ],
      [],
      {}),
    cons(
      label(
        "zero",
        adt(
          "Nat",
          [])),
      [],
      [],
      {}),
    cons(
      label(
        "succ",
        adt(
          "Nat",
          [])),
      [label(
          "prev",
          adt(
            "Nat",
            []))],
      [],
      {})
  })</code></pre>
</div>
</div>
<div class="paragraph">
<p>we could go the other way around and construct a type literal dynamically:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;type(\int(),())
type[int]: type(
  int(),
  ())
rascal&gt;type(\int(),()) == #int
bool: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>we use type literals often in IO to express an expected type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import ValueIO;
ok
rascal&gt;int testInt = readTextValueString(#int, "1");
int: 1
rascal&gt;tuple[int,int] testTuple = readTextValueString(#tuple[int,int], "\&lt;1,2\&gt;");
tuple[int,int]: &lt;1,2&gt;</code></pre>
</div>
</div>
<div class="ulist">
<div class="title">Pitfalls</div>
<ul>
<li>
<p>Note that the type reify operator always produces constant values, because type literals are always constants.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="Values-Relation">6.1.14. Relation</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Relation values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>{ &lt; <em>Exp<sub>11</sub></em>, <em>Exp<sub>12</sub></em>, &#8230;&#8203; &gt; , &lt; <em>Exp<sub>21</sub></em>, <em>Exp</em><sub>22</sub>, &#8230;&#8203; &gt; , &#8230;&#8203; }</code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>11</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>12</sub></em></code></th>
<th class="tableblock halign-left valign-top">&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top"><code>{ &lt; <em>Exp<sub>11</sub></em>, <em>Exp<sub>12</sub></em>, &#8230;&#8203; &gt; , &#8230;&#8203; }</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>1</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>2</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rel[<em>T<sub>1</sub></em>, <em>T<sub>2</sub></em>, &#8230;&#8203; ]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>A relation is a set of elements with the following property:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>All elements have the same static tuple type.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Relations are thus nothing more than sets of tuples, but since they are used so often we provide a shorthand notation for them.
Relations are represented by the type <code>rel[<em>T</em><sub>1</sub> <em>L</em><sub>1</sub>, <em>T</em><sub>2</sub> <em>L</em><sub>2</sub>, &#8230;&#8203; ]</code>, where <em>T</em><sub>1</sub>, <em>T</em><sub>2</sub>, &#8230;&#8203; are arbitrary types and
<em>L</em><sub>1</sub>, <em>L</em><sub>2</sub>, &#8230;&#8203; are optional labels. It is a shorthand for <code>set[tuple[<em>T</em><sub>1</sub> <em>L</em><sub>1</sub>, <em>T</em><sub>2</sub> <em>L</em><sub>2</sub>, &#8230;&#8203; ]]</code>.</p>
</div>
<div class="paragraph">
<p>An n-ary relations with m tuples is denoted by
 <code>{&lt; <em>E</em><sub>11</sub>, <em>E</em><sub>12</sub>, &#8230;&#8203;, <em>E</em><sub>1n</sub> &gt;,&lt; <em>E</em><sub>21</sub>, <em>E</em><sub>22</sub>, &#8230;&#8203;, <em>E</em><sub>2n</sub> &gt;, &#8230;&#8203;, &lt; <em>E</em><sub>m1</sub>, <em>E</em><sub>m2</sub>, &#8230;&#8203;, <em>E</em><sub>mn</sub> &gt;}</code>,
where the <em>E</em><sub>ij</sub> are expressions that yield the desired element type <em>T</em><sub>i</sub>.</p>
</div>
<div class="paragraph">
<p>Since relations are a form of set all operations (see <a href="#Values-Set">Set</a>) and functions
(see <a href="#Prelude-Set">[Prelude-Set]</a>) are also applicable to relations.</p>
</div>
<div class="paragraph">
<p>The following additional operators are provided for relations:</p>
</div>
<div class="paragraph">
<p>There are also <a href="../Libraries/Libraries.html#Prelude-Relation">library functions</a> available for Relations.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;{&lt;1,10&gt;, &lt;2,20&gt;, &lt;3,30&gt;}
rel[int,int]: {
  &lt;1,10&gt;,
  &lt;2,20&gt;,
  &lt;3,30&gt;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>instead of <code>rel[int,int]</code> we can also give <code>set[tuple[int,int]]</code> as type of the above expression
remember that these types are interchangeable.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;{&lt;"a",10&gt;, &lt;"b",20&gt;, &lt;"c",30&gt;}
rel[str,int]: {
  &lt;"b",20&gt;,
  &lt;"a",10&gt;,
  &lt;"c",30&gt;
}
rascal&gt;{&lt;"a", 1, "b"&gt;, &lt;"c", 2, "d"&gt;}
rel[str,int,str]: {
  &lt;"c",2,"d"&gt;,
  &lt;"a",1,"b"&gt;
}</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="Relation-CartesianProduct">Relation CartesianProduct</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Cartesian product of two relation values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> * <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> * <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[<em>T<sub>1</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[<em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rel[<em>T<sub>1</sub></em>, <em>T<sub>2</sub></em>]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Returns a binary relation that is the <a href="http://en.wikipedia.org/wiki/Cartesian_product">Cartesian product</a> of two sets.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;{1, 2, 3} * {9};
rel[int,int]: {
  &lt;1,9&gt;,
  &lt;3,9&gt;,
  &lt;2,9&gt;
}
rascal&gt;{1, 2, 3} * {10, 11};
rel[int,int]: {
  &lt;2,10&gt;,
  &lt;2,11&gt;,
  &lt;1,10&gt;,
  &lt;3,10&gt;,
  &lt;3,11&gt;,
  &lt;1,11&gt;
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Relation-Composition">Relation Composition</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Composition of two relation values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> o <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> o <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rel[<em>T<sub>1</sub></em>, <em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rel[<em>T<sub>2</sub></em>, <em>T<sub>3</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rel[<em>T<sub>1</sub></em>, <em>T<sub>3</sub></em>]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Returns the composition of two binary relations.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import Relation;
ok
rascal&gt;{&lt;1,10&gt;, &lt;2,20&gt;, &lt;3,15&gt;} o {&lt;10,100&gt;, &lt;20,200&gt;};
rel[int,int]: {
  &lt;1,100&gt;,
  &lt;2,200&gt;
}</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Pitfalls</div>
<p>We use the letter <code>o</code> as operator and this may conflict other defined names.</p>
</div>
</div>
<div class="sect4">
<h5 id="Relation-FieldSelection">Relation FieldSelection</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Select a field (column) from a relation value.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em> . <em>Name</em></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp</em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp</em> . <em>Name</em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rel[<em>T<sub>1</sub></em> <em>L<sub>1</sub></em>, <em>T<sub>2</sub></em> <em>L<sub>2</sub></em>, &#8230;&#8203; ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[<em>T<sub>i</sub></em>]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p><em>Exp</em> should evaluate to a relation that has an <em>i</em>-th field label <em>L</em><sub>i</sub> that is identical to <em>Name</em>.
Return a set with all values of that field.
<em>Name</em> stands for itself and is not evaluated.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;rel[str street, int nm] R = {&lt;"abc", 1&gt;, &lt;"abc", 2&gt;, &lt;"def", 4&gt;, &lt;"def", 5&gt;};
rel[str,int]: {
  &lt;"abc",2&gt;,
  &lt;"abc",1&gt;,
  &lt;"def",5&gt;,
  &lt;"def",4&gt;
}
rascal&gt;R.street;
set[str]: {"abc","def"}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Relation-Join">Relation Join</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Join two relation values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> join <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> join <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rel[ <em>T<sub>11</sub></em>, <em>T<sub>12</sub></em>, <em>T<sub>13</sub></em>, &#8230;&#8203; ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rel[ <em>T<sub>21</sub></em>, <em>T<sub>22</sub></em>, <em>T<sub>23</sub></em>, &#8230;&#8203; ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rel[ <em>T<sub>11</sub></em>, <em>T<sub>12</sub></em>, <em>T<sub>13</sub></em>, &#8230;&#8203;, <em>T<sub>21</sub></em>, <em>T<sub>22</sub></em>, <em>T<sub>23</sub></em>, &#8230;&#8203; ]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Relation resulting from the natural join of the relation values of the two arguments.
This relation contains tuples that are the result from concatenating the elements from both arguments.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;{&lt;1,2&gt;, &lt;10,20&gt;} join {&lt;2,3&gt;};
rel[int,int,int,int]: {
  &lt;1,2,2,3&gt;,
  &lt;10,20,2,3&gt;
}
rascal&gt;{&lt;1,2&gt;} join {3, 4};
rel[int,int,int]: {
  &lt;1,2,3&gt;,
  &lt;1,2,4&gt;
}
rascal&gt;{&lt;1,2&gt;, &lt;10,20&gt;} join {&lt;2,3&gt;, &lt;20,30&gt;};
rel[int,int,int,int]: {
  &lt;1,2,2,3&gt;,
  &lt;10,20,2,3&gt;,
  &lt;10,20,20,30&gt;,
  &lt;1,2,20,30&gt;
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Relation-ReflexiveTransitiveClosure">Relation ReflexiveTransitiveClosure</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>The reflexive transitive closure of a binary relation.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em> *</code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp</em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp</em> *</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rel[<em>T<sub>1</sub></em>, <em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rel[<em>T<sub>1</sub></em>, <em>T<sub>2</sub></em>]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Reflexive transitive closure is defined by repeated composition of a relation.
If we define for a given relation R:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>R<sup>0</sup> = identity relation = <code>{&lt;a, a&gt;, &lt;b, b&gt; | &lt;a, b&gt; &#8592; R}</code></p>
</li>
<li>
<p>R<sup>1</sup> = R</p>
</li>
<li>
<p>R<sup>2</sup> = R o R</p>
</li>
<li>
<p>R<sup>3</sup> = R o R<sup>2</sup></p>
</li>
<li>
<p>&#8230;&#8203;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>then the reflexive transitive closure R* can be defined in two ways:
(also see <a href="#Relation-TransitiveClosure">Relation TransitiveClosure</a>):
*  R* = R<sup>0</sup> + R<sup>1</sup> + R<sup>2</sup> + R<sup>3</sup> + &#8230;&#8203;
*  R* = R<sup>0</sup> + R+</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;{&lt;1,2&gt;, &lt;2,3&gt;, &lt;3,4&gt;}*;
rel[int,int]: {
  &lt;2,4&gt;,
  &lt;3,4&gt;,
  &lt;1,4&gt;,
  &lt;1,3&gt;,
  &lt;2,2&gt;,
  &lt;1,1&gt;,
  &lt;1,2&gt;,
  &lt;3,3&gt;,
  &lt;4,4&gt;,
  &lt;2,3&gt;
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Relation-Subscription">Relation Subscription</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Indexing of a relation via tuple values.</p>
</div>
</div>
<div class="sect4">
<h5 id="__code_em_exp_0_em_em_exp_sub_1_sub_em_em_exp_sub_2_sub_em_em_exp_sub_n_sub_em_code"><code><em>Exp_0</em> [ <em>Exp<sub>1</sub></em>, <em>Exp<sub>2</sub></em>, &#8230;&#8203; <em>Exp<sub>n</sub></em>]</code></h5>

</div>
<div class="sect4">
<h5 id="__code_em_exp_0_em_em_exp_sub_1_sub_em_code"><code><em>Exp_0</em> [ <em>Exp<sub>1</sub></em>]</code></h5>
<div class="sect5">
<h6 id="_variant_1_4">Variant 1</h6>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 15%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp_0</em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top">&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top"><code><em>Exp_0</em> [ <em>Exp<sub>1</sub></em>, <em>Exp<sub>2</sub></em>, &#8230;&#8203; ]</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rel[<em>T<sub>1</sub></em>, <em>T<sub>2</sub></em>, &#8230;&#8203; <em>T<sub>m</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rel[<em>T<sub>n</sub></em>, <em>T<sub>n+1</sub></em>, &#8230;&#8203; <em>T<sub>m</sub></em>]</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="_variant_2_4">Variant 2</h6>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>0</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>0</sub></em> [ <em>Exp<sub>1</sub></em> ]</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rel[<em>T<sub>1</sub></em>, <em>T<sub>2</sub></em>, &#8230;&#8203; <em>T<sub>m</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[<em>T<sub>1</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rel[<em>T<sub>2</sub></em>, <em>T<sub>2</sub></em>, &#8230;&#8203; <em>T<sub>m</sub></em>]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Relation resulting from subscription of a relation <em>Exp</em><sub>0</sub>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_variant_1_5">Variant 1</h6>
<div class="paragraph">
<p>Subscription with the index values of <em>Exp</em><sub>1</sub>, <em>Exp</em><sub>2</sub>, &#8230;&#8203;.
The result is a relation with all tuples that have these index values as first elements
with the index values removed from the tuple.
If the resulting tuple has only a single element, a set is returned instead of a relation.
A wildcard <code>_</code> as index value matches all possible values at that index position.</p>
</div>
</div>
<div class="sect5">
<h6 id="_variant_2_5">Variant 2</h6>
<div class="paragraph">
<p>Subscription with a set of the index values of <em>Exp</em><sub>1</sub>.
The result is a relation with all tuples that have these index values as first element
with the index values removed from the tuple.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;R = {&lt;1,10&gt;, &lt;2,20&gt;, &lt;1,11&gt;, &lt;3,30&gt;, &lt;2,21&gt;};
rel[int,int]: {
  &lt;1,10&gt;,
  &lt;2,20&gt;,
  &lt;3,30&gt;,
  &lt;2,21&gt;,
  &lt;1,11&gt;
}
rascal&gt;R[1];
set[int]: {10,11}
rascal&gt;R[{1}];
set[int]: {10,11}
rascal&gt;R[{1, 2}];
set[int]: {10,20,11,21}
rascal&gt;RR = {&lt;1,10,100&gt;,&lt;1,11,101&gt;,&lt;2,20,200&gt;,&lt;2,22,202&gt;,
&gt;&gt;&gt;&gt;&gt;&gt;&gt;              &lt;3,30,300&gt;};
rel[int,int,int]: {
  &lt;1,10,100&gt;,
  &lt;3,30,300&gt;,
  &lt;1,11,101&gt;,
  &lt;2,20,200&gt;,
  &lt;2,22,202&gt;
}
rascal&gt;RR[1];
rel[int,int]: {
  &lt;10,100&gt;,
  &lt;11,101&gt;
}
rascal&gt;RR[1,_];
set[int]: {100,101}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Introduce a relation with economic data and assign it to <code>GDP</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;rel[str country, int year, int amount] GDP =
&gt;&gt;&gt;&gt;&gt;&gt;&gt;{&lt;"US", 2008, 14264600&gt;, &lt;"EU", 2008, 18394115&gt;,
&gt;&gt;&gt;&gt;&gt;&gt;&gt; &lt;"Japan", 2008, 4923761&gt;, &lt;"US", 2007, 13811200&gt;,
&gt;&gt;&gt;&gt;&gt;&gt;&gt; &lt;"EU", 2007, 13811200&gt;, &lt;"Japan", 2007, 4376705&gt;};
rel[str,int,int]: {
  &lt;"EU",2007,13811200&gt;,
  &lt;"US",2007,13811200&gt;,
  &lt;"Japan",2007,4376705&gt;,
  &lt;"US",2008,14264600&gt;,
  &lt;"Japan",2008,4923761&gt;,
  &lt;"EU",2008,18394115&gt;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>and then retrieve the information for the index <code>"Japan"</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;GDP["Japan"];
rel[int,int]: {
  &lt;2008,4923761&gt;,
  &lt;2007,4376705&gt;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>or rather for the indices <code>"Japan"</code> and <code>2008</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;GDP["Japan", 2008];
set[int]: {4923761}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Relation-TransitiveClosure">Relation TransitiveClosure</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Transitive closure on binary relation values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em> +</code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp</em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp</em> +</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rel[<em>T<sub>1</sub></em>, <em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rel[<em>T<sub>1</sub></em>, <em>T<sub>2</sub></em>]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Returns the transitive closure of a binary relation.
Transitive closure is defined by repeated composition of a relation.
If we define for a given relation R:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>R<sup>1</sup> = R</p>
</li>
<li>
<p>R<sup>2</sup> = R o R</p>
</li>
<li>
<p>R<sup>3</sup> = R o R<sup>2</sup></p>
</li>
<li>
<p>&#8230;&#8203;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>then the transitive closure R+ can be defined as</p>
</div>
<div class="ulist">
<ul>
<li>
<p>R+ = R<sup>1</sup> + R<sup>2</sup> + R<sup>3</sup> + &#8230;&#8203;</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;{&lt;1,2&gt;, &lt;2,3&gt;, &lt;3,4&gt;}+;
rel[int,int]: {
  &lt;2,4&gt;,
  &lt;3,4&gt;,
  &lt;1,4&gt;,
  &lt;1,3&gt;,
  &lt;1,2&gt;,
  &lt;2,3&gt;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can also simply (but not necessarily efficiently) define transitive closure ourselves:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;rel[int,int] tclosure(rel[int,int] R) {
&gt;&gt;&gt;&gt;&gt;&gt;&gt;   tc = R;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;   while(true){
&gt;&gt;&gt;&gt;&gt;&gt;&gt;      tc1 = tc;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;      tc += tc o R;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;      if(tc1 == tc)
&gt;&gt;&gt;&gt;&gt;&gt;&gt;         return tc;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;   }
&gt;&gt;&gt;&gt;&gt;&gt;&gt;}
ok
rascal&gt;//tclosure({&lt;1,2&gt;, &lt;2,3&gt;, &lt;3,4&gt;});</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Values-Set">6.1.15. Set</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Set values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>{ <em>Exp</em><sub>1</sub>, <em>Exp<sub>2</sub></em>, &#8230;&#8203; }</code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top">&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top"><code>{ <em>Exp<sub>1</sub></em>, <em>Exp<sub>2</sub></em>, &#8230;&#8203; }</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>T<sub>1</sub></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>T<sub>2</sub></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">set[ lub(<em>T<sub>1</sub></em>, <em>T<sub>2</sub></em>, &#8230;&#8203; ) ]</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>A set is an unordered sequence of values and has the following properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>All elements have the same static type.</p>
</li>
<li>
<p>The order of the elements does not matter.</p>
</li>
<li>
<p>A set contains an element only once. In other words, duplicate elements are eliminated and no
matter how many times an element is added to a set, it will occur in it only once.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The type of a set has the form <code>set[<em>T</em>]</code>,
where <code><em>T</em></code> is an arbitrary type.</p>
</div>
<div class="paragraph">
<p>When a value or variable of type set occurs inside a set, that set value is inserted as set element.
To achieve splicing of these elements, i.e., the insertion of the elements of the set value rather than the whole set,
it has to be prefixed by the splice operator <code>*</code>.</p>
</div>
<div class="paragraph">
<p>The following operators are provided on sets:</p>
</div>
<div class="paragraph">
<p>There are also <a href="../Libraries/Libraries.html#Prelude-Set">library functions</a> available for Sets.
.Examples
##  Set types</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;{1, 2, 3};
set[int]: {1,3,2}
rascal&gt;{&lt;1,10&gt;, &lt;2,20&gt;, &lt;3,30&gt;};
rel[int,int]: {
  &lt;1,10&gt;,
  &lt;2,20&gt;,
  &lt;3,30&gt;
}
rascal&gt;{1, "b", 3};
set[value]: {"b",1,3}
rascal&gt;{&lt;"a", 10&gt;, &lt;"b", 20&gt;, &lt;"c", 30&gt;}
rel[str,int]: {
  &lt;"b",20&gt;,
  &lt;"a",10&gt;,
  &lt;"c",30&gt;
}
rascal&gt;{{"a", "b"}, {"c", "d", "e"}}
set[set[str]]: {
  {"a","b"},
  {"c","d","e"}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{1, 2, 3}</code> and <code>{3, 2, 1}</code> are identical sets (since order is not relevant).</p>
</li>
<li>
<p><code>{1, 2, 3}</code> and <code>{1, 2, 3, 1}</code> are also identical sets (since duplication is not relevant).</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_set_splicing">Set splicing</h5>
<div class="paragraph">
<p>Introduce a set variable <code>S</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;S = {1, 2, 3};
set[int]: {1,3,2}</code></pre>
</div>
</div>
<div class="paragraph">
<p>and observe how the value of <code>S</code> is added as single element in another set:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;{10, S, 20};
set[value]: {10,20,{1,3,2}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>or how its elements are added as elements to the other set:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;{10, *S, 20};
set[int]: {10,1,3,20,2}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Set-Comprehension">Set Comprehension</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>A set comprehension generates a set value.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>{ <em>Exp</em><sub>1</sub>, <em>Exp</em><sub>2</sub>, &#8230;&#8203; | <em>Gen</em><sub>1</sub>, <em>Gen</em><sub>2</sub>, &#8230;&#8203; }</code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 20%;">
<col style="width: 30%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top">&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top"><code>{ <em>Exp<sub>1</sub></em>, <em>Exp<sub>2</sub></em>, &#8230;&#8203; | <em>Gen<sub>1</sub></em>, <em>Gen<sub>2</sub></em>, &#8230;&#8203; }</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>1</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>2</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[ lub( <em>T<sub>1</sub></em>, <em>T<sub>2</sub></em>, &#8230;&#8203; ) ]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>A set comprehension consists of a number of contributing expressions <em>Exp</em><sub>1</sub>, <em>Exp</em><sub>2</sub>, &#8230;&#8203; and a number of
generators <em>Gen</em><sub>1</sub>, <em>Gen</em><sub>2</sub>, <em>Gen</em><sub>3</sub>, &#8230;&#8203; that are evaluated as described in <a href="#Expressions-Comprehensions">Comprehensions</a>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;{ N * N | int N &lt;- [0 .. 10]};
set[int]: {16,64,1,9,81,4,0,49,36,25}
rascal&gt;{ N * N | int N &lt;- [0 .. 10], N % 3 == 0};
set[int]: {9,81,0,36}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Set-Difference">Set Difference</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>The difference between two sets.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> - <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> - <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[<em>T<sub>1</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[<em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[lub(<em>T<sub>1</sub></em>,<em>T<sub>2</sub></em>)]</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[<em>T<sub>1</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>2</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[lub(<em>T<sub>1</sub></em>,<em>T<sub>2</sub></em>)]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>If both <em>Exp</em><sub>1</sub> and <em>Exp</em><sub>2</sub> have a set as value, the result is the difference of these two set values.
If <em>Exp</em><sub>2</sub> does not have a set as value, it is first converted to a set before the difference is computed.
The difference is computed by removing all elements of the second set from the first set.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;{1, 2, 3, 4} - {1, 2, 3};
set[int]: {4}
rascal&gt;{1, 2, 3, 4} - {3};
set[int]: {1,2,4}
rascal&gt;{1, 2, 3, 4} - 3;
set[int]: {1,2,4}
rascal&gt;{1, 2, 3, 4} - {5, 6, 7};
set[int]: {1,3,2,4}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Set-Equal">Set Equal</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Equal operator on set values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> == <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> == <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[<em>T<sub>1</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[<em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if both arguments are equal sets and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;{1, 2, 3} == {3, 2, 1};
bool: true
rascal&gt;{1, 2, 3} == {1, 2};
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Set-Insert">Set Insert</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Add an element to a set.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> + <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> + <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[<em>T<sub>1</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>2</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[lub(<em>T<sub>1</sub></em>,<em>T<sub>2</sub></em>)]</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>1</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[<em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[lub(<em>T<sub>1</sub></em>,<em>T<sub>2</sub></em>)]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>The <code>+</code> operator will add elements to sets.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;{1, 2, 3} + 4;
set[int]: {1,3,2,4}
rascal&gt;1 + { 2, 3, 4};
set[int]: {1,3,2,4}
rascal&gt;{1} + 1;
set[int]: {1}
rascal&gt;1 + {1};
set[int]: {1}</code></pre>
</div>
</div>
<div class="ulist">
<div class="title">Pitfalls</div>
<ul>
<li>
<p>if both operands of <code>+</code> are a set then it acts as <a href="#Set-Union">Set Union</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="Set-Intersection">Set Intersection</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Intersection of two sets.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &amp; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &amp; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[<em>T<sub>1</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[<em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[lub(<em>T<sub>1</sub></em>,<em>T<sub>2</sub></em>)]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Returns the intersection of the two set values of <em>Exp</em><sub>1</sub> and <em>Exp</em><sub>2</sub>.
The intersection consists of the common elements of both sets.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;{1, 2, 3, 4, 5} &amp; {4, 5, 6};
set[int]: {5,4}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Set-NotEqual">Set NotEqual</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Not equal operator on set values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> != <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> != <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[<em>T<sub>1</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[<em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if both arguments are unequal sets and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;{1, 2, 3} != {3, 2, 1};
bool: false
rascal&gt;{1, 2, 3} != {1, 2};
bool: true</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Set-Product">Set Product</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>The product of two set values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> * <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> * <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[<em>T<sub>1</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[<em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rel[<em>T<sub>1</sub></em>,<em>T<sub>2</sub></em>]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields a relation resulting from the product of the values of <em>Exp</em><sub>1</sub> and <em>Exp</em><sub>2</sub>. It contains a tuple for each combination of values from both arguments.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;{1, 2, 3} * {4, 5, 6};
rel[int,int]: {
  &lt;2,6&gt;,
  &lt;1,6&gt;,
  &lt;3,6&gt;,
  &lt;2,4&gt;,
  &lt;2,5&gt;,
  &lt;3,5&gt;,
  &lt;3,4&gt;,
  &lt;1,5&gt;,
  &lt;1,4&gt;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A card deck can be created as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;{"clubs", "hearts", "diamonds", "spades"} * {1,2,3,4,5,6,7,8,9,10,11,12,13};
rel[str,int]: {
  &lt;"clubs",13&gt;,
  &lt;"clubs",6&gt;,
  &lt;"hearts",7&gt;,
  &lt;"spades",7&gt;,
  &lt;"hearts",13&gt;,
  &lt;"spades",2&gt;,
  &lt;"hearts",2&gt;,
  &lt;"clubs",7&gt;,
  &lt;"diamonds",7&gt;,
  &lt;"hearts",12&gt;,
  &lt;"clubs",8&gt;,
  &lt;"clubs",10&gt;,
  &lt;"diamonds",13&gt;,
  &lt;"spades",12&gt;,
  &lt;"diamonds",8&gt;,
  &lt;"diamonds",10&gt;,
  &lt;"diamonds",11&gt;,
  &lt;"spades",4&gt;,
  &lt;"spades",5&gt;,
  &lt;"diamonds",1&gt;,
  &lt;"hearts",5&gt;,
  &lt;"hearts",4&gt;,
  &lt;"diamonds",6&gt;,
  &lt;"clubs",11&gt;,
  &lt;"clubs",1&gt;,
  &lt;"clubs",9&gt;,
  &lt;"diamonds",2&gt;,
  &lt;"clubs",3&gt;,
  &lt;"diamonds",9&gt;,
  &lt;"diamonds",3&gt;,
  &lt;"clubs",2&gt;,
  &lt;"clubs",12&gt;,
  &lt;"hearts",8&gt;,
  &lt;"hearts",10&gt;,
  &lt;"spades",8&gt;,
  &lt;"spades",10&gt;,
  &lt;"diamonds",12&gt;,
  &lt;"spades",13&gt;,
  &lt;"diamonds",5&gt;,
  &lt;"hearts",6&gt;,
  &lt;"spades",1&gt;,
  &lt;"diamonds",4&gt;,
  &lt;"spades",11&gt;,
  &lt;"clubs",5&gt;,
  &lt;"clubs",4&gt;,
  &lt;"spades",6&gt;,
  &lt;"hearts",11&gt;,
  &lt;"hearts",1&gt;,
  &lt;"hearts",3&gt;,
  &lt;"hearts",9&gt;,
  &lt;"spades",9&gt;,
  &lt;"spades",3&gt;
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Set-Splice">Set Splice</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Splice the elements of a set in an enclosing set.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp</em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>n</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code>{<em>Exp<sub>1</sub></em>, &#8230;&#8203;, <em>Exp</em>, &#8230;&#8203;, <em>Exp<sub>n</sub></em>}</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>1</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>n</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[lub(<em>T<sub>1</sub></em>, &#8230;&#8203;, <em>T</em>, &#8230;&#8203;,<em>T<sub>n</sub></em>)]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>The operator <code>*</code> splices the elements of a set in an enclosing set.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Consider the following set in which the set <code>{10, 20, 30]</code> occurs as set element. It has as type <code>set[value]</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;{1, 2, {10, 20, 30}, 3, 4};
set[value]: {3,2,4,1,{10,20,30}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The effect of splicing the same set element in the enclosing set gives a flat list of type <code>set[int]</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;{1, 2, *{10, 20, 30}, 3, 4};
set[int]: {10,1,3,20,2,4,30}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The same example can be written as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;S = {10, 20, 30};
set[int]: {10,20,30}
rascal&gt;{1, 2, *S, 3, 4};
set[int]: {10,1,3,20,2,4,30}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Set-StrictSubSet">Set StrictSubSet</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Strict subset operator on set values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &lt; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &lt; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[<em>T<sub>1</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[<em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the value of <em>Exp</em><sub>1</sub> is a strict subset of the value of <em>Exp</em><sub>2</sub>,  and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;{1, 2, 3} &lt; {1, 2, 3, 4};
bool: true
rascal&gt;{1, 2, 3} &lt; {1, 3, 4};
bool: false
rascal&gt;{1, 2, 3} &lt; {1, 2, 3};
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Set-StrictSuperSet">Set StrictSuperSet</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Strict superset operator on set values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &gt; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &gt; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[<em>T<sub>1</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[<em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the value of <em>Exp</em><sub>1</sub> is a strict superset of the value of <em>Exp</em><sub>2</sub>, and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;{1, 2, 3, 4} &gt; {3, 2, 1};
bool: true
rascal&gt;{1, 2, 3, 4} &gt; {4, 3, 2, 1};
bool: true</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Set-SubSet">Set SubSet</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Subset operator on set values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &#8656; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &#8656; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[<em>T<sub>1</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[<em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the value of <em>SetExp</em><sub>1</sub> is a subset of the value of <em>SetExp</em><sub>2</sub>, and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;{1, 2, 3} &lt;= {1, 2, 3, 4};
bool: true
rascal&gt;{1, 2, 3} &lt;= {1, 2, 3};
bool: true</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Set-SuperSet">Set SuperSet</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Superset operator on set values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &gt;= <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &gt;= <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[<em>T<sub>1</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[<em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the value of <em>Exp</em><sub>1</sub> is a superset of the value of <em>Exp</em><sub>2</sub> and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;{1, 2, 3, 4} &gt;= {3, 2, 1};
bool: true
rascal&gt;{1, 2, 3, 4} &gt;= {4, 3, 2, 1};
bool: true</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Set-Union">Set Union</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Union of two set values.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> + <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[<em>T<sub>1</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[<em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[lub(<em>T<sub>1</sub></em>,<em>T<sub>2</sub></em>)]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>The <code>+</code> operator computes set union if both operands are sets. If one of the operands is not a set, it acts as <a href="#Set-Insert">Set Insert</a> instead.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;{1, 2, 3} + {4, 5, 6};
set[int]: {5,1,3,2,4,6}
rascal&gt;{1,2,3} + {2,3,4};
set[int]: {1,3,2,4}
rascal&gt;{1, 2, 3} + {3};
set[int]: {1,3,2}
rascal&gt;{2} + { 2, 3, 4};
set[int]: {3,2,4}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Set-in">Set in</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Membership test on set values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> in <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> in <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>1</sub></em></code>  &lt;: <code><em>T<sub>2</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[<em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the value of <em>Exp</em><sub>1</sub> occurs as element in the value of <em>Exp</em><sub>2</sub> and <code>false</code> otherwise. The type of <em>Exp</em><sub>1</sub> should be compatible with the element type of <em>Exp</em><sub>2</sub>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;2 in {1, 2, 3};
bool: true
rascal&gt;4 in {1, 2, 3};
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Set-notin">Set notin</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Negated membership test on set values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> notin <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> notin <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>1</sub></em></code>  &lt;: <code><em>T<sub>2</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set[<em>T<sub>2</sub></em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the value of <em>Exp</em><sub>1</sub> does not occur as element in the value of <em>Exp</em><sub>2</sub> and <code>false</code> otherwise. The type of <em>Exp</em><sub>1</sub> should be compatible with the element type of <em>Exp</em><sub>2</sub>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;4 notin {1, 2, 3};
bool: true
rascal&gt;4 notin {1, 2, 3, 4};
bool: false</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Values-String">6.1.16. String</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>String values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>"<em>StringChar</em><sub>1</sub><em>StringChar</em><sub>2</sub>&#8230;&#8203;"</code>
where `<em>StringChar<sub>i</sub></em> may be one of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Ordinary character</em>: Any character except <code>&lt;</code>, <code>&gt;</code>, <code>"</code>, <code>'</code> or <code>\</code>.</p>
</li>
<li>
<p><em>Escaped character</em>: Backslash <code>\</code> followed by any of  <code>&lt;</code>, <code>&gt;</code>, <code>"</code>, <code>'</code> or <code>\</code> represents the escaped character itself.
Other escape sequences that are supported are:</p>
<div class="ulist">
<ul>
<li>
<p><code>\n</code>: newline</p>
</li>
<li>
<p><code>\t</code>: tab</p>
</li>
<li>
<p><code>\r</code>: carriage return</p>
</li>
<li>
<p><code>\b</code>: backspace</p>
</li>
<li>
<p><code>\f</code>: vertical feed</p>
</li>
<li>
<p><code>\u <em>hexDigit<sub>1</sub></em> <em>hexDigit<sub>2</sub></em> <em>hexDigit<sub>3</sub></em> <em>hexDigit<sub>4</sub></em></code> : hexadecimal escapes with four digit indexes into UNICODE.</p>
</li>
<li>
<p><code>\U <em>hexDigit<sub>1</sub></em> <em>hexDigit<sub>2</sub></em> <em>hexDigit<sub>3</sub></em> <em>hexDigit<sub>4</sub></em> <em>hexDigit<sub>5</sub></em> <em>hexDigit<sub>6</sub></em></code> : hexadecimal escapes with six digit indexes into UNICODE.</p>
</li>
<li>
<p><code>\ a_hexDigit<sub>1</sub>_ <em>hexDigit<sub>2</sub></em></code>:  hexadecimal escapes with 2 digit indexes into ASCII (0x0 &#8230;&#8203; 0x7F).</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>String Interpolation</em>:</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Form</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;_Exp_&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interpolate the value of the expression as a string</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;if(<em>Exp</em>){&gt; &#8230;&#8203; <em>StringChars</em> &#8230;&#8203; &lt;}&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditional inclusion of <em>Text</em>, where <em>StringChars</em> may use variables introduced in <em>Exp</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;if(<em>Exp</em>){&gt; &#8230;&#8203; <em>StringChars<sub>1</sub></em> &#8230;&#8203; &lt;} else {&gt;  &#8230;&#8203; <em>StringChars<sub>2</sub></em> &#8230;&#8203; &lt;}&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditional inclusion of either <em>StringChars<sub>1</sub></em> or <em>StringChars<sub>2</sub></em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;for(<em>Exp</em>){&gt;&#8230;&#8203; <em>StringChars</em> &#8230;&#8203; &lt;}&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Iterative splicing of <em>StringChars</em> into the result, where <em>StringChars</em> may use variables introduced in <em>Exp</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;while(<em>Exp</em>){&gt; &#8230;&#8203; <em>StringChars</em> &#8230;&#8203; &lt;}&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Iterative splicing of <em>StringChars</em> into the result, where <em>StringChars</em> may use variables introduced in <em>Exp</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;do {&gt;&#8230;&#8203; <em>StringChars</em> &#8230;&#8203; &lt;} while (<em>Exp</em>)&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Iterative splicing of <em>StringChars</em> into the result, where <em>StringChars</em> may use variables introduced in <em>Exp</em>.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p><em>Multiline</em>:</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Form</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">`<em>StringChars<sub>1</sub></em>\n <em>StringChars<sub>2</sub></em> `</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Strings can be multi-line without an escape or continuation marker</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>StringChars<sub>2</sub></em>\n '  <em>StringChars<sub>2</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A margin character <code>'</code> indicates where the next line starts</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Types</div>
<p><code>str</code></p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>The string values are represented by the type <code>str</code> and consist of character
sequences surrounded by double quotes, e.g., <code>"a"</code> or <code>"a\nlong\nstring"</code>.</p>
</div>
<div class="paragraph">
<p><em>Multiline</em>: Strings may span more than one line. The margin character <code>'</code> indicates which part of a line will be ignored. This is useful for indenting a multi-line string with the source code that generates it.</p>
</div>
<div class="paragraph">
<p><em>Interpolation</em>:  String literals support so-called <em>string interpolation</em>:
inside string constants text between angle brackets (<code>&lt;</code> and <code>&gt;</code>) is first executed and then replaced by
 its string value.
Various statements (if, for, while, do) also return a value and can be used in this way.
In the interpolation variant of these statements the block or blocks that are part of the statement become arbitrary text
(that may itself contain interpolations).</p>
</div>
<div class="paragraph">
<p><em>Auto-indent</em>: Expressions that get interpolated in a string will be auto-indented. This means that each line that results from the evaluation of the expression is prefixed with the indentation level of the position of the expression in the current string.</p>
</div>
<div class="paragraph">
<p>The following operators are defined for Strings:</p>
</div>
<div class="paragraph">
<p>There are also <a href="../Libraries/Libraries.html#Prelude-String">library functions</a> available for Strings.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;N = 13;
int: 13
rascal&gt;"The value of N is &lt;N&gt;";
str: "The value of N is 13"
rascal&gt;"The value of N*N is &lt;N*N&gt;";
str: "The value of N*N is 169"
rascal&gt;"The value is &lt;(N &lt; 10) ? 10 : N*N&gt;";
str: "The value is 169"</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see the string value of variables and expressions is interpolated in the result as expected.
&lt;br&gt;
Some examples of more advances string interpolation</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;"N is &lt;if(N &lt; 10){&gt; small &lt;} else {&gt; large &lt;}&gt;";
str: "N is  large "
rascal&gt;"N is &lt;if(N &lt; 10){&gt; small &lt;} else {&gt; large (&lt;N&gt;)&lt;}&gt;";
str: "N is  large (13)"
rascal&gt;"before &lt;for(x&lt;-[1..5]){&gt;a &lt;x&gt; b &lt;}&gt;after";
str: "before a 1 b a 2 b a 3 b a 4 b after"</code></pre>
</div>
</div>
<div class="paragraph">
<p>multi-line string</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import IO;
ok
rascal&gt;println("hello
&gt;&gt;&gt;&gt;&gt;&gt;&gt;this
&gt;&gt;&gt;&gt;&gt;&gt;&gt;  is
&gt;&gt;&gt;&gt;&gt;&gt;&gt;    new")
hello
this
  is
    new
ok</code></pre>
</div>
</div>
<div class="paragraph">
<p>multi-line string with margin:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;if (true)
&gt;&gt;&gt;&gt;&gt;&gt;&gt;  println("this is
&gt;&gt;&gt;&gt;&gt;&gt;&gt;          'what
&gt;&gt;&gt;&gt;&gt;&gt;&gt;          '  margins
&gt;&gt;&gt;&gt;&gt;&gt;&gt;          'are good for
&gt;&gt;&gt;&gt;&gt;&gt;&gt;          ");
this is
what
  margins
are good for

ok</code></pre>
</div>
</div>
<div class="paragraph">
<p>auto indent:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;str genMethod(str n) = "int &lt;n&gt;() {
&gt;&gt;&gt;&gt;&gt;&gt;&gt;                       '  return 0;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;                       '}";
ok
rascal&gt;str genClass() = "class myClass {
&gt;&gt;&gt;&gt;&gt;&gt;&gt;                 '  &lt;genMethod("myMethod")&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;                 '}";
ok
rascal&gt;println(genClass());
class myClass {
  int myMethod() {
    return 0;
  }
}
ok</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Benefits</div>
<p>String interpolation enables very flexible template-based text generation as used in generators for
source code, markup and the like.</p>
</div>
<div class="sect4">
<h5 id="String-Concatenation">String Concatenation</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Concatenate two strings.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> + <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> + <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>str</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>str</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>str</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Concatenates the string values of <em>Exp</em><sub>1</sub> and <em>Exp</em><sub>2</sub>.</p>
</div>
<div class="paragraph">
<p>Note that to concatenate other types of values into a string, you can use <a href="#Values-String">String</a> interpolation.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;"abc" + "def";
str: "abcdef"</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="String-Equal">String Equal</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Equality operator on string values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> == <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> == <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>str</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>str</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if both arguments are identical and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;"abc" == "abc";
bool: true
rascal&gt;"abc" == "defghi";
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="String-GreaterThan">String GreaterThan</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Greater than operator on string values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &gt; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &gt; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>str</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>str</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the string value of <em>Exp</em><sub>1</sub> is strictly lexicographically greater
than the string value of <em>Exp</em><sub>2</sub>, and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;"abcdef" &gt; "abc";
bool: true
rascal&gt;"defghi" &gt; "abcdef";
bool: true
rascal&gt;"a" &gt; "abc";
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="String-GreaterThanOrEqual">String GreaterThanOrEqual</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Greater than or equal operator on string values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &gt;= <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &gt;= <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>str</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>str</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the string value of <em>Exp</em><sub>1</sub> is lexicographically greater
than the string value of <em>Exp</em><sub>2</sub> or if both strings are equal, and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;"abc" &gt;= "abc";
bool: true
rascal&gt;"abcdef" &gt;= "abc";
bool: true
rascal&gt;"defghi" &gt;= "abcdef";
bool: true
rascal&gt;"a" &gt;= "abc";
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="String-LessThan">String LessThan</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Less than operator on string values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &lt; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &lt; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>str</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>str</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the string value of <em>Exp</em><sub>1</sub> is strictly lexicographically less
than the string value of <em>Exp</em><sub>2</sub>, and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;"abc" &lt; "abcdef";
bool: true
rascal&gt;"abc" &lt; "defghi";
bool: true
rascal&gt;"abc" &lt; "a";
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="String-LessThanOrEqual">String LessThanOrEqual</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Less than or equal operator on string values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &#8656; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &#8656; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>str</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>str</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if the string value of <em>Exp</em><sub>1</sub> is lexicographically less
than the string value of <em>Exp</em><sub>2</sub> or if both string are equal, and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;"abc" &lt;= "abc";
bool: true
rascal&gt;"abc" &lt;= "abcdef";
bool: true
rascal&gt;"abc" &lt;= "defghi";
bool: true
rascal&gt;"abc" &lt;= "a";
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="String-NotEqual">String NotEqual</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Not equal operator on string values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> != <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> != <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>str</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>str</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if both arguments are not identical and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;"abc" != "defghi";
bool: true
rascal&gt;"abc" != "abc";
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="String-Slice">String Slice</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Retrieve a slice of a string.</p>
</div>
</div>
<div class="sect4">
<h5 id="__code_em_exp_sub_1_sub_em_em_exp_sub_2_sub_em_em_exp_sub_4_sub_em_code"><code><em>Exp<sub>1</sub></em> [ <em>Exp<sub>2</sub></em> .. <em>Exp<sub>4</sub></em>]</code></h5>

</div>
<div class="sect4">
<h5 id="__code_em_exp_sub_1_sub_em_em_exp_sub_2_sub_em_em_exp3_em_em_exp_sub_4_sub_em_code"><code><em>Exp<sub>1</sub></em> [ <em>Exp<sub>2</sub></em> , <em>Exp3</em> .. <em>Exp<sub>4</sub></em>]</code></h5>
<div class="paragraph">
<div class="title">Syntax</div>
<p>where <em>Exp</em><sub>2</sub> and <em>Exp</em><sub>4</sub> are optional.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 15%;">
<col style="width: 15%;">
<col style="width: 15%;">
<col style="width: 15%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>3</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>4</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> [ <em>Exp<sub>2</sub></em> .. <em>Exp<sub>4</sub></em> ]</code>   or  <code><em>Exp<sub>1</sub></em> [ <em>Exp<sub>2</sub></em> , <em>Exp<sub>3</sub></em> .. <em>Exp<sub>4</sub></em>]</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>str</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>str</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>A String slice is similar to a list <a href="#List-Slice">List Slice</a> and uses the integer values of <em>Exp</em><sub>2</sub> and <em>Exp</em><sub>4</sub> to determine the <code>begin</code> (<strong>inclusive</strong>) and <code>end</code> (<strong>exclusive</strong>)
of a slice from the string value <em>S</em> of <em>Exp</em><sub>1</sub>. Negative indices count from the end of the string backwards.
Using the second form, an extra index <em>Exp</em><sub>3</sub> is given that determines the
index of the second element in the slice and establishes the <code>step</code> between
successive elements in the slice. The default <code>step</code> is 1.
If <code>end</code> is smaller than <code>begin</code>, the slice is constructed backwards.</p>
</div>
<div class="paragraph">
<p>Let <code>Len</code> be the length of <em>S</em> and let <em>N</em><sub>2</sub>, <em>N</em><sub>3</sub> and <em>N</em><sub>4</sub> be the respective values of the expressions
 <em>Exp</em><sub>2</sub>, <em>Exp</em><sub>2</sub> and <em>Exp</em><sub>2</sub> when they are present.</p>
</div>
<div class="paragraph">
<p>The slice parameters <code>begin</code>, <code>end</code>, and <code>step</code> are determined as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Exp<sub>2</sub></em>:</p>
<div class="ulist">
<ul>
<li>
<p>If <em>Exp<sub>2</sub></em> is absent, then <code>begin = 0</code>.</p>
</li>
<li>
<p>Otherwise, if <em>N<sub>2</sub></em> &gt;= 0 then <code>begin = <em>N<sub>2</sub></em></code> else <code>begin = <em>N<sub>2</sub></em> + <em>Len</em></code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>Exp<sub>4</sub></em>:</p>
<div class="ulist">
<ul>
<li>
<p>If <em>Exp<sub>4</sub></em> is absent, then <code>end = <em>Len</em></code>.</p>
</li>
<li>
<p>Otherwise, if <em>N<sub>4</sub></em> &gt;= 0, then <code>end = <em>N<sub>4</sub></em></code> else <code>end = <em>N<sub>4</sub></em> + <em>Len</em></code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>Exp<sub>3</sub></em>:</p>
<div class="ulist">
<ul>
<li>
<p>If <em>Exp<sub>3</sub></em> is absent, then if <code>begin &lt; end</code> then <code>step = 1</code> else <code>step = -1</code>.</p>
</li>
<li>
<p>Otherwise, if <code>begin &lt; end</code>, then <code>step = <em>N<sub>3</sub></em> - begin</code> else <code>step = begin - <em>N<sub>3</sub></em></code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now, the constraints <code>0 &#8656; begin &lt; Len</code> and <code>0 &lt; end &lt; Len</code> should hold,
otherwise the exception <code>IndexOutOfBounds</code> is thrown.</p>
</div>
<div class="paragraph">
<p>The slice consists of the elements <code>S[begin]</code>, <code>S[begin+step]</code>, <code>S[end - step]</code>.
When <code>begin &gt;= end</code>, the elements are listed in reverse order.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Consider the string <code>S = "abcdefghi";</code> (with size 9) as running example.</p>
</div>
<div class="paragraph">
<p>Here is a view on <em>L</em> that will help to correlate positive and negative indices:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>i</em></code></th>
<th class="tableblock halign-left valign-top">0</th>
<th class="tableblock halign-left valign-top">1</th>
<th class="tableblock halign-left valign-top">2</th>
<th class="tableblock halign-left valign-top">3</th>
<th class="tableblock halign-left valign-top">4</th>
<th class="tableblock halign-left valign-top">5</th>
<th class="tableblock halign-left valign-top">6</th>
<th class="tableblock halign-left valign-top">7</th>
<th class="tableblock halign-left valign-top">8</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>S[<em>i</em>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"a"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"b"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"c"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"d"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"e"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"f"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"g"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"h"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"i"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-<em>i</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-1</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Some common use cases (with <code>begin</code> &#8656; <code>end</code>):</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Slice</th>
<th class="tableblock halign-left valign-top">Means:</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>S[begin..end]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">characters with indices <code>begin</code> through <code>end-1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>S[begin..]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">characters with indices <code>begin</code> through the rest of the string</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>S[..end]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">characters with indices from the beginning through <code>end-1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>S[..]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the whole list</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>S[-1]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">last element of the string</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>S[-2..]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the last two characters of the string</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>S[..-2]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">all characters except the last two.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Let&#8217;s put this into practice now.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;S = "abcdefghi";
str: "abcdefghi"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Slices with begin &lt; end</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;S[1..3];
str: "bc"
rascal&gt;S[1..];       // empty end =&gt; end of string
str: "bcdefghi"
rascal&gt;S[..3];       // empty begin =&gt; first character of string
str: "abc"
rascal&gt;S[..];        // both empty =&gt; whole string
str: "abcdefghi"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Slices with  begin &gt;= end</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;S[3..1];      // slice contains characters with indices 3 and 2 (in that order)
str: "dc"
rascal&gt;S[3..3];      // empty slice when begin == end
str: ""</code></pre>
</div>
</div>
<div class="paragraph">
<p>Slices with negative begin or end:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;S[2..-2];     // equivalent to S[2..7]
str: "cdefg"
rascal&gt;S[2..7];
str: "cdefg"
rascal&gt;S[-4..-2];    // equivalent to S[5..7]
str: "fg"
rascal&gt;S[5..7];
str: "fg"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Slices with an explicit second index:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;S[1,3..6];
str: "bdf"
rascal&gt;S[5,3..];
str: "fdb"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Explore error cases:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;S[..10];
str: "abcdefghi"
rascal&gt;S[1..20];
str: "bcdefghi"</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="String-Subscription">String Subscription</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Retrieve a substring via its index.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> [ <em>Exp</em><sub>2</sub> ]</code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> [ <em>Exp<sub>2</sub></em> ]</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>str</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>str</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>String subscription uses the integer value of <em>Exp</em><sub>2</sub> as index in the string value of <em>Exp</em><sub>1</sub>.
The value of <em>Exp</em><sub>2</sub> should be greater or equal 0 and less than the number of characters in the string.
If this is not the case, the exception <code>IndexOutOfBounds</code> is thrown.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Introduce a string, assign it to S and retrieve the element with index 1:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;S = "abc";
str: "abc"
rascal&gt;S[1];
str: "b"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Explore an error case:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;S[5];
IndexOutOfBounds(5) at |test-modules:///ConsoleInput.rsc|(43,4,&lt;4,15&gt;,&lt;4,19&gt;)
Call stack (most recent first):
	main([]) at |test-modules:///ConsoleInput.rsc|(43,4,&lt;4,15&gt;,&lt;4,19&gt;)

ok</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Values-Tuple">6.1.17. Tuple</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Tuple values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>&lt; <em>Exp</em><sub>1</sub>, <em>Exp</em><sub>2</sub>, &#8230;&#8203; &gt;</code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top">&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top"><code>&lt; <em>Exp<sub>1</sub></em>, <em>Exp<sub>2</sub></em>, &#8230;&#8203; &gt;</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>1</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>T<sub>2</sub></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tuple[<em>T<sub>1</sub></em>, <em>T<sub>2</sub></em>, &#8230;&#8203; ]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>A tuple is a sequence of elements with the following properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Each element in a tuple (may) have a different type.</p>
</li>
<li>
<p>Each element of a tuple may have a label that can be used to select that element of the tuple.</p>
</li>
<li>
<p>Each tuple is fixed-width, i.e., has the same number of elements.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Tuples are represented by the type <code>tuple[<em>T</em><sub>1</sub> <em>L</em><sub>1</sub>, <em>T</em><sub>2</sub> <em>L</em><sub>2</sub>, &#8230;&#8203;]</code>,
where <em>T</em><sub>1</sub>, <em>T</em><sub>2</sub>, &#8230;&#8203; are arbitrary types and <em>L</em><sub>1</sub>, <em>L</em><sub>2</sub>, &#8230;&#8203; are optional labels.</p>
</div>
<div class="paragraph">
<p>The following operators are provided for tuples:</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;tuple[str first, str last, int age] P = &lt;"Jo","Jones",35&gt;;
tuple[str,str,int]: &lt;"Jo","Jones",35&gt;
rascal&gt;P.first;
str: "Jo"
rascal&gt;P.first = "Bo";
tuple[str,str,int]: &lt;"Bo","Jones",35&gt;</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="Tuple-Concatenation">Tuple Concatenation</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Concatenate two tuple values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> + <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp_2</em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &gt; <em>Exp_2</em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tuple[ <em>T<sub>11</sub></em>, <em>T<sub>12</sub></em>, &#8230;&#8203; ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tuple[ <em>T<sub>21</sub></em>, <em>T<sub>22</sub></em>, &#8230;&#8203; ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tuple[ <em>T<sub>11</sub></em>, <em>T<sub>12</sub></em>, &#8230;&#8203;, <em>T<sub>21</sub></em>, <em>T<sub>22</sub></em>, &#8230;&#8203; ]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Returns a tuple consisting of the concatenation of the tuple elements of <em>Exp</em><sub>1</sub> and <em>Exp</em><sub>2</sub>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;&lt;"abc", 1, 2.5&gt; + &lt;true, "def"&gt;;
tuple[str,int,real,bool,str]: &lt;"abc",1,2.5,true,"def"&gt;</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Tuple-Equal">Tuple Equal</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Equality operator on tuple values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> == <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> == <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tuple[ <em>T<sub>11</sub></em>, <em>T<sub>12</sub></em>, &#8230;&#8203; ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tuple[ <em>T<sub>21</sub></em>, <em>T<sub>22</sub></em>, &#8230;&#8203; ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if both tuples are identical and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;&lt;1, "abc", true&gt; == &lt;1, "abc", true&gt;;
bool: true</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Tuple-FieldSelection">Tuple FieldSelection</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Select a field from a tuple by its field name.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em> . <em>Name</em></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp</em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Name</em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp</em> . <em>Name</em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tuple[ <em>T<sub>1</sub></em> <em>L<sub>1</sub></em>, <em>T<sub>2</sub></em> <em>L<sub>2</sub></em>, &#8230;&#8203; ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>L<sub>i</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>i</sub></em></code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Field selection applies to tuples with named elements.
<em>Exp</em> should evaluate to a tuple with field <em>Name</em> and returns the value of that field.
<em>Name</em> stands for itself and is not evaluated.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;tuple[int key, str val] T = &lt;1, "abc"&gt;;
tuple[int,str]: &lt;1,"abc"&gt;
rascal&gt;T.val;
str: "abc"</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Tuple-GreaterThan">Tuple GreaterThan</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Greater than operator on tuple values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &gt; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &gt; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tuple[ <em>T<sub>11</sub></em>, <em>T<sub>12</sub></em>, &#8230;&#8203; ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tuple[ <em>T<sub>21</sub></em>, <em>T<sub>22</sub></em>, &#8230;&#8203; ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if</p>
</div>
<div class="ulist">
<ul>
<li>
<p>both tuples are not equal, and</p>
</li>
<li>
<p>the left-most element in the tuple value of <em>Exp<sub>1</sub></em> that differs from the corresponding element in the tuple
value of <em>Exp</em><sub>2</sub> is greater than that element in <em>Exp</em><sub>2</sub>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Otherwise the result if <code>false</code>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;&lt;1, "def", true&gt; &gt; &lt;1, "abc", true&gt;;
bool: true</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Tuple-GreaterThanOrEqual">Tuple GreaterThanOrEqual</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Greater than or equal operator on tuple values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &gt;= <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &gt;= <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tuple[ <em>T<sub>11</sub></em>, <em>T<sub>12</sub></em>, &#8230;&#8203; ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tuple[ <em>T<sub>21</sub></em>, <em>T<sub>22</sub></em>, &#8230;&#8203; ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if</p>
</div>
<div class="ulist">
<ul>
<li>
<p>both tuples are equal, or</p>
</li>
<li>
<p>the left-most element in the tuple value of <em>Exp<sub>1</sub></em> that differs from the corresponding element in the tuple
value of <em>Exp</em><sub>2</sub> is greater than that element in <em>Exp</em><sub>2</sub>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Otherwise the result if <code>false</code>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;&lt;1, "abc", true&gt; &gt; &lt;1, "abc", true&gt;;
bool: false
rascal&gt;&lt;1, "def", true&gt; &gt; &lt;1, "abc", true&gt;;
bool: true</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Tuple-LessThan">Tuple LessThan</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Less than operator on tuple values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &lt; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &lt; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tuple[ <em>T<sub>11</sub></em>, <em>T<sub>12</sub></em>, &#8230;&#8203; ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tuple[ <em>T<sub>21</sub></em>, <em>T<sub>22</sub></em>, &#8230;&#8203; ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if</p>
</div>
<div class="ulist">
<ul>
<li>
<p>both tuples are not equal, and</p>
</li>
<li>
<p>the left-most element in the tuple value of <em>Exp<sub>1</sub></em> that differs from the corresponding element in the tuple
value of <em>Exp</em><sub>2</sub> is less than that element in <em>Exp</em><sub>2</sub>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Otherwise the result if <code>false</code>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;&lt;1, "abc", true&gt; &lt; &lt;1, "def", true&gt;;
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Tuple-LessThanOrEqual">Tuple LessThanOrEqual</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Less than or equal operator on tuple values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &#8656; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &#8656; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tuple[ <em>T<sub>11</sub></em>, <em>T<sub>12</sub></em>, &#8230;&#8203; ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tuple[ <em>T<sub>21</sub></em>, <em>T<sub>22</sub></em>, &#8230;&#8203; ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if</p>
</div>
<div class="ulist">
<ul>
<li>
<p>both tuples are equal, or</p>
</li>
<li>
<p>the left-most element in the tuple value of <em>Exp<sub>1</sub></em> that differs from the corresponding element in the tuple
value of <em>Exp</em><sub>2</sub> is less than that element in <em>Exp</em><sub>2</sub>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Otherwise the result if <code>false</code>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;&lt;1, "abc", true&gt; &lt;= &lt;1, "abc", true&gt;;
bool: true
rascal&gt;&lt;1, "abc", true&gt; &lt;= &lt;1, "def", true&gt;;
bool: true</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Tuple-NotEqual">Tuple NotEqual</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Not equal operator on tuple values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> != <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> != <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tuple[ <em>T<sub>11</sub></em>, <em>T<sub>12</sub></em>, &#8230;&#8203; ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tuple[ <em>T<sub>21</sub></em>, <em>T<sub>22</sub></em>, &#8230;&#8203; ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if both tuples are not identical and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;&lt;1, "abc", true&gt; != &lt;1, "abc"&gt;;
[error] tuple[int, str, bool] and tuple[int, str] incomparable IN '&lt;1, "abc", true&gt; != &lt;1, "abc"&gt;'
rascal&gt;&lt;1, "abc", true&gt; != &lt;1, "abc", true&gt;;
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Tuple-Subscription">Tuple Subscription</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Retrieve a tuple field by its index position.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> [ <em>Exp</em><sub>2</sub> ]</code></p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Subscription retrieves the tuple element with index <em>Exp</em><sub>2</sub> from the tuple value of <em>Exp</em><sub>1</sub>.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Introduce a tuple, assign it to T and retrieve the element with index 0:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;T = &lt;"mon", 1&gt;;
tuple[str,int]: &lt;"mon",1&gt;
rascal&gt;T[0];
str: "mon"</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Values-Value">6.1.18. Value</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Values of type <code>value</code>.</p>
</div>
<div class="paragraph">
<div class="title">Types</div>
<p><code>value</code></p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Value stands for all possible Rascal values and is represented by the type <code>value</code>.
This type is a container for all other types and does not have any values itself.</p>
</div>
<div class="paragraph">
<p>The following operators are provided for values:</p>
</div>
<div class="sect4">
<h5 id="Value-Conditional">Value Conditional</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Conditional expression on values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> ? <em>Exp</em><sub>2</sub> : <em>Exp</em><sub>3</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>3</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> ? <em>Exp<sub>2</sub></em> : <em>Exp<sub>3</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>2</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>3</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lub(<em>T<sub>2</sub></em>,<em>T<sub>3</sub></em>)</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields the value of <em>Exp</em><sub>2</sub> if the value of <em>Exp</em><sub>1</sub> is <code>true</code> and the value of <em>Exp</em><sub>3</sub> otherwise.
The result type is the <em>least upper bound</em> (also known as <code>lub</code>, see <a href="#Declarations-StaticTyping">Static Typing</a>) of the types of <em>Exp</em><sub>2</sub> and <em>Exp</em><sub>3</sub>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;( 3 &gt; 2 ) ? 30 : 40;
int: 30
rascal&gt;( 3 &lt; 2 ) ? "abc" : {3, 4};
set[int]: {3,4}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Value-Equal">Value Equal</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Equal operator on values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> == <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> == <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if both arguments are identical and <code>false</code> otherwise.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell"></code></pre>
</div>
</div>
<div class="paragraph">
<p>Introduce two variables <code>X</code>, <code>Y</code> and <code>Z</code> and force them to be of type <code>value</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;value X = "abc";
str: "abc"
rascal&gt;value Y = "abc";
str: "abc"
rascal&gt;value Z = 3.14;
real: 3.14</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now compare <code>X</code> and <code>Y</code> for equality:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;X == Y;
bool: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>and <code>X</code> and <code>Z</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;X == Z;
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Value-GreaterThan">Value GreaterThan</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Greater than operator on values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &gt; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &gt; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>By brute force, a total less than operator between two values <em>V</em><sub>1</sub> and <em>V</em><sub>2</sub> of arbitrary types <em>T</em><sub>1</sub> and <em>T</em><sub>2</sub> is defined:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the types <em>T<sub>1</sub></em> and <em>T<sub>2</sub></em> can be compared then <em>V<sub>1</sub></em> less than <em>V<sub>2</sub></em> is used.</p>
</li>
<li>
<p>Otherwise values are ordered according their type name, for instance, <code>int</code> is smaller than <code>list</code>, and <code>map</code> is smaller than <code>rel</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Greater than yields <code>true</code> if the value of <em>Exp</em><sub>2</sub> is strictly less
than (according to the ordering defined above) the value of <em>Exp</em><sub>1</sub>, and <code>false</code> otherwise.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Introduce two variables <code>X</code>, <code>Y</code> and <code>Z</code> and force them to be of type <code>value</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;value X = "def";
str: "def"
rascal&gt;value Y = "abc";
str: "abc"
rascal&gt;value Z = 3.14;
real: 3.14</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now compare <code>X</code> and <code>Y</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;X &gt; Y;
bool: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>and <code>X</code> and <code>Z</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;X &gt; Z;
bool: true</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Value-GreaterThanOrEqual">Value GreaterThanOrEqual</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Greater than or equal operator on values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &gt;= <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &gt;= <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>By brute force, a total less than operator between two values <em>V</em><sub>1</sub> and <em>V</em><sub>2</sub> of arbitrary types <em>T</em><sub>1</sub> and <em>T</em><sub>2</sub> is defined:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the types <em>T<sub>1</sub></em> and <em>T<sub>2</sub></em> can be compared then <em>V<sub>1</sub></em> less than <em>V<sub>2</sub></em> is used.</p>
</li>
<li>
<p>Otherwise values are ordered according their type name, for instance, <code>int</code> is smaller than <code>list</code>, and <code>map</code> is smaller than <code>rel</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Greater than or equal yields <code>true</code> if the value of <em>Exp</em><sub>2</sub> is strictly less
than (according to the ordering defined above) the value of <em>Exp</em><sub>1</sub> or if both values are equal, and <code>false</code> otherwise.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Introduce two variables <code>X</code>, <code>Y</code> and <code>Z</code> and force them to be of type <code>value</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;value X = "def";
str: "def"
rascal&gt;value Y = "abc";
str: "abc"
rascal&gt;value Z = 3.14;
real: 3.14</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now compare <code>X</code> and <code>Y</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;X &gt;= Y;
bool: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>and <code>X</code> and <code>Z</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;X &gt;= Z;
bool: true</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Value-LessThan">Value LessThan</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Less than operator on values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &lt; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &lt; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>By brute force, a total less than operator between two values <em>V</em><sub>1</sub> and <em>V</em><sub>2</sub> of arbitrary types <em>T</em><sub>1</sub> and <em>T</em><sub>2</sub> is defined:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the types <em>T<sub>1</sub></em> and <em>T<sub>2</sub></em> can be compared then <em>V<sub>1</sub></em> less than <em>V<sub>2</sub></em> is used.</p>
</li>
<li>
<p>Otherwise values are ordered according their type name, for instance, <code>int</code> is smaller than <code>list</code>, and <code>map</code> is smaller than <code>rel</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Less than yields <code>true</code> if the value of <em>Exp</em><sub>1</sub> is strictly less
than (according to the ordering defined above) the value of <em>Exp</em><sub>2</sub>, and <code>false</code> otherwise.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Introduce two variables <code>X</code>, <code>Y</code> and <code>Z</code> and force them to be of type <code>value</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;value X = "abc";
str: "abc"
rascal&gt;value Y = "def";
str: "def"
rascal&gt;value Z = 3.14;
real: 3.14</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now compare <code>X</code> and <code>Y</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;X &lt; Y;
bool: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>and <code>X</code> and <code>Z</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;X &lt; Z;
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Value-LessThanOrEqual">Value LessThanOrEqual</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Less than or equal operator on values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> &#8656; <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> &#8656; <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>By brute force, a total less than operator between two values <em>V</em><sub>1</sub> and <em>V</em><sub>2</sub> of arbitrary types <em>T</em><sub>1</sub> and <em>T</em><sub>2</sub> is defined:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the types <em>T<sub>1</sub></em> and <em>T<sub>2</sub></em> can be compared then <em>V<sub>1</sub></em> less than <em>V<sub>2</sub></em> is used.</p>
</li>
<li>
<p>Otherwise values are ordered according their type name, for instance, <code>int</code> is smaller than <code>list</code>, and <code>map</code> is smaller than <code>rel</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Less than or equal yields <code>true</code> if the value of <em>Exp</em><sub>1</sub> is strictly less
than (according to the ordering defined above) the value of <em>Exp</em><sub>2</sub> or if both values are equal, and <code>false</code> otherwise.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Introduce two variables <code>X</code>, <code>Y</code> and <code>Z</code> and force them to be of type <code>value</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;value X = "abc";
str: "abc"
rascal&gt;value Y = "def";
str: "def"
rascal&gt;value Z = 3.14;
real: 3.14</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now compare <code>X</code> and <code>Y</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;X &lt;= Y;
bool: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>and <code>X</code> and <code>Z</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;X &lt;= Z;
bool: false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="Value-NotEqual">Value NotEqual</h5>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Not equal operator on values.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> != <em>Exp</em><sub>2</sub></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em> != <em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Yields <code>true</code> if both arguments are not identical and <code>false</code> otherwise.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Introduce two variables <code>X</code>, <code>Y</code> and <code>Z</code> and force them to be of type <code>value</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;value X = "abc";
str: "abc"
rascal&gt;value Y = "abc";
str: "abc"
rascal&gt;value Z = 3.14;
real: 3.14</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now compare <code>X</code> and <code>Y</code> for inequality:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;X != Y;
bool: false</code></pre>
</div>
</div>
<div class="paragraph">
<p>and <code>X</code> and <code>Z</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;X != Z;
bool: true</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Values-Void">6.1.19. Void</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Values of type <code>void</code>.</p>
</div>
<div class="paragraph">
<div class="title">Types</div>
<p><code>void</code></p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Void stands for <em>nothing</em> and is represented by the type <code>void</code>.
It is a type without any values.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Expressions-Operators">6.2. Operators</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>The Rascal operators.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>An <em>operator expression</em> consists of an operator and one or more operands. The evaluation order of the operands depends on the operator.
The operator is applied to the operands and the resulting value (or values in some cases) is the result of the operator expression.</p>
</div>
<div class="paragraph">
<p>All operators are summarized in the following table. They are listed from highest precedence
to lowest precedence. In other words, operators listed earlier in the table bind stronger.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 30%;">
<col style="width: 45%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Operator</th>
<th class="tableblock halign-left valign-top">See</th>
<th class="tableblock halign-left valign-top">Short Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em> . <em>Name</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Location-FieldSelection">Location</a>,
  <a href="#DateTime-FieldSelection">DateTime</a>,
  <a href="#Tuple-FieldSelection">Tuple</a>,
  <a href="#Relation-FieldSelection.Relation">[Relation-FieldSelection.Relation]</a>,</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Select named field from structured value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em><sub>1</sub> [ <em>Name</em> = <em>Exp</em><sub>2</sub> ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#FieldAssignment">[FieldAssignment]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Change value of named field of structured value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em> &lt; <em>field</em><sub>1</sub>, &#8230;&#8203; &gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#FieldProjection">[FieldProjection]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Select fields from relation or structured value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em> is <em>Name</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#ParseTree">[ParseTree]</a>,
  <a href="#Expressions-ConcreteSyntax">Concrete Syntax</a>,
  <a href="#Declarations-AlgebraicDataType">Algebraic Data Type</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns true if and only if the constructor name of the value produced by <em>Exp</em> is equal to <em>Name</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em> has <em>Name</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#ParseTree">[ParseTree]</a>,
  <a href="#Expressions-ConcreteSyntax">Concrete Syntax</a>,
  <a href="#Declarations-AlgebraicDataType">Algebraic Data Type</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns true if and only if the constructor (node or parse tree) of the value produced by <em>Exp</em> has any field labeled <em>Name</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em><sub>1</sub> [ <em>Exp</em><sub>2</sub> , <em>Exp</em><sub>3</sub>, &#8230;&#8203;. ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#List-Subscription">List</a>,
  <a href="#Map-Subscription">Map</a>,
  <a href="#Tuple-Subscription">Tuple</a>,
  <a href="#Relation-Subscription">Relation</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieve values for given index/key from list, map, tuple or relation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em><sub>1</sub> [ <em>Exp</em><sub>2</sub> , <em>Exp</em><sub>3</sub> .. <em>Exp</em><sub>4</sub> ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Values-List-Slice">List</a>,
  <a href="#String-Slice">String</a>,
  <a href="#Node-Slice">Node</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieve a slice from a list, string, or node.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em>?</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Boolean-IsDefined">Boolean</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test whether an expression has a defined value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>!<em>Exp</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Boolean-Negation">Boolean</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Negate a Boolean value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>- <em>Exp</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Number-Negation">Number</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Negation of numbers</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em> +</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Relation-TransitiveClosure">Relation</a>,
  <a href="#ListRelation-TransitiveClosure">ListRelation</a>,</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transitive closure on relation or list relation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em> *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Relation-ReflexiveTransitiveClosure">Relation</a>,
  <a href="#ListRelation-ReflexiveTransitiveClosure">ListRelation</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reflexive transitive closure on relation or list relation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em> @ <em>Name</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Expressions-Selection">Selection</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value of annotation <em>Name</em> of <em>Exp</em>'s value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em><sub>1</sub> [@ <em>Name</em> = <em>Exp</em><sub>2</sub>]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Expressions-Replacement">Replacement</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assign value of <em>Exp</em><sub>2</sub> to annotation <em>Name</em> of <em>Exp</em><sub>1</sub>'s value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em><sub>1</sub> o <em>Exp</em><sub>2</sub></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Relation-Composition">Relation</a>,
  <a href="#Map-Composition">Map</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Exp</em><sub>1</sub> and <em>Exp</em><sub>2</sub> should evaluate to a relation or map; return their composition. Note: the letter "o" is thus a keyword</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em><sub>1</sub> / <em>Exp</em><sub>2</sub></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Number-Division">Number</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Divide two numbers</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em><sub>1</sub> % <em>Exp</em><sub>2</sub></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Number-Remainder">Number</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remainder on numbers</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em><sub>1</sub> * <em>Exp</em><sub>2</sub></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Number-Multiplication">Number</a>,
  <a href="#List-Product">List</a>,
  <a href="#Set-Product">Set</a>,
  <a href="#Relation-CartesianProduct">Relation</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiply numbers; product of list, set, or relation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em><sub>1</sub> &amp; <em>Exp</em><sub>2</sub></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#List-Intersection">List</a>,
  <a href="#Set-Intersection">Set</a>,
  <a href="#Map-Intersection">Map</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intersection of list, set (including relation), or map</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em><sub>1</sub> + <em>Exp</em><sub>2</sub></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Number-Addition">Number</a>,
  <a href="#String-Concatenation">String</a>,
  <a href="#List-Concatenation">List Concatenation</a>,
  <a href="#List-Insert">List Insert</a>,<a href="#List-Append">List Append</a>,
  <a href="#Tuple-Concatenation">Tuple Concatenation</a>,
  <a href="#Set-Union">Set</a>,
  <a href="#Map-Union">Map</a>,
  <a href="#Location-AddSegment">Location</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add numbers; concatenate string, list or tuple;
  union on set (including relation), or map;
  concatenate location and string</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em><sub>1</sub> - <em>Exp</em><sub>2</sub></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Number-Subtraction">Number</a>,
  <a href="#List-Difference">List</a>,
  <a href="#Set-Difference">Set</a>,
  <a href="#Map-Difference">Map</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subtract numbers; difference of list, set (including relation), or map</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em><sub>1</sub> join <em>Exp</em><sub>2</sub></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Relation-Join">Relation</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Join on relation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em><sub>1</sub> in <em>Exp</em><sub>2</sub></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#List-in">List</a>,
  <a href="#Set-in">Set</a>,
  <a href="#Map-in">Map</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Membership test for element in list, map, set (including relation)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em><sub>1</sub> notin <em>Exp</em><sub>2</sub></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#List-notin">List</a>,
  <a href="#Set-notin">Set</a>,
  <a href="#Map-notin">Map</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Negated membership test for element in  list, map, set (including relation)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em><sub>1</sub> &#8656; <em>Exp</em><sub>2</sub></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Number-LessThanOrEqual">Number</a>,
  <a href="#String-LessThanOrEqual">String</a>,
  <a href="#Location-LessThanOrEqual">Location</a>,
  <a href="#DateTime-LessThanOrEqual">DateTime</a>,
  <a href="#List-SubList">List</a>,
  <a href="#Set-SubSet">Set</a>,
  <a href="#Map-SubMap">Map</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Less than or equal on all values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em><sub>1</sub> &lt; <em>Exp</em><sub>2</sub></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Number-LessThan">Number</a>,
  <a href="#String-LessThan">String</a>,
  <a href="#Location-LessThan">Location</a>,
  <a href="#DateTime-LessThan">dateTime</a>,
  <a href="#List-StrictSubList">List</a>,
  <a href="#Set-StrictSubSet">Set</a>,
  <a href="#Map-StrictSubMap">Map</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Less than on all values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em><sub>1</sub> &gt;= <em>Exp</em><sub>2</sub></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Number-GreaterThanOrEqual">Number</a>,
  <a href="#String-GreaterThanOrEqual">String</a>,
  <a href="#Location-GreaterThanOrEqual">Location</a>,
  <a href="#DateTime-GreaterThanOrEqual">DateTime</a>,
  <a href="#List-SuperList">List</a>,
  <a href="#Set-SuperSet">Set</a>,
  <a href="#Map-SuperMap">Map</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Greater than or equal on all values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em><sub>1</sub> &gt; <em>Exp</em><sub>2</sub></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Number-GreaterThan">Number</a>,
  <a href="#String-GreaterThan">String</a>,
  <a href="#Location-GreaterThan">Location</a>,
  <a href="#DateTime-GreaterThan">DateTime</a>,
  <a href="#List-StrictSuperList">List</a>,
  <a href="#Set-StrictSuperSet">Set</a>,
  <a href="#Map-StrictSuperMap">Map</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Greater than on all values.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Pat</em> := <em>Exp</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Boolean-Match">Boolean Match</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pattern matches value of expression</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Pat</em> !:= <em>Exp</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Boolean-NoMatch">Boolean NoMatch</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pattern does not match value of expression</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em><sub>1</sub> == <em>Exp</em><sub>2</sub></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Number-Equal">Number</a>,
  <a href="#String-Equal">String</a>,
  <a href="#Location-Equal">Location</a>,
  <a href="#DateTime-Equal">DateTime</a>,
  <a href="#List-Equal">List</a>,
  <a href="#Set-Equal">Set</a>,
  <a href="#Map-Equal">Map</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Equality on all values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em><sub>1</sub> != <em>Exp</em><sub>2</sub></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Number-NotEqual">Number</a>,
  <a href="#String-NotEqual">String</a>,
  <a href="#Location-NotEqual">Location</a>,
  <a href="#DateTime-NotEqual">DateTime</a>,
  <a href="#List-NotEqual">List</a>,
  <a href="#Set-NotEqual">Set</a>,
  <a href="#Map-NotEqual">Map</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inequality on all values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em><sub>1</sub> ? <em>Exp</em><sub>2</sub></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Boolean-IfDefinedElse">Boolean IfDefinedElse</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value of expression when it is defined, otherwise alternative value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em><sub>1</sub> ? <em>Exp</em><sub>2</sub> : <em>Exp</em><sub>3</sub></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Value-Conditional">Value Conditional</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditional expression for all types</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em><sub>1</sub> =&#8658; <em>Exp</em><sub>2</sub></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Boolean-Implication">Boolean Implication</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Implication on Boolean values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em><sub>1</sub> &#8656;&#8658; <em>Exp</em><sub>2</sub></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Boolean-Equivalence">Boolean Equivalence</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Equivalence on Boolean values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em><sub>1</sub> &amp;&amp; <em>Exp</em><sub>2</sub></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Boolean-And">Boolean And</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">And on Boolean values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Exp</em><sub>1</sub> || <em>Exp</em><sub>2</sub></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Boolean-Or">Boolean Or</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Or on Boolean values</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="Operators-FieldAssignment">6.2.1. Field Assignment</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Assignment to a field of a tuple or datatype.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub> [ <em>Name</em> = <em>Exp</em><sub>2</sub> ]</code></p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p><em>Exp</em><sub>1</sub> should evaluate to a tuple or datatype with a field <em>Name</em>; assign the value of <em>Exp</em><sub>2</sub> to that field</p>
</div>
<div class="paragraph">
<p>Field assignment applies to all values that have named components like tuples and relations with named elements, data types, and locations.
Field assignment returns a new value in which the named component has been replaced by a new value.
<em>Name</em> stands for itself and is not evaluated.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;tuple[int key, str val] T = &lt;1, "abc"&gt;;
tuple[int,str]: &lt;1,"abc"&gt;
rascal&gt;T[val = "def"];
tuple[int,str]: &lt;1,"def"&gt;
rascal&gt; T;
tuple[int,str]: &lt;1,"abc"&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Observe that field assignment creates a new value with an updated field. The old value remains unchanged as can be seen from the unchanged value of T in the above example.</p>
</div>
</div>
<div class="sect3">
<h4 id="Operators-FieldProjection">6.2.2. Field Projection</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Projection of tuple.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em> &lt; <em>Field</em><sub>1</sub>, <em>Field</em><sub>2</sub> &#8230;&#8203; &gt;</code></p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p><em>Exp</em> should evaluate to a tuple or relation, and <em>Field</em><sub>i</sub> should be a field name or an integer constant
 that refers to elements in the order in which they occur in the original value (counting from 0).</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Suppose we have a relation with traffic information that records the name of the day, the day number, and the length of the traffic jams at that day.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;rel[str day, int daynum, int length] Traffic =
&gt;&gt;&gt;&gt;&gt;&gt;&gt;{&lt;"mon", 1, 100&gt;, &lt;"tue", 2, 150&gt;, &lt;"wed", 3, 125&gt;,
&gt;&gt;&gt;&gt;&gt;&gt;&gt; &lt;"thur", 4, 110&gt;, &lt;"fri", 5, 90&gt;};
rel[str,int,int]: {
  &lt;"thur",4,110&gt;,
  &lt;"mon",1,100&gt;,
  &lt;"fri",5,90&gt;,
  &lt;"wed",3,125&gt;,
  &lt;"tue",2,150&gt;
}
rascal&gt;Traffic&lt;length,daynum&gt;;
rel[int,int]: {
  &lt;150,2&gt;,
  &lt;110,4&gt;,
  &lt;100,1&gt;,
  &lt;125,3&gt;,
  &lt;90,5&gt;
}
rascal&gt;Traffic&lt;2,day&gt;;
rel[int,str]: {
  &lt;110,"thur"&gt;,
  &lt;125,"wed"&gt;,
  &lt;90,"fri"&gt;,
  &lt;100,"mon"&gt;,
  &lt;150,"tue"&gt;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Field projection thus selects parts from a larger value that has a fixed number of parts. The selection is based on position and not on value and can be used to completely reorder or remove the parts of a larger value.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Expressions-Call">6.3. Call</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Function call.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Name</em> ( <em>Exp</em><sub>1</sub>, <em>Exp</em><sub>2</sub>, &#8230;&#8203; )</code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top">&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top"><code><em>Name</em> ( <em>Exp<sub>1</sub></em>, <em>Exp<sub>2</sub></em>, &#8230;&#8203; )</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>1</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T<sub>2</sub></em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Determined by <em>Name</em>, <em>T<sub>i</sub></em> and function declarations</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>First, the actual parameter expressions <em>Exp</em><sub>i</sub> are evaluated resulting in values <em>V</em><sub>i</sub>.
Based on <em>Name</em> and the argument types <em>T</em><sub>i</sub>, the identity of the function to be called is determined.</p>
</div>
<div class="paragraph">
<p>The values <em>V</em><sub>i</sub> are bound to the formal parameter names of the
declared functions and the function body is executed.
The value returned by the function is used as value of the function call.</p>
</div>
<div class="paragraph">
<p>A <em>constructor call</em> has identical syntax to that of a function call, see <a href="#Values-Constructor">Constructor</a>,</p>
</div>
<div class="paragraph">
<p>See <a href="#Declarations-Function">Function Declaration</a> for more details about function declarations.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Describe keyword parameters.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>First declare a function <code>square</code> with argument <em>n</em> that returns <em>n^2</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;int square(int n) { return n * n; }
ok</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next call <code>square</code>. This results in the following steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Based on the name <code>square</code> and the int argument 12 we identify the function to be called
(= the function <code>square</code> we just defined).</p>
</li>
<li>
<p>Compute the value of the actual parameter (= 12).</p>
</li>
<li>
<p>Bind the formal parameter <code>n</code> to the actual value 12.</p>
</li>
<li>
<p>Execute the body of <code>square</code>.</p>
</li>
<li>
<p>The return value of square is the vale of the call:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;square(12);
int: 144</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Expressions-Comprehensions">6.4. Comprehensions</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Comprehensions provide a concise notation to conditionally generate new values.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Comprehensions are defined for the following types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>list</code>, see <a href="#List-Comprehension">List Comprehension</a>,</p>
</li>
<li>
<p><code>set</code>, see <a href="#Set-Comprehension">Set Comprehension</a>,</p>
</li>
<li>
<p><code>map</code>, see <a href="#Map-Comprehension">Map Comprehension</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The syntax varies slightly for each type, but comprehensions have the following common elements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <em>generator</em> can come in two flavours:</p>
<div class="ulist">
<ul>
<li>
<p>an <em>enumerator</em> that generates all the values in some subject value.</p>
</li>
<li>
<p>a <em>filter</em> that performs an arbitrary test on previously generated values.</p>
</li>
</ul>
</div>
</li>
<li>
<p>One or more <em>contributing expressions</em> that are added to the list, set or map that is being constructed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The contributing expressions are evaluated for all possible values of the enumerators that are not
excluded by a test. When a filter fails, execution continues with the preceding enumerator (if any).</p>
</div>
<div class="paragraph">
<p>Each enumerator may introduce new variables that can be used in subsequent generators as well as in the contributing expressions.
A generator can use the variables introduced by preceding generators.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>A list comprehension:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[ 3 * X | int X &lt;- [1 .. 10] ];
list[int]: [3,6,9,12,15,18,21,24,27]</code></pre>
</div>
</div>
<div class="paragraph">
<p>A list comprehension with a filter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[ 3 * X | int X &lt;- [1 .. 10], X &gt; 5];
list[int]: [18,21,24,27]</code></pre>
</div>
</div>
<div class="paragraph">
<p>A list comprehension with multiple contributing expressions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[X, X * X | int X &lt;- [1, 2, 3, 4, 5], X &gt;= 3];
list[int]: [3,9,4,16,5,25]</code></pre>
</div>
</div>
<div class="paragraph">
<p>A set comprehension with a filter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;{X | int X &lt;- {1, 2, 3, 4, 5}, X &gt;= 3};
set[int]: {5,3,4}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A set comprehension that constructs a relation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;{&lt;X, Y&gt; | int X &lt;- {1, 2, 3}, int Y &lt;- {2, 3, 4}, X &gt;= Y};
rel[int,int]: {
  &lt;3,2&gt;,
  &lt;3,3&gt;,
  &lt;2,2&gt;
}
rascal&gt;{&lt;Y, X&gt; | &lt;int X, int Y&gt; &lt;- {&lt;1,10&gt;, &lt;2,20&gt;}};
rel[int,int]: {
  &lt;10,1&gt;,
  &lt;20,2&gt;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Introduce a map of <code>fruits</code> and use a map comprehension to filter fruits with an associated value larger than 10:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;fruits = ("pear" : 1, "apple" : 3, "banana" : 0, "berry" : 25, "orange": 35);
map[str, int]: ("banana":0,"pear":1,"orange":35,"berry":25,"apple":3)
rascal&gt;(fruit : fruits[fruit] | fruit &lt;- fruits, fruits[fruit] &gt; 10);
map[str, int]: ("orange":35,"berry":25)</code></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="#List-Comprehension">List Comprehension</a>, <a href="#Set-Comprehension">Set Comprehension</a>, or <a href="#Map-Comprehension">Map Comprehension</a> for more examples.</p>
</div>
<div class="sect3">
<h4 id="Comprehensions-Enumerator">6.4.1. Enumerator</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Enumerate all values in a given subject value.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Pattern</em> &#8592; <em>Exp</em></code></p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>An enumerator generates all the values in a given subject value.
For elementary types (<code>bool</code>, <code>int</code>, <code>real</code>, <code>num</code>, <code>loc</code>, <code>datetime</code>, <code>str</code>) this is just a singleton.
For composite types (<code>list</code>, <code>set</code>, <code>map</code>, <code>tuple</code>, <code>rel</code>, <code>node</code>) the values of their elements,
respectively, their direct children are enumerated. An enumerator is evaluated as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Expression <em>Exp</em> is evaluated and may have an arbitrary value <em>V</em>.</p>
</li>
<li>
<p>The elements of <em>V</em> are enumerated one by one.</p>
</li>
<li>
<p>Each element value is matched against the pattern <em>Pattern</em>. There are two cases:</p>
<div class="ulist">
<ul>
<li>
<p>The match succeeds, any variables in <em>Pattern</em> are bound, and the next generator in the comprehension is evaluated.
The variables that are introduced by an enumerator are only available to generators that appear later (i.e., to the right)
in the comprehension. When this enumerator is the last generator in the comprehension,
the contributing expressions of the comprehension are evaluated.</p>
</li>
<li>
<p>The match fails, no variables are bound. If <em>V</em> has more elements, a next element is tried.
Otherwise, a previous generator (i.e., to the left) is tried. If this enumerator is the first generator in the comprehension,
the evaluation of the comprehension is complete.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Type information is used to check the validity of an enumerator and guard you against mistakes.
An impossible enumerator like</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">int N &lt;- {"apples", "oranges"}</code></pre>
</div>
</div>
<div class="paragraph">
<p>will be flagged as an error since the pattern can never match.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Here are some examples of enumerators:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>int N &#8592; {1, 2, 3, 4, 5}</code>.</p>
</li>
<li>
<p><code>str K &#8592; KEYWORDS</code>, where <code>KEYWORDS</code> should evaluate to a value of <code>set[str]</code>.</p>
</li>
<li>
<p><code>&lt;str K, int N&gt; &#8592; {&lt;"a",10&gt;, &lt;"b",20&gt;, &lt;"c",30&gt;}</code>.</p>
</li>
<li>
<p><code>&lt;str K, int N&gt; &#8592; FREQUENCIES</code>, where <code>FREQUENCIES</code> should evaluate to a value of type <code>rel[str,int]</code>.</p>
</li>
<li>
<p><code>&lt;str K, 10&gt; &#8592; FREQUENCIES</code>, will only generate pairs with <code>10</code> as second element.</p>
</li>
<li>
<p><code>int N &#8592; 17</code>, will only generate the value <code>17</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here are examples of enumerators in action:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[ N * N | int N &lt;- [1, 2, 3, 4, 5] ];
list[int]: [1,4,9,16,25]
rascal&gt;{&lt;N, K&gt; | &lt;str K, int N&gt; &lt;- {&lt;"a",10&gt;, &lt;"b",20&gt;, &lt;"c",30&gt;}};
rel[int,str]: {
  &lt;30,"c"&gt;,
  &lt;20,"b"&gt;,
  &lt;10,"a"&gt;
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Comprehensions-Filter">6.4.2. Filter</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Filter values in a <a href="#List-Comprehension">List Comprehension</a>], <a href="#Set-Comprehension">Set Comprehension</a> or <a href="#Map-Comprehension">Map Comprehension</a>.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp</em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>A  filter is a boolean-valued expression.
If the evaluation of the filter gives <code>true</code> this indicates that the current combination of generated values up
to this filter is still desired and execution continues with subsequent generators.
If the evaluation gives <code>false</code> this indicates that the current combination of values is undesired,
and that another combination should be tried by going back to the previous generator.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Adding a filter to a comprehension, may restrict the values that are included in the result of the comprehension:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[ X * X | int X &lt;- [1, 2, 3, 4, 5, 6] ];
list[int]: [1,4,9,16,25,36]
rascal&gt;[ X * X | int X &lt;- [1, 2, 3, 4, 5, 6], X % 3 == 0 ];
list[int]: [9,36]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Filters can also be applied to values produced by several generators:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[&lt;X, Y&gt; | int X &lt;- [0 .. 10], int Y &lt;- [0 .. 10], X + Y == 10]
lrel[int,int]: [
  &lt;1,9&gt;,
  &lt;2,8&gt;,
  &lt;3,7&gt;,
  &lt;4,6&gt;,
  &lt;5,5&gt;,
  &lt;6,4&gt;,
  &lt;7,3&gt;,
  &lt;8,2&gt;,
  &lt;9,1&gt;
]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Expressions-ConcreteSyntax">6.5. Concrete Syntax</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Concrete syntax is a notation for patterns that match parse trees and expressions that generate them.</p>
</div>
<div class="ulist">
<div class="title">Syntax</div>
<ul>
<li>
<p><code>(<em>Nonterminal</em>) `<em>sentence</em>`</code></p>
</li>
<li>
<p>` <code><em>sentence</em></code> `</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>where each sentence is a string over the language generated from <code><em>Nonterminal</em></code>. This language is extended in the following way. Each non-terminal reachable <code>X</code> from <em>Non</em>-terminal has an added alternative to allow nested Rascal <a href="#Rascal-Patterns">Patterns</a> inside of concrete syntax fragments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>syntax X = "&lt;" Pattern p "&gt;";</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>A concrete syntax fragment allows the programmer to write patterns and expressions in the language that is currently analyzed,
transformed or generated. The <a href="#Expressions-ConcreteSyntax">Concrete Syntax</a> feature is derived from <a href="#Declarations-SyntaxDefinition">Syntax Definition</a>s.
For any non-terminal defined in a <a href="#Declarations-SyntaxDefinition">Syntax Definition</a>, you may use <a href="#Expressions-ConcreteSyntax">Concrete Syntax</a> to match or generate its parse trees.</p>
</div>
<div class="ulist">
<div class="title">Benefits</div>
<ul>
<li>
<p>Easy notation for complex structures</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Pitfalls</div>
<ul>
<li>
<p>Since Rascal currently has no type-checker, the disambiguation of concrete syntax fragments is done heuristically which may lead to surprises.</p>
</li>
<li>
<p>The disambiguation of embedded concrete syntax fragments may change in the near future.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Expressions-Reducer">6.6. Reducer</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Reduce generated values to a single value.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>( <em>Exp</em> | <em>RedExp</em> | <em>Gen</em><sub>1</sub>, <em>Gen</em><sub>1</sub>, &#8230;&#8203; )</code></p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>A reducer resembles the <a href="http://en.wikipedia.org/wiki/Fold_(higher-order_function)">fold</a> function
found in most functional languages.</p>
</div>
<div class="paragraph">
<p>A reducer is equivalent to the following code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">it = &lt;em&gt;Exp&lt;/em&gt;; <i class="conum" data-value="1"></i><b>(1)</b>
for(&lt;em&gt;Gen&lt;sub&gt;1&lt;/sub&gt;&lt;/em&gt;, &lt;em&gt;Gen&lt;sub&gt;1&lt;/sub&gt;&lt;/em&gt;, ... ) <i class="conum" data-value="2"></i><b>(2)</b>
    it = &lt;em&gt;RedExp&lt;/em&gt;; <i class="conum" data-value="3"></i><b>(3)</b>
it; <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="paragraph">
<p>and is executed as follows:</p>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A fresh variable <code>it</code> is initialized with <em>Exp</em>.
We call the variable <code>it</code> since we use <code>it</code> to initialize the reducer, to make changes to <code>it</code>,
and to return <code>it</code> as result.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>A for loop iterates over all values produced by the generators <code><em>Gen<sub>1</sub></em></code>, <code><em>Gen<sub>1</sub></em></code>, &#8230;&#8203; .</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>In the body of the loop, variable <code>it</code> is updated to reflect a new reduced value.
Note that <code>it</code> itself and variables introduced in <em>Gen</em><sub>1</sub>, <em>Gen</em><sub>1</sub>, &#8230;&#8203; may occur in <em>RedExp</em>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The value of <code>it</code> is the result of the reducer.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;L = [1, 3, 5, 7];
list[int]: [1,3,5,7]
rascal&gt;(0 | it + e | int e &lt;- L);
int: 16
rascal&gt;(1 | it * e | int e &lt;- L);
int: 105</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Expressions-Replacement">6.7. Replacement</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Set the value of an <a href="#Declarations-Annotation">Annotation</a>.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Exp</em><sub>1</sub>[@<em>Name</em> = <em>Exp</em><sub>2</sub>]</code></p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Expression that sets the value of annotation <em>Name</em> of the value <em>Exp</em><sub>1</sub> to the value of <em>Exp</em><sub>2</sub>
and returns the value with the new annotation value as result.
See <a href="#Expressions-Selection">Selection</a> for selecting the value of an annotation.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;anno str node @ color;
ok
rascal&gt;anno str node @ size;
ok
rascal&gt;F = "fn"(123, "abc");
node: "fn"(123,"abc")
rascal&gt;F = F[@color="red"];
node: "fn"(123,"abc")[
  @color="red"
]
rascal&gt;F = F[@size="10"];
node: "fn"(123,"abc")[
  @size="10"
]
rascal&gt;F@color;
NoSuchAnnotation("color") at |test-modules:///ConsoleInput.rsc|(91,7,&lt;8,15&gt;,&lt;8,22&gt;)
Call stack (most recent first):
	main([]) at |test-modules:///ConsoleInput.rsc|(91,7,&lt;8,15&gt;,&lt;8,22&gt;)

ok</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Expressions-Selection">6.8. Selection</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Retrieve the value of an <a href="#Declarations-Annotation">Annotation</a>.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Expr</em> @ <em>Name</em></code></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Expr</em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Expr</em> @ <em>Name</em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>T</em> &lt;: node</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Determined by annotation declaration of <em>Name</em></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>Retrieves the value of annotation <em>Name</em> of the value of <em>Exp</em> (may be undefined!).
Also see <a href="#Expressions-Replacement">Replacement</a> for replacing the value of an annotation.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;anno str node @ color;
ok
rascal&gt;anno str node @ size;
ok
rascal&gt;F = "fn"(123, "abc");
node: "fn"(123,"abc")
rascal&gt;F = F[@color="red"];
node: "fn"(123,"abc")[
  @color="red"
]
rascal&gt;F = F[@size="10"];
node: "fn"(123,"abc")[
  @size="10"
]
rascal&gt;F@color;
NoSuchAnnotation("color") at |test-modules:///ConsoleInput.rsc|(91,7,&lt;8,15&gt;,&lt;8,22&gt;)
Call stack (most recent first):
	main([]) at |test-modules:///ConsoleInput.rsc|(91,7,&lt;8,15&gt;,&lt;8,22&gt;)

ok</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Expressions-StatementAsExpression">6.9. Statement as Expression</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Statements that have a value and can be used as expressions.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Several forms of statements produce a value and can be used as expression.
This is further explained in the sections for the relevant statements, see <a href="#Statements-If">If</a>, <a href="#Statements-While">While</a>, <a href="#Statements-Do">Do</a> and <a href="#Statements-For">For</a>.</p>
</div>
<div class="paragraph">
<div class="title">Pitfalls</div>
<p>It is likely that the design of Rascal will evolve into completely merging expressions and statements.</p>
</div>
</div>
<div class="sect2">
<h3 id="Expressions-Visit">6.10. Visit</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Visit the elements in a tree or value.</p>
</div>
<div class="listingblock">
<div class="title">Syntax</div>
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">Strategy visit ( <em>Exp</em> ) {
case <em>PatternWithAction<sub>1</sub></em>;
case <em>PatternWithAction<sub>2</sub></em>;
...
default: ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Visiting the nodes in a tree is a very common task in the <a href="../EASY/EASY.html">EASY</a> domain.
In many cases (but certainly not all) the tree is a syntax tree of some source code file
and the nodes correspond to expressions or statements.
Computing metrics or refactoring are examples of tasks that require a tree visit.
In object-oriented programming, the <em>visitor pattern</em> is in common use for this,
see <a href="http://en.wikipedia.org/wiki/Visitor_pattern">Visitor Pattern</a>.
There are three frequently occurring scenarios:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Accumulator: traverse the tree and collect information.</p>
</li>
<li>
<p>Transformer: traverse the tree and transform it into another tree.</p>
</li>
<li>
<p>Accumulating Transformer: traverse the tree, collect information and also transform the tree.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The visit expression in Rascal can accommodate all these (and more) use cases.</p>
</div>
<div class="paragraph">
<p>Given a subject term (the current value of <em>Exp</em>) and a list of cases
(consisting of a sequence of <a href="#Pattern with Action">[Pattern with Action]</a>s, it traverses the term.
Depending on the precise actions it may perform replacement (mimicking a transformer),
update local variables (mimicking an accumulator) or a combination of these two (accumulating transformer).
If <strong>any</strong> of the actions contains an <a href="#Statements-Insert">Insert</a> statement,
the value of the visit expression is a new value that is obtained by successive insertions in the subject
term by executing one or more cases. Otherwise, the original value of the subject term is returned.</p>
</div>
<div class="paragraph">
<p>The visit expression is optionally preceded by one of the following strategy indications that
determine the traversal order of the subject:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>top-down</code>: visit the subject from root to leaves.</p>
</li>
<li>
<p><code>top-down-break</code>: visit the subject from root to leaves, but stop at the current path when a case matches.</p>
</li>
<li>
<p><code>bottom-up</code>: visit the subject from leaves to root (this is the default).</p>
</li>
<li>
<p><code>bottom-up-break</code>: visit the subject from leaves to root, but stop at the current path when a case matches.</p>
</li>
<li>
<p><code>innermost</code>: repeat a bottom-up traversal as long as a case matches.</p>
</li>
<li>
<p><code>outermost</code>: repeat a top-down traversal as long as a case matches.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The execution of the cases has the following effect:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A PatternWithAction of the form <code><em>Pattern</em> &#8658; <em>Exp</em></code> replaces the current subtree of the subject by the value of <em>Exp</em>.
Note that a copy of the subject is created at the start of the visit statement and all replacements are made in this copy.
As a consequence, modifications made during the visit cannot influence matches later on.
The modified copy of the subject is ultimately returned by the visit expression.</p>
</li>
<li>
<p>A PatternWithAction of the form <code><em>Pattern</em> : <em>Statement</em></code> executes <code>Statement</code> and this should lead to one of the following:</p>
<div class="ulist">
<ul>
<li>
<p>Execution of an Insert statement of the form <code>insert <em>Exp<sub>2</sub></em></code>.
The value of <em>Exp</em><sub>2</sub> replaces the subtree of the subject that is currently being visited.
Once again, this modification takes place in a copy of the original subject (see above).
Note that:</p>
<div class="ulist">
<ul>
<li>
<p>An insert statement may only occur in a PatternWithAction in a visit expression or a rule.</p>
</li>
<li>
<p><code><em>Pattern</em> &#8658; <em>Exp</em></code> is equivalent to <code><em>Pattern</em> : insert <em>Exp</em>;</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Execution of a <a href="#Statements-Fail">Fail</a> statement: all side effects of <em>Statement</em> are undone, no insertion is made, and the next case is tried.</p>
</li>
<li>
<p>Execution of a <a href="#Statements-Return">Return</a> statement that returns a value from the enclosing function.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The precise behaviour of the visit expression depends on the type of the subject:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For type node or ADT, all nodes of the tree are visited (in the order determined by the strategy).
Concrete patterns and abstract patterns directly match tree nodes.
Regular expression patterns match only values of type string.</p>
</li>
<li>
<p>For other structured types (list, set, map, tuple, rel), the elements of the structured type are visited and
matched against the cases.
When inserts are made, a new structured value is created. In these cases a strategy does not have any effect.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Visit a value and increment a counter for pattern <code>leaf(int N)</code> matches:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">visit(t) {
     case leaf(int N): c = c + N;
   };</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace all values that match the pattern <code>red(l, r)</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">visit(t) {
     case red(l, r) =&gt; green(l, r)
   };</code></pre>
</div>
</div>
<div class="paragraph">
<p>Do a bottom-up visit of an expression and apply the function <code>simp</code> to each subexpression:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">bottom-up visit(e){
           case Exp e1 =&gt; simp(e1)
         }</code></pre>
</div>
</div>
<div class="paragraph">
<p>More examples can, for instance, be found in Recipes, see <a href="../Recipes/Recipes.html#Common-ColoredTrees">ColoredTrees</a>,
<a href="../Recipes/Recipes.html#Common-WordReplacement">WordReplacement</a>, <a href="../Recipes/Recipes.html#CommonCountConstructors">CountConstructors</a>,
and <a href="../Recipes/Recipes.html#Common-Derivative">Derivative</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Rascal-Statements">7. Statements</h2>
<div class="sectionbody">
<div class="paragraph">
<div class="title">Synopsis</div>
<p>All Rascal statements.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>The following statements are available:</p>
</div>
<div class="imageblock float: right;">
<div class="content">
<img src="Statements/statement-parts.png" alt="Statement Types" width="500px">
</div>
</div>
<div class="sect2">
<h3 id="Statements-Append">7.1. Append</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Append an element to the list value produced by various loop statements.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>append <em>Exp</em></code></p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>An append statement may only occur in the body of a <a href="#Statements-While">While</a>, <a href="#Statements-Do">Do</a> or <a href="#Statements-For">For</a> statement.
It appends the value of <em>Exp</em> to the resulting list value of the loop construct in which it occurs.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;for(int i &lt;- [1..5]) append i*i;
list[int]: [1,4,9,16]
rascal&gt;L = for(int i &lt;- [1..5]) append i*i;
list[int]: [1,4,9,16]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Statements-Assert">7.2. Assert</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>An executable assertion.</p>
</div>
<div class="ulist">
<div class="title">Syntax</div>
<ul>
<li>
<p><code>assert <em>Exp<sub>1</sub></em></code></p>
</li>
<li>
<p><code>assert <em>Exp<sub>1</sub></em> : <em>Exp<sub>2</sub></em></code></p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Exp<sub>2</sub></em></code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>str</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>An assert statement may occur everywhere where a declaration is allowed. It has two forms:</p>
</div>
<div class="paragraph">
<p>An assert statement consists of a Boolean expression <em>Exp</em><sub>1</sub> and an optional string expression <em>Exp</em><sub>2</sub>
that serves as a identifying message for this assertion.</p>
</div>
<div class="paragraph">
<p>When <em>Exp</em><sub>1</sub> evaluates to <code>false</code>, an <code>AssertionFailed</code> exception is thrown.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;assert 1==2 : "is never true";
Assertion "is never true" failed at |test-modules:///ConsoleInput.rsc|(36,30,&lt;3,15&gt;,&lt;3,45&gt;)
AssertionFailed("is never true") at |test-modules:///ConsoleInput.rsc|(36,30,&lt;3,15&gt;,&lt;3,45&gt;)
Call stack (most recent first):
	main([]) at |test-modules:///ConsoleInput.rsc|(36,30,&lt;3,15&gt;,&lt;3,45&gt;)

ok
rascal&gt;int div(int x, int y) {
&gt;&gt;&gt;&gt;&gt;&gt;&gt;  assert y != 0 : "y must be non-zero";
&gt;&gt;&gt;&gt;&gt;&gt;&gt;  return x / y;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;}
ok
rascal&gt;div(4,0);
Assertion "y must be non-zero" failed at |test-modules:///ConsoleInput.rsc|(46,37,&lt;3,2&gt;,&lt;3,39&gt;)
AssertionFailed("y must be non-zero") at |test-modules:///ConsoleInput.rsc|(46,37,&lt;3,2&gt;,&lt;3,39&gt;)
Call stack (most recent first):
	div(4, 0, {}) at |test-modules:///ConsoleInput.rsc|(46,37,&lt;3,2&gt;,&lt;3,39&gt;)
	main([]) at |test-modules:///ConsoleInput.rsc|(119,8,&lt;8,15&gt;,&lt;8,23&gt;)

ok</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Statements-Assignment">7.3. Assignment</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Assign a value to a variable or more complex data structure.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code><em>Assignable</em> <em>AssignmentOp</em> <em>Exp</em></code></p>
</div>
<div class="paragraph">
<p>where <em>AssignmentOp</em> may be one of <code>=</code>, <code>+=</code>, <code>-=</code>, <code>*=</code>, <code>/=</code>, or <code>?=</code>.</p>
</div>
<div class="paragraph">
<p>An <em>Assignable</em> is one of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><em>Var</em></code></p>
</li>
<li>
<p><code><em>Assignable</em> [ <em>Exp</em> ]</code></p>
</li>
<li>
<p><code><em>Assignable</em> [ <em>Exp</em> .. <em>Exp</em> ]</code></p>
</li>
<li>
<p><code><em>Assignable</em> [ <em>Exp</em>, <em>Exp</em> .. <em>Exp</em> ]</code></p>
</li>
<li>
<p><code><em>Assignable</em> . <em>Name</em></code></p>
</li>
<li>
<p><code>&lt; <em>Assignable</em>, <em>Assignable</em>, &#8230;&#8203;, <em>Assignable</em> &gt;</code></p>
</li>
<li>
<p><code><em>Assignable</em> ? <em>Exp</em></code></p>
</li>
<li>
<p><code><em>Assignable</em> @ <em>Name</em></code></p>
</li>
<li>
<p><code><em>Name</em> ( <em>Assignable</em>, <em>Assignable</em>, &#8230;&#8203; )</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>The purpose of an assignment is to assign a new value to a simple variable or to an element of a more complex data structure.</p>
</div>
<div class="paragraph">
<p>The standard assignment operator is <code>=</code>.
The other assignment operators can be expressed as abbreviations for the standard assignment operator.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Assignment Operator</th>
<th class="tableblock halign-left valign-top">Equivalent to</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Assignable</em> += <em>Exp</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Assignable</em> = <em>Assignable</em> + <em>Exp</em></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Assignable</em> -= <em>Exp</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Assignable</em> = <em>Assignable</em> - <em>Exp</em></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Assignable</em> *= <em>Exp</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Assignable</em> = <em>Assignable</em> * <em>Exp</em></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Assignable</em> /= <em>Exp</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Assignable</em> = <em>Assignable</em> / <em>Exp</em></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Assignable</em> &amp;= <em>Exp</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Assignable</em> = <em>Assignable</em> &amp; <em>Exp</em></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Assignable</em> ?= <em>Exp</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>Assignable</em> = <em>Assignable</em> ? <em>Exp</em></code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>An assignable is either a single variable, (the base variable), optionally followed by subscriptions, slices or field selections.
The assignment statement always results in assigning a completely new value to the base variable.
We distinguish the following forms of assignment:</p>
</div>
<div class="sect3">
<h4 id="Assignment-Annotation">7.3.1. Annotation</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Assign to annotation.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>The value <em>V</em> of <em>Assignable</em> is determined and should be of a type that has an annotation <em>Name</em>.
A new value <em>V</em>' is created that is a copy of <em>V</em> but with the value of annotation <em>Name</em> replaced by the value of <em>Exp</em>.
<em>V</em>' is assigned to <em>Assignable</em>.
See <a href="#Declarations-Annotation">Annotation Declaration</a>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;data FREQ = wf(str word, int freq);
ok
rascal&gt;W = wf("rascal", 1000);
FREQ: wf("rascal",1000)
rascal&gt;anno str FREQ@color;
ok
rascal&gt;W@color = "red";
str: "red"
rascal&gt;W@color;
str: "red"</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
It is advisable to omit whitespace around the <code>@</code> operator,
otherwise the Rascal parser gets confused.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="Assignment-Constructor">7.3.2. Constructor</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Assign to constructor.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>First the value <em>Exp</em> is determined and should be a data value of the form <code><em>Name</em>(<em>V</em><sub>1</sub>, <em>V</em><sub>2</sub>, &#8230;&#8203;, <em>V</em><sub>n</sub>).
Next the assignments `<em>Assignable</em><sub>i</sub> = <em>V</em><sub>i</sub></code> are performed for 1 &#8656; i &#8656; n.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;data FREQ = wf(str word, int freq);
ok
rascal&gt;W = wf("rascal", 1000);
FREQ: wf("rascal",1000)
rascal&gt;wf(S, I) = W;
FREQ: wf("rascal",1000)
rascal&gt;S;
str: "rascal"
rascal&gt;I;
int: 1000</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Assignment-Field">7.3.3. Field</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Assign to a field of a tuple, relation or datatype.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>The value <code>V</code> of <em>Assignable</em> is determined and should be of a type that has a field <em>Name</em>.
The value of that field is replaced in <em>V</em> by the value of <em>Exp</em> resulting in a new value <em>V</em>' that is assigned to <em>Assignable</em>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;data FREQ = wf(str word, int freq);
ok
rascal&gt;W = wf("rascal", 1000);
FREQ: wf("rascal",1000)
rascal&gt;W.freq = 100000;
FREQ: wf("rascal",100000)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Assignment-IsDefined">7.3.4. IsDefined</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Assign but replace if value is not defined.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>First the value of <em>Exp</em><sub>1</sub> is determined and if that is defined it is assigned to <em>Assignable</em>.
Otherwise, the value of <em>Exp</em><sub>2</sub> is assigned to <em>Assignable</em>.
Values which can be undefined are values in <a href="#Values-Map">Map</a>s where the key is not set
or values of <a href="#Declarations-Annotation">Annotations</a> which have not been set yet.</p>
</div>
<div class="paragraph">
<p>No other values can be used in an undefined state, so the ? operator does not make sense on undefined or uninitialized variables for example.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;M = ("Andy": 1, "Brian" : 2);
map[str, int]: ("Andy":1,"Brian":2)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using an <code>isDefined</code> assignable can we increment a non-existing entry:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;M["SomebodyElse"] ? 0 += 1;
map[str, int]: ("Andy":1,"Brian":2,"SomebodyElse":1)
rascal&gt;M["SomebodyElse"];
NoSuchKey("SomebodyElse") at |test-modules:///ConsoleInput.rsc|(53,17,&lt;4,15&gt;,&lt;4,32&gt;)
Call stack (most recent first):
	main([]) at |test-modules:///ConsoleInput.rsc|(53,17,&lt;4,15&gt;,&lt;4,32&gt;)

ok</code></pre>
</div>
</div>
<div class="paragraph">
<p>And if we increment an existing entry the ? has no effect:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;M["Andy"] ? 0 += 1;
map[str, int]: ("Andy":2,"Brian":2)
rascal&gt;M["Andy"]
int: 1</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Assignment-Multiple">7.3.5. Multiple</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Assign to multiple assignables.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>First the value <em>Exp</em> is determined and should be a tuple of the form <code>&lt; <em>V</em><sub>1</sub>, <em>V</em><sub>2</sub>, &#8230;&#8203;, <em>V</em><sub>n</sub> &gt;</code>.
Next the assignments <code><em>Assignable</em><sub>i</sub> = <em>V</em><sub>i</sub></code> are performed for 1 &lt;= i &lt;= n.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;&lt;A, B, C&gt; = &lt;"abc", 2.5, [1,2,3]&gt;;
tuple[str,real,list[int]]: &lt;"abc",2.5,[1,2,3]&gt;
rascal&gt;A;
str: "abc"
rascal&gt;B;
real: 2.5
rascal&gt;C;
list[int]: [1,2,3]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Assignment-Slice">7.3.6. Slice</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Assign to a slice of a list or string.</p>
</div>
<div class="ulist">
<div class="title">Syntax</div>
<ul>
<li>
<p><code><em>Assignable</em> [ <em>Exp<sub>1</sub></em> .. <em>Exp_3</em> ] = <em>Exp<sub>4</sub></em></code></p>
</li>
<li>
<p><code><em>Assignable</em> [ <em>Exp<sub>1</sub></em>, <em>Exp<sub>2</sub></em> .. <em>Exp<sub>3</sub></em> ] = <em>Exp<sub>4</sub></em></code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code><em>Exp</em><sub>1</sub></code> and <code><em>Exp</em><sub>3</sub></code> are optional
.Types</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>A slice assignment is defined for <a href="#Values-List">List</a>, <a href="#Values-String">String</a> and <a href="#Values-Node">Node</a>
and aims to replace a slice from the old value of the assignable by a new value.
See <a href="#List-Slice">List Slice</a>, <a href="#String-Slice">String Slice</a> or <a href="#Node-Slice">Node Slice</a> for a more detailed explanation of slicing.</p>
</div>
<div class="paragraph">
<p>Let <em>V</em> be the current value of <em>Assignable</em>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><em>Assignable</em> [ <em>Exp<sub>1</sub></em> .. <em>Exp<sub>3</sub></em> ] = <em>Exp<sub>4</sub></em></code>:
 The slice <code>[ <em>Exp</em><sub>1</sub> .. <em>Exp</em><sub>3</sub> ]</code> determines two indices <code>begin</code> (inclusive) and <code>end</code>
(exclusive) in <em>V</em>.
A new value <em>V</em>' is computed that is a copy of <em>V</em> but with all the elements in <em>V</em> with <code>begin &#8656; index &lt; end</code> replaced by the elements of the value of <em>Exp</em><sub>4</sub>.
Note that the size of <em>V</em> and <em>V</em>' may differ.
<em>V</em>' is assigned to the <em>Assignable</em>.</p>
</li>
<li>
<p><code><em>Assignable</em> [ <em>Exp<sub>1</sub></em>, <em>Exp<sub>2</sub></em> .. <em>Exp<sub>3</sub></em> ] = <em>Exp<sub>4</sub></em></code>:
The slice <code>[ <em>Exp</em><sub>1</sub>, <em>Exp</em><sub>2</sub> .. <em>Exp<sub>3</sub> ]</code> determines two indices <code>begin</code> (inclusive) and <code>end</code> (exclusive)
and a <code>step</code> between indices in _V</em>.
A new value <em>V</em>' is computed that is a copy of <em>V</em> but with all the elements in <em>V</em> with indices
<code>begin</code>, <code>begin+step</code>. &#8230;&#8203; <code>end-step</code> &#8656; <code>index &lt; end</code> replaced by the successive elements of the value of <em>Exp</em><sub>4</sub>.
Note that the size of <em>V</em> and <em>V</em>' may differ.  <em>V</em>' is assigned to the <em>Assignable</em>.
If the number of indices in the slice and the number of elements in the value of <em>Exp</em><sub>4</sub> is not equal the following is done:</p>
<div class="ulist">
<ul>
<li>
<p>If the number of elements in the slice is larger: the elements of <em>Exp<sub>4</sub></em> are used in a circular manner.</p>
</li>
<li>
<p>If the number of elements in the slice is smaller: the remaining elements of <em>Exp<sub>4</sub></em> is inserted after the last index in the slice.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Replace the elements with index 3, 4, 5 in <code>L</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;L = [0,1,2,3,4,5,6,7,8,9];
list[int]: [0,1,2,3,4,5,6,7,8,9]
rascal&gt;L[3..6] = [100,200,300,400,500];
list[int]: [0,1,2,100,200,300,400,500,6,7,8,9]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace the elements with index 1, 3, 5, 7 in <code>L</code> (note how the elements from <code>[100,200]</code> are used in a circular way):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;L = [0,1,2,3,4,5,6,7,8,9];
list[int]: [0,1,2,3,4,5,6,7,8,9]
rascal&gt;L[1,3..8] = [100,200];
list[int]: [0,100,2,200,4,100,6,200,8,9]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace the elements with index 1, 3, 5, 7 in <code>L</code> (note how the unused elements from <code>[100,200,300,400,500]</code>
are insert at index 7):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;L = [0,1,2,3,4,5,6,7,8,9];
list[int]: [0,1,2,3,4,5,6,7,8,9]
rascal&gt;L[1,3..8] = [100,200,300,400,500];
list[int]: [0,100,2,200,4,300,6,400,500,8,9]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Similar examples for slicing assignment on strings:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;S = "abcdefghij";
str: "abcdefghij"
rascal&gt;S[3..6] = "UVWXYZ";
str: "abcUVWXYZghij"
rascal&gt;S = "abcdefghij";
str: "abcdefghij"
rascal&gt;S[1,3..8] = "XY";
str: "aXcYeXgYij"
rascal&gt;S = "abcdefghij";
str: "abcdefghij"
rascal&gt;S[1,3..8] = "UVWXYZ";
str: "aUcVeWgXYZij"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace the elements with index 3, 4, 5 in node <code>N</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;N = "f"(0,true,2,"abc",4,5.5,6,{7,77},8,{9,99,999});
node: "f"(
  0,
  true,
  2,
  "abc",
  4,
  5.5,
  6,
  {7,77},
  8,
  {999,9,99})
rascal&gt;N[3..6] = [100,200,300,400,500];
node: "f"(
  0,
  true,
  2,
  100,
  200,
  300,
  400,
  500,
  6,
  {7,77},
  8,
  {999,9,99})</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace the elements with index 1, 3, 5, 7 in <code>L</code> (note how the elements from <code>[100,200]</code> are used in a circular way):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;N = "f"(0,true,2,"abc",4,5.5,6,{7,77},8,{9,99,999});
node: "f"(
  0,
  true,
  2,
  "abc",
  4,
  5.5,
  6,
  {7,77},
  8,
  {999,9,99})
rascal&gt;N[1,3..8] = [100,200];
node: "f"(
  0,
  100,
  2,
  200,
  4,
  100,
  6,
  200,
  8,
  {999,9,99})</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace the elements with index 1, 3, 5, 7 in <code>L</code> (note how the unused elements from <code>[100,200,300,400,500]</code>
are insert at index 7):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;N = "f"(0,true,2,"abc",4,5.5,6,{7,77},8,{9,99,999});
node: "f"(
  0,
  true,
  2,
  "abc",
  4,
  5.5,
  6,
  {7,77},
  8,
  {999,9,99})
rascal&gt;N[1,3..8] = [100,200,300,400,500];
node: "f"(
  0,
  100,
  2,
  200,
  4,
  300,
  6,
  400,
  500,
  8,
  {999,9,99})</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Assignment-Subscription">7.3.7. Subscription</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Assign a single element of a structured value.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Let <em>V</em> be the current value of <em>Assignable</em>. The value of <em>Exp</em><sub>1</sub> is used as index in <em>V</em> and
the value of <em>Exp</em><sub>2</sub> replaces the original value at that index position.
The result is a new value <em>V</em>' that is assigned to the <em>Assignable</em>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell"></code></pre>
</div>
</div>
<div class="paragraph">
<p>Assignable has a list value:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;L = [10,20,30];
list[int]: [10,20,30]
rascal&gt;P = L;
list[int]: [10,20,30]
rascal&gt;L[1] = 200;
list[int]: [10,200,30]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Observe that <code>P</code> is unchanged:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;P;
list[int]: [10,20,30]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Assignable has a map value:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;M = ("abc": 1, "def" : 2);
map[str, int]: ("abc":1,"def":2)
rascal&gt;M["def"] = 3;
map[str, int]: ("abc":1,"def":3)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Assignable has a tuple value:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;T = &lt;1, "abc", true&gt;;
tuple[int,str,bool]: &lt;1,"abc",true&gt;
rascal&gt;T[1] = "def";
tuple[int,str,bool]: &lt;1,"def",true&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
See <a href="https://github.com/usethesource/rascal/issues/948" class="bare">https://github.com/usethesource/rascal/issues/948</a>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="Assignment-Variable">7.3.8. Variable</h4>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Assign to a variable.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>The expression <em>Exp</em> is evaluated and its value is assigned to the variable <em>Var</em>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;N = 3;
int: 3
rascal&gt;N;
int: 3</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Statements-Block">7.4. Block</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Group statements into a block.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>{ <em>Statement</em><sub>1</sub>; &#8230;&#8203; ; <em>Statement</em><sub>n</sub> }</code></p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>A <em>block</em> consists of a sequence of statements separated by semi-colons.</p>
</div>
<div class="paragraph">
<p>Since a block is itself a statement, it may be used in all places where a statement is required.
A block also introduces a new scope and variables that are declared in the block are local to that block.
The value produced by a block is the value produced by its last statement (if any).</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Here is a contrived block of three expressions (be aware of the last semi-colon):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;{1;2;3;}
int: 3</code></pre>
</div>
</div>
<div class="paragraph">
<p>its value is <code>3</code>.</p>
</div>
<div class="paragraph">
<p>The effect of a local variable declared in a block can be seen as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;{int x = 3; x*x;}
int: 9</code></pre>
</div>
</div>
<div class="paragraph">
<p>After the block we cannot refer to <code>x</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;x;
[error] Name x is not in scope</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Statements-Break">7.5. Break</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>End the execution of a while, do or for loop.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>A <code>break</code> statement is only allowed inside the body of a <a href="#Statements-While">While</a>, <a href="#Statements-Do">Do</a> or <a href="#Statements-For">For</a> statement
and is associated with the innermost loop statement in which it is contained.
Its effect is to end the execution of the loop.</p>
</div>
<div class="paragraph">
<p>Also see <a href="#Statements-Continue">Continue</a> and <a href="#Statements-Fail">Fail</a>.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Here is an example using break to find the first number divisible by 3:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import IO;
ok
rascal&gt;for(int i &lt;- [1 .. 10]){
&gt;&gt;&gt;&gt;&gt;&gt;&gt;    if(i % 3 == 0){
&gt;&gt;&gt;&gt;&gt;&gt;&gt;       println("i = &lt;i&gt; is divisible by 3");
&gt;&gt;&gt;&gt;&gt;&gt;&gt;       break;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;    }
&gt;&gt;&gt;&gt;&gt;&gt;&gt;}
i = 3 is divisible by 3
list[void]: []</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Statements-Continue">7.6. Continue</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Continue with the next iteration of while, do or for loop.</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>A continue statement is only allowed inside the body of a <a href="#Statements-While">While</a>, <a href="#Statements-Do">Do</a> or <a href="#Statements-For">For</a> statement
and is associated with the innermost loop statement in which it is contained.
Its effect is to end the execution of the block for the current iteration of the loop
and to continue with the next iteration of the loop.</p>
</div>
<div class="paragraph">
<p>Also see <a href="#Statements-Break">Break</a> and <a href="#Statements-Fail">Fail</a>.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Here is an example using continue to avoid printing numbers that are divisible by 3:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import IO;
ok
rascal&gt;for(int i &lt;- [1 .. 10]){
&gt;&gt;&gt;&gt;&gt;&gt;&gt;    if(i % 3 == 0)
&gt;&gt;&gt;&gt;&gt;&gt;&gt;       continue;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;    println("i = &lt;i&gt;");
&gt;&gt;&gt;&gt;&gt;&gt;&gt;}
i = 1
i = 2
i = 4
i = 5
i = 7
i = 8
list[void]: []</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Statements-Do">7.7. Do</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Repeat statements while condition holds.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>do <em>Statement</em> while ( <em>Exp</em> );</code></p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p><em>Statement</em> is executed repeatedly, as long as the Boolean expression <em>Exp</em> yields true.
Expression <em>Exp</em> is executed from scratch in each repetition and only the first true value (if any) is used.</p>
</div>
<div class="paragraph">
<p>By default, the value of a do statement is the empty list.
In general, the value of a do statement consists of all values contributed by <a href="#Statements-Append">Append</a> statements
that are executed during the repeated execution of its body Statement.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import IO;
ok
rascal&gt;int n = 3;
int: 3
rascal&gt;do { println("n = &lt;n&gt;"); n -= 1; } while (n &gt; 0);
n = 3
n = 2
n = 1
list[void]: []</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now build a list result using the <code>append</code> statement:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;n = 3;
int: 3
rascal&gt;do { append n * n; n -= 1; } while (n &gt; 0);
list[int]: [9,4,1]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Statements-Fail">7.8. Fail</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Let the current alternative of a pattern match fail.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>fail;</code></p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>A <code>fail</code> statement is only allowed in statements that are controlled by the outcome of a pattern match:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <a href="#Rascal-Patterns">Patterns</a> in a <a href="#Pattern with Action">[Pattern with Action]</a> in <a href="#Statements-Switch">Switch</a> or <a href="#Expressions-Visit">Visit</a> statement controls the statements in the action part.</p>
</li>
<li>
<p>The test (expression) of a <a href="#Statements-While">While</a> or <a href="#Statements-Do">Do</a> statement controls the statements in the body part.</p>
</li>
<li>
<p>The test (expressions) of a <a href="#Statements-For">For</a> statement control the statements in the body part.</p>
</li>
<li>
<p>The formal parameter declaration of a <a href="#Declarations-Function">Function Declaration</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>fail</code> statement is associated with the innermost pattern match by which it is controlled.</p>
</div>
<div class="paragraph">
<p>When <code>fail</code> is executed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the associated pattern has more alternatives, the next alternative is explored,</p>
</li>
<li>
<p>otherwise the pattern as a whole fails.</p>
<div class="ulist">
<ul>
<li>
<p>In the case of switch or visit this means that the next case will be tried.
Any bindings caused by the pattern or side-effects caused by the action are undone.</p>
</li>
<li>
<p>For while, do and for, this implies that any bindings caused by the pattern are undone and that the next
alternative in the test is tried; otherwise the loop is terminated.</p>
</li>
<li>
<p>For a function call it means that the next function declaration (or the default one) is tried.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Here is an example taken from <a href="../Recipes/Recipes.html#Bubble">Bubble</a>.
It uses a <code>fail</code> for the case that no unsorted element can be found in the list of numbers.
As a result, the whole case fails and the default case is used.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import IO;
ok
rascal&gt;public list[int] sort(list[int] numbers){
&gt;&gt;&gt;&gt;&gt;&gt;&gt;  switch(numbers){
&gt;&gt;&gt;&gt;&gt;&gt;&gt;    case [*int nums1, int p, int q, *int nums2]:
&gt;&gt;&gt;&gt;&gt;&gt;&gt;       if(p &gt; q){
&gt;&gt;&gt;&gt;&gt;&gt;&gt;          return sort(nums1 + [q, p] + nums2);
&gt;&gt;&gt;&gt;&gt;&gt;&gt;       } else {
&gt;&gt;&gt;&gt;&gt;&gt;&gt;       	  fail;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;       }
&gt;&gt;&gt;&gt;&gt;&gt;&gt;     default: return numbers;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;   }
&gt;&gt;&gt;&gt;&gt;&gt;&gt;}
ok
rascal&gt;sort([10, 1, 5, 3]);
list[int]: [1,3,5,10]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Statements-For">7.9. For</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>For loop.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>for ( <em>Exp</em><sub>1</sub> , <em>Exp</em><sub>2</sub> , &#8230;&#8203; , <em>Exp</em><sub>n</sub> ) <em>Statement</em>;</code></p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>The for-statement executes <em>Statement</em> for all possible combinations of values of the expressions <em>Exp</em><sub>i</sub>.
If one of the expressions is a boolean expression, we do try all its possible values.</p>
</div>
<div class="paragraph">
<p>By default, the value of a for statement is the empty list. In general,
the value of a for statement consists of all values contributed by <a href="#Statements-Append">Append</a> statements that are executed during the repeated execution of its body Statement.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import IO;
ok
rascal&gt;for(int n &lt;- [1 .. 5]) println("n = &lt;n&gt;");
n = 1
n = 2
n = 3
n = 4
list[void]: []
rascal&gt;for(int n &lt;- [1 .. 5]) append n * n;
list[int]: [1,4,9,16]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Statements-If">7.10. If</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Conditional statement.</p>
</div>
<div class="ulist">
<div class="title">Syntax</div>
<ul>
<li>
<p><code>if ( <em>Exp</em> ) <em>Statement</em>;</code></p>
</li>
<li>
<p><code>if ( <em>Exp</em> ) <em>Statement<sub>1</sub></em> else <em>Statement<sub>2</sub></em>;</code></p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Types</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp</em></code></th>
<th class="tableblock halign-left valign-top"><code>if ( <em>Exp</em> ) <em>Statement</em>;</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>void</code></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code><em>Exp</em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Statement<sub>1</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code><em>Statement<sub>2</sub></em></code></th>
<th class="tableblock halign-left valign-top"><code>if ( <em>Exp</em> ) <em>Statement<sub>1</sub></em> else <em>Statement<sub>2</sub></em>;</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>T<sub>1</sub></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>T<sub>2</sub></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lub(<em>T<sub>1</sub></em>, <em>T<sub>2</sub></em>)</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Description</div>
<p>The test <em>Exp</em> is evaluated and its outcome determines the statement to be executed:
<em>Statement</em><sub>1</sub> if <em>Exp</em> yields <code>true</code> and <em>Statement</em><sub>2</sub> otherwise.
The value of an if-then statement is equal to <em>Statement</em> when its test is true. Otherwise it is void.
The value of an if-then-else statement is the value of the statement that was executed.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;if( 3 &gt; 2 ) 30; else 40;
int: 30
rascal&gt;x = if( 3 &gt; 2 ) 30; else 40;
int: 30
rascal&gt;if( 3 &gt; 2 ) 30;
int: 30</code></pre>
</div>
</div>
<div class="paragraph">
<p>An if-then statement yields <code>void</code>  when its test is false
(demonstrated by the <em>ok</em> that is printed by the Rascal system):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;if( 2 &gt; 3 ) 30;
int: 666</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Get rid of the 666.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="Statements-Insert">7.11. Insert</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Insert a value in a tree during a <a href="#Expressions-Visit">Visit</a>.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>insert <em>Exp</em>;</code></p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>An insert statement may only occur in the action part of a <a href="#Patterns-PatternWithAction">Pattern With Action</a>, more precisely in
a case in a <a href="#Expressions-Visit">Visit</a> expression. The value matched by the pattern of this case is replaced by the value of <em>Exp</em>.</p>
</div>
<div class="paragraph">
<p>The following rule applies:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The static type of <em>Exp</em> should be a subtype of the type of the value that is replaced.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Consider the following datatype <code>CTree</code> and assign a CTree value to variable <code>T</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;data CTree = leaf(int n) | red(CTree left, CTree right) | green(CTree left, CTree right);
ok
rascal&gt;CTree T = red(green(leaf(1), red(leaf(2), leaf(3))), red(leaf(4), leaf(5)));
CTree: red(
  green(
    leaf(1),
    red(
      leaf(2),
      leaf(3))),
  red(
    leaf(4),
    leaf(5)))</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can now switch the arguments of all red nodes as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;visit(T){
&gt;&gt;&gt;&gt;&gt;&gt;&gt;  case red(CTree l, CTree r): insert red(r,l);
&gt;&gt;&gt;&gt;&gt;&gt;&gt;}
CTree: red(
  red(
    leaf(5),
    leaf(4)),
  green(
    leaf(1),
    red(
      leaf(3),
      leaf(2))))</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since this is a very common idiom, we also have a shorthand for it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;visit(T){
&gt;&gt;&gt;&gt;&gt;&gt;&gt;  case red(CTree l, CTree r) =&gt; red(r,l)
&gt;&gt;&gt;&gt;&gt;&gt;&gt;}
CTree: red(
  red(
    leaf(5),
    leaf(4)),
  green(
    leaf(1),
    red(
      leaf(3),
      leaf(2))))</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Pitfalls</div>
<p>There is a glitch in the Rascal syntax that <em>requires</em> a semicolon after a case (as in the first example),
but refuses it in the abbreviated version using <code>&#8658;</code> (the second example).</p>
</div>
</div>
<div class="sect2">
<h3 id="Statements-Return">7.12. Return</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Return a value as result of a [Function].</p>
</div>
<div class="ulist">
<div class="title">Syntax</div>
<ul>
<li>
<p><code>return;</code></p>
</li>
<li>
<p><code>return <em>Exp</em></code></p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>A return statement comes in two variants: without and with an expression,
both variants end the execution of the current function.
The first variant applies to functions with <code>void</code> as return type.
The second variants applies to non-void functions and returns the value of <em>Exp</em> as result of the function invocation.
The following rules apply:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The static type of <em>Exp</em> should be compatible with the declared return type of the function in
which the return statement occurs.</p>
</li>
<li>
<p>In each function with a return type that is not void, every possible execution path through the body of
the function should end in a return statement.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In each function with a return type that is void, a return statement is implicitly assumed at the end of each execution path through the function body.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;int twice(int n) { return 2 * n; }
ok
rascal&gt;twice(5);
int: 10</code></pre>
</div>
</div>
<div class="paragraph">
<p>Functions that only return a value can be abbreviated (and the return is implicit):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;int twiceb(int n) = 2 * n;
ok
rascal&gt;twiceb(5);
int: 10</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Statements-Solve">7.13. Solve</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Solve a set of equalities by fixed-point iteration.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>solve(<em>Var</em><sub>1</sub>, <em>Var</em><sub>2</sub>, &#8230;&#8203;, <em>Var</em><sub>n</sub>; <em>Exp</em>) <em>Statement</em>;</code></p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>Rascal provides a solve statement for performing arbitrary fixed-point computations. This means, repeating a certain computation as long as it causes changes. This can, for instance, be used for the solution of sets of simultaneous
linear equations but has much wider applicability.</p>
</div>
<div class="paragraph">
<p>The solve statement consists of the variables for which a fixed point will be computed and a statement.
Optionally, an expression <em>Exp</em> directly following the list of variables gives an upper bound on the number of iterations.</p>
</div>
<div class="paragraph">
<p>Statement can use and modify the listed variables <em>Var</em><sub>i</sub>.
The statement is executed, assigning new values to the variables <em>Var</em><sub>i</sub>, and this is repeated as long as the value
of any of the variables was changed compared to the previous repetition.
Note that this computation will only terminate if the variables range over a so-called <em>bounded monotonic lattice</em>,
in which values can only become larger until a fixed upper bound or become smaller until a fixed lower bound.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Let&#8217;s consider transitive closure as an example (transitive closure is already available as built-in operator,
we use it here just as a simple illustration). Transitive closure of a relation is usually defined as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">R+ = R + (R o R) + (R o R o R) + ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>In other words, it is the union of successive <a href="#Relation-Composition">Relation Composition</a>s of <code>R</code> with itself.
For a given relation <code>R</code> this can be expressed as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;rel[int,int] R = {&lt;1,2&gt;, &lt;2,3&gt;, &lt;3,4&gt;};
rel[int,int]: {
  &lt;3,4&gt;,
  &lt;1,2&gt;,
  &lt;2,3&gt;
}
rascal&gt;T = R;
rel[int,int]: {
  &lt;3,4&gt;,
  &lt;1,2&gt;,
  &lt;2,3&gt;
}
rascal&gt;solve (T) {
&gt;&gt;&gt;&gt;&gt;&gt;&gt;          T = T + (T o R);
&gt;&gt;&gt;&gt;&gt;&gt;&gt;        }
rel[int,int]: {
  &lt;2,4&gt;,
  &lt;3,4&gt;,
  &lt;1,4&gt;,
  &lt;1,3&gt;,
  &lt;1,2&gt;,
  &lt;2,3&gt;
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Statements-Switch">7.14. Switch</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Switch statement.</p>
</div>
<div class="listingblock">
<div class="title">Syntax</div>
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">switch ( <em>Exp</em> ) {
case <em>PatternWithAction<sub>1</sub></em>;
case <em>PatternWithAction<sub>2</sub></em>;
...
default: ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>A switch statement is similar to a switch statement in C or Java.
The value of the expression <em>Exp</em> is the subject term that will be matched by the successive
<a href="#Patterns-PatternWithAction">Pattern With Action</a>s in the switch statement. The switch statement provides only matching at the top level of
the subject term and does not traverse it. The type of the pattern in each case must be identical to the type of
the subject term (or be a supertype of it). If no case matches, the switch acts as a dummy statement.
There is no fall through from one case to the next.</p>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Suppose we want to naively analyze a sentence and print the topic it is about:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import IO;
ok
rascal&gt;S = "Princess Leila sipped from her rum punch";
str: "Princess Leila sipped from her rum punch"
rascal&gt;switch(S){
&gt;&gt;&gt;&gt;&gt;&gt;&gt;  case /Leila/: println("The topic is Star Wars");
&gt;&gt;&gt;&gt;&gt;&gt;&gt;  case /rum/:   println("The topic is Drunken man");
&gt;&gt;&gt;&gt;&gt;&gt;&gt;  case /punch/: println("The topic is Kick Boxing");
&gt;&gt;&gt;&gt;&gt;&gt;&gt;}
The topic is Star Wars
ok</code></pre>
</div>
</div>
<div class="paragraph">
<p>From the printed message you can infer that the cases are tried in the order in which they occur.</p>
</div>
<div class="paragraph">
<div class="title">Pitfalls</div>
<p>The switch statement does not yet return a value, this will be changed.</p>
</div>
</div>
<div class="sect2">
<h3 id="Statements-Test">7.15. Test</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Test statement (<em>deprecated</em>).</p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>The <code>test</code> statement is deprecated and is replaced by the <code>test</code> modifier in function declarations, see <a href="#Declarations-Function">Function Declaration</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Statements-Throw">7.16. Throw</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Throw an exception.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>throw <em>Exp</em></code></p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>A throw statement causes the immediate abortion of the execution of the current function with <em>Exp</em> \'s value as exception value.
The exception can be caught by a <a href="#Statements-TryCatch">Try Catch</a> statement in the current function or in one of its callers.
If the exception is not caught, the execution of the Rascal program is terminated. The following rules apply:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The static type of <em>Exp</em> should be <code>RuntimeException</code>, see <a href="../Libraries/Libraries.html#Exception-RuntimeException">RuntimeException</a>.</p>
</li>
<li>
<p>The Rascal program may contain data declarations that extend the type <code>RuntimeException</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Here is a a variant of string concatenation for ball haters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell-error" data-lang="rascal-shell-error">rascal&gt;str conc(str x, str y){ if("ball" in {x, y}) throw "I hate balls"; return x + y; }
ok
rascal&gt;conc("fairy", "tale");
str: "fairytale"
rascal&gt;conc("foot", "ball");
"I hate balls"
Call stack (most recent first):
	conc("foot", "ball", {}) at |test-modules:///ConsoleInput.rsc|(47,16,&lt;2,27&gt;,&lt;2,43&gt;)
	main([]) at |test-modules:///ConsoleInput.rsc|(120,20,&lt;5,15&gt;,&lt;5,35&gt;)

ok</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Statements-TryCatch">7.17. Try Catch</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>Try to execute a statement and catch resulting exceptions.</p>
</div>
<div class="listingblock">
<div class="title">Syntax</div>
<div class="content">
<pre class="highlight"><code class="language-rascal" data-lang="rascal">try
   <em>Statement<sub>1</sub></em>;
catch <em>PatternWithAction<sub>1</sub></em>;
catch <em>PatternWithAction<sub>2</sub></em>;
...
catch: <em>Statement<sub>2</sub></em>;
finally: <em>Statement<sub>3</sub></em>;</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>A try catch statement has as purpose to catch any <a href="../Libraries/Libraries.html#Prelude-Exception">Exceptions</a> that are raised
during the execution of <em>Statement</em><sub>1</sub>.
These exceptions may caused by:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The execution of an explicit <a href="#Statements-Throw">Throw</a> statement.</p>
</li>
<li>
<p>The Rascal system that discovers an abnormal condition, e.g., an out of bounds error when accessing a list element.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that all elements of the try catch statement are optional but that at least one has to be present.
Their meaning is as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If a pattern of some <em>PatternWithAction<sub>i</sub></em> matches, the corresponding action is executed.</p>
</li>
<li>
<p>Otherwise, <em>Statement<sub>2</sub></em> is executed (when present).</p>
</li>
<li>
<p>Before leaving the try catch statement <em>Statement<sub>3</sub></em> is always executed (when present).</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Examples</div>
<p>Let&#8217;s define a variant of the <a href="../Libraries/Libraries.html#List-head">head</a> function that returns the first element of a list,
but throws an exception when the list is empty. Our variant will return <code>0</code> for an empty list:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import List;
ok
rascal&gt;import Exception;
ok
rascal&gt;int hd(list[int] x) { try return head(x); catch: return 0; }
ok
rascal&gt;hd([1,2,3]);
int: 1
rascal&gt;hd([]);
int: 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can also be more specific and catch the <code>EmptyList</code> exception
(which is available here since we have imported the <code>Exception</code> module):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;int hd2(list[int] x) { try return head(x); catch EmptyList(): return 0; }
ok
rascal&gt;hd2([]);
int: 0</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Statements-While">7.18. While</h3>
<div class="paragraph">
<div class="title">Synopsis</div>
<p>While loop.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>while ( <em>Exp</em> ) <em>Statement</em>;</code></p>
</div>
<div class="paragraph">
<div class="title">Description</div>
<p>The Boolean expression <em>Exp</em> is evaluated repeatedly and <em>Statement</em> is executed when the test is true.
Execution ends the first time that the test yields false.
The test <em>Exp</em> is executed from scratch in each repetition and only the first <code>true</code> value (if any) is used.
This is relevant when <em>Exp</em> contains a <a href="#Boolean-Match">Boolean Match</a> or <a href="#Boolean-NoMatch">Boolean NoMatch</a> operator.</p>
</div>
<div class="paragraph">
<p>By default, the value of a while statement is the empty list. In general, the value of a while statement
consists of all values contributed by <a href="#Statements-Append">Append</a> statements that are executed during the repeated execution
of its body <em>Statement</em>.</p>
</div>
<div class="listingblock">
<div class="title">Examples</div>
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;import IO;
ok
rascal&gt;int n = 3;
int: 3
rascal&gt;while( n &gt; 0 ) { println("n = &lt;n&gt;"); n -= 1; }
n = 3
n = 2
n = 1
list[void]: []</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now build a list result using the <code>append</code> statement:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;n = 3;
int: 3
rascal&gt;while (n &gt; 0) { append n * n; n -= 1; }
list[int]: [9,4,1]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Just to be sure, a <a href="#List-Comprehension">List Comprehension</a> is the superior way to write this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-rascal-shell" data-lang="rascal-shell">rascal&gt;[n * n | n &lt;- [3 .. 1]];
list[int]: [9,4]</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2016-06-01 00:22:51 CEST
</div>
</div>
</body>
</html>