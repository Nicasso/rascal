<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">

<!---- DO NOT EDIT: HTML generated by CourseCompiler ---->


<head>
<title>Rascal/Libraries/Vis/Figure/Properties/timer</title>

<meta name="description" content="Rascal/Libraries/Vis/Figure/Properties/timer:  Define interactive, time-dependent, behaviour.">

<meta name="keywords" content="Rascal/Libraries/Vis/Figure/Properties/timer, Rascal, meta-programming, software analysis, software transformation">
<link type="text/css" rel="stylesheet" href="/prelude.css"/>
<link type="text/css" rel="stylesheet" href="/jquery.autocomplete.css"/>
<script type="text/javascript" src="/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="/jquery.colorbox-min.js"></script>
<script type="text/javascript" src="/jquery.cookie.js"></script>
<script type="text/javascript" src="/jquery.jstree.js"></script>
<script type="text/javascript" src="/jquery.autocomplete.js"></script>
<script type="text/javascript" src="/jquery.history.js"></script>
<script type="text/javascript" src="/globals.js"></script>
<script type="text/javascript" src="/prelude.js"></script>
<script type="text/javascript" src="/Rascal/course.js"></script>

</head>
<body>
<table id="container"><tr><td id="tdlogo"><a id="tutorAction" href="/index.html"><img id="leftIcon" height="40" width="40" src="/images/rascal-tutor-small.png"></a></td><td id="tdsearch">
<div id="searchBox">
  <form method="GET" id="searchForm" action="/search"> 
    <img id="searchIcon" height="20" width="20" src="/images/magnify.png">
    <input type="hidden" name="concept" value="Rascal/Libraries/Vis/Figure/Properties/timer">
    <input type="text" id="searchField" name="term" autocomplete="off"><br />
    <div id="popups"></div>
  </form>
</div>
</td></tr><tr><td id="tdnav">
<a id="navPanePlaceHolder" href="/Rascal/navigate.html" >Navigation</a>
<script type="text/javascript"> var navigationPaneSource="/Rascal/navigate.html"; </script></td><td id="tdconcept">
<div id="conceptPane">

<div id="Name">
<span class="sectionHead">Name</span> <a href="/Rascal/Rascal.html">Rascal</a>/<a href="/Rascal/Libraries/Libraries.html">Libraries</a>/<a href="/Rascal/Libraries/Vis/Vis.html">Vis</a>/<a href="/Rascal/Libraries/Vis/Figure/Figure.html">Figure</a>/<a href="/Rascal/Libraries/Vis/Figure/Properties/Properties.html">Properties</a>/<a href="/Rascal/Libraries/Vis/Figure/Properties/timer/timer.html">timer</a>
</div>

<div id="Synopsis">
<span class="sectionHead">Synopsis</span>  Define interactive, time-dependent, behaviour.

</div>




<div id="Function">
<span class="sectionHead">Function</span>  <code>FProperty timer (TimerAction (TimerInfo) ti, void () cbb)</code>

</div>


<div id="Description">
<span class="sectionHead">Description</span>  This property allows you to execute a callback <code>cbb</code> after a specified time, and also allows you to delay, cancel and restart the timer. 
 <br/>
<br/>

 At the start and after each event (i.e. other callback) the callback <code>ti</code> will be called. This callback should have type <code>TimerAction (TimerInfo)</code>. The callback is given a <code>TimerInfo</code> structure:
 <pre class="screen"><span class="prompt">rascal></span>data TimerInfo  = stopped(int timeSinceLast) 
<span class="continuation">>>>>>>></span>		| running(int timeLeft);
ok
</pre> This indicates if the timer has stopped and the time since the last execution of the timer (in milliseconds, initially 0) or if the timer is running and the time that is still left till the callback <code>cbb</code> will be executed.
 <br/>
<br/>

 The callback <code>ti</code> must then return a <code>TimerAction</code> which indicates what action it want to undertake:
  <pre class="screen"><span class="prompt">rascal></span>data TimerAction = restart(int delay)
<span class="continuation">>>>>>>></span>		 | stop()
<span class="continuation">>>>>>>></span>		 | noChange();
ok
</pre> <ul><li> <code>restart(int delay)</code> indicates that the timer is restarted and that the callback <code>cbb</code> will be executed <code>delay</code> milliseconds from now. This can also be used to delay the timer. </li>
<li> <code>stop()</code> indicates that the timer is cancelled.</li>
<li> <code>noChange()</code> indicates that timer no change to the timer. </li>
</ul>
</div>


<div id="Examples">
<span class="sectionHead">Examples</span>  <pre class="listing">c = false;
void executeTimer(){
	c = !c;
}
TimerAction timeAction(TimerInfo t){
        if(stopped(_) := t){
		return restart(300);
	} else {
		return noChange();
	}
}
Color getColor(){
	return c ? color("red") : color("green");
}
e = ellipse(fillColor(getColor), timer(timeAction,executeTimer),shrink(0.5));
render(e);
</pre> <img class="TutorImg"  title="timer" alt="timer" src="/Rascal/Libraries/Vis/Figure/Properties/timer/timer.png">

</div>



<div id="Pitfalls">
<span class="sectionHead">Pitfalls</span>  Unfortunately we cannot show an animated version of the figure above, try it out in rascal yourself.

</div>


<a id="tutorAction" href="/index.html"><img id="leftIcon" height="40" width="40" src="/images/rascal-tutor-small.png"></a><div id="editMenu">[<a id="editAction" href="/edit?concept=Rascal/Libraries/Vis/Figure/Properties/timer&new=false"><b>Edit</b></a>] | 
               [<a id="newAction" href="/edit?concept=Rascal/Libraries/Vis/Figure/Properties/timer&new=true"><b>New Subconcept</b></a>] |
               [<a id="compileAction" href="/compile?name=Rascal"><b>Recompile Course</b></a>] |
               [<a id="warnAction" href="/Rascal/warnings.html"><b>Warnings</b></a>]</div>
<span class="editMenuFooter">Is this page unclear, or have you spotted an error? Please add a comment below and help us to improve it. For all other questions and remarks, visit <a href="http://ask.rascal-mpl.org">ask.rascal-mpl.org</a>. </span>
</div>
</td></tr></table>
</body>
</html>